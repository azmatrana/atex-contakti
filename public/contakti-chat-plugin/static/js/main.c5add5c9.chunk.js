(this["webpackJsonpcontakti-chat"]=this["webpackJsonpcontakti-chat"]||[]).push([[0],{13:function(t,e,a){"use strict";var n=a(4),s=a(5),o=function(){function t(){Object(n.a)(this,t)}return Object(s.a)(t,null,[{key:"displayPrice",value:function(t){return Number(t).toFixed(2)}}]),t}();o.replaceURLs=function(t){if(!t)return"";return t.replace(/(((https?:\/\/)|(www\.))[^\s]+)/g,(function(t){var e=t;return e.match("^https?://")||(e="http://"+e),'<a href="'+e+'" target="_blank" rel="noopener noreferrer">'+t+"</a>"}))},o.replaceAllNewLines=function(t){return t?t.replace(/\n/g,"<br/>"):""},o.convertHtmlToText=function(t){return t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<style([\s\S]*?)<\/style>/gi,"")).replace(/<script([\s\S]*?)<\/script>/gi,"")).replace(/<\/div>/gi,"\n")).replace(/<\/li>/gi,"\n")).replace(/<li>/gi,"  *  ")).replace(/<\/ul>/gi,"\n")).replace(/<\/p>/gi,"\n")).replace(/<br\s*[\/]?>/gi,"\n")).replace(/<[^>]+>/gi,"")},o.getUrlParams=function(t){var e={};return(t+"?").split("?")[1].split("&").forEach((function(t){(t=(t+"=").split("=").map(decodeURIComponent))[0].length&&(e[t[0]]=t[1])})),e},e.a=o},56:function(module,__webpack_exports__,__webpack_require__){"use strict";var _Users_devgeek_projects_contakti_contakti_chat_plugin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4),_Users_devgeek_projects_contakti_contakti_chat_plugin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5),_Users_devgeek_projects_contakti_contakti_chat_plugin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7),_Users_devgeek_projects_contakti_contakti_chat_plugin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1),react__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__),_Product__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(57),_classes_ChatUtils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(13),lodash__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(14),lodash__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_7__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(0),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__),Cart=function(_Component){Object(_Users_devgeek_projects_contakti_contakti_chat_plugin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_2__.a)(Cart,_Component);var _super=Object(_Users_devgeek_projects_contakti_contakti_chat_plugin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_3__.a)(Cart);function Cart(t){var e;return Object(_Users_devgeek_projects_contakti_contakti_chat_plugin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__.a)(this,Cart),(e=_super.call(this,t)).onProductRemove=function(t){var a=e.state.products;a=lodash__WEBPACK_IMPORTED_MODULE_7___default.a.reject(a,(function(e){return e.id===t.id})),e.setState({products:a},(function(){0===e.state.products.length&&e.props.onCartEmpty(),e.countSum()}))},e.addProduct=function(t){var a=e.state.products,n=lodash__WEBPACK_IMPORTED_MODULE_7___default.a.find(a,{id:t.id});n?(n.quantity+=1,e.replaceProduct(n)):(t.quantity=1,a.push(t),e.setState({products:a},(function(){return e.countSum()})))},e.countSum=function(){var t=0,a=e.state.products;lodash__WEBPACK_IMPORTED_MODULE_7___default.a.each(a,(function(e){t+=e.price*e.quantity})),e.setState({sum:t})},e.replaceProduct=function(t){var a=e.state.products,n=lodash__WEBPACK_IMPORTED_MODULE_7___default.a.findIndex(a,{id:t.id});a.splice(n,1,t),e.setState({products:a}),e.countSum()},e.handleShipmentChange=function(t){var a=t.target.value,n=e.state.selectedShipmentMethod;lodash__WEBPACK_IMPORTED_MODULE_7___default.a.each(e.props.contaktiChat.shipment_methods,(function(t){a==t.id&&(n=t)})),e.setState({selectedShipmentMethod:n})},e.handleCheckoutMethodChange=function(t){e.setState({selectedCheckoutMethod:t.target.value})},e.state={products:[],shipmentMethods:[],sum:0,currency:e.props.contaktiChat.currency,showModal:!1,selectedProduct:{},selectedShipmentMethod:e.props.contaktiChat.shipment_methods[0],selectedCheckoutMethod:e.props.contaktiChat.checkout_methods[0]},e}return Object(_Users_devgeek_projects_contakti_contakti_chat_plugin_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__.a)(Cart,[{key:"componentDidMount",value:function(){this.countSum();this.props.contaktiChat}},{key:"render",value:function render(){var _this2=this,_this$state=this.state,products=_this$state.products,selectedCheckoutMethod=_this$state.selectedCheckoutMethod,contaktiChat=this.props.contaktiChat,color=contaktiChat.color,text_color=contaktiChat.text_color,translations=contaktiChat.translations;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{id:"contakti_cart_box",className:"cart_box",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"msg_head",style:{backgroundColor:color},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("span",{id:"contakti-user-name",style:{color:text_color},children:[" ",translations.user_dashboard.shopping_cart.cart_title]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("span",{id:"close-cart-icon",className:"float-end p-1 mr-2 d-none d-sm-block d-md-none",onClick:this.props.toggleCart,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("i",{className:"fa fa-times"})})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"cart_body d-flex flex-column justify-content-between",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{style:{maxHeight:"270px",overflow:"auto"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_Product__WEBPACK_IMPORTED_MODULE_5__.a,{products:products,onProductRemove:this.onProductRemove,increaseQuantity:this.addProduct,replaceProduct:this.replaceProduct,total:"".concat(_classes_ChatUtils__WEBPACK_IMPORTED_MODULE_6__.a.displayPrice(this.state.sum)).concat(this.state.currency),translations:translations.user_dashboard.shopping_cart,handleShow:this.props.handleShow,currency:this.state.currency})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"text-center",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"row form-group",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"col-6",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("label",{children:[" ",translations.user_dashboard.shopping_cart.checkout_method]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"centera",id:"checkout_method_select",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("select",{className:"form-control w-100 m-auto",onChange:this.handleCheckoutMethodChange,value:this.state.selectedCheckoutMethod,children:contaktiChat.checkout_methods.map((function(method,index){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("option",{value:method,children:[" ",eval("translations.service_channels."+method)]})}))})})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("div",{className:"col-6",children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("label",{children:[" ",translations.shipment_methods.title]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{className:"centera",id:"shipment_method_select",children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("select",{className:"form-control w-100 m-auto",onChange:this.handleShipmentChange,value:this.state.selectedShipmentMethod.id,children:contaktiChat.shipment_methods.map((function(t,e){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("option",{value:t.id,children:[" ",t.name]},e)}))})})]})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)("button",{className:"btn w-50",style:{color:text_color,backgroundColor:color},onClick:function(){return _this2.props.handleOrder(_this2.state.products,_this2.state.selectedCheckoutMethod,_this2.state.selectedShipmentMethod,_this2.state.sum)},children:[" ",translations.user_dashboard.shopping_cart.checkout]})})]})]})]})}}]),Cart}(react__WEBPACK_IMPORTED_MODULE_4__.Component);__webpack_exports__.a=Cart},57:function(t,e,a){"use strict";var n=a(4),s=a(5),o=a(7),i=a(6),c=a(1),r=a(13),l=a(0),h=function(t){Object(o.a)(a,t);var e=Object(i.a)(a);function a(t){var s;return Object(n.a)(this,a),(s=e.call(this,t)).onProductRemove=function(t){s.props.onProductRemove(t)},s.increaseQuantity=function(t){s.props.increaseQuantity(t)},s.decreaseQuantity=function(t){t.quantity>1&&(t.quantity-=1,s.props.replaceProduct(t))},s.state={},s}return Object(s.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.products,n=e.currency,s=this.props.translations;return Object(l.jsxs)("table",{className:"table table-condensed table-striped ",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{className:"border-0",children:s.product_title}),Object(l.jsx)("th",{className:"border-0 text-center",children:s.quantity}),Object(l.jsx)("th",{className:"border-0 text-center",children:s.price}),Object(l.jsx)("th",{className:"border-0 text-center",children:s.action})]})}),Object(l.jsxs)("tbody",{id:"cart_body",children:[a.map((function(e,a){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{className:"px-1 border-0",children:Object(l.jsx)("a",{href:"#",onClick:function(){t.props.handleShow(e)},children:null===e||void 0===e?void 0:e.title})}),Object(l.jsx)("td",{className:"px-1 border-0",children:Object(l.jsxs)("div",{className:"center",style:{position:"relative"},children:[Object(l.jsxs)("span",{onClick:function(){return t.increaseQuantity(e)},children:[" ",Object(l.jsx)("i",{className:"fa fa-plus"})," "]}),Object(l.jsx)("input",{type:"text",className:"form-control",style:{width:"50px",margin:"0px 5px"},value:null===e||void 0===e?void 0:e.quantity,readOnly:!0}),Object(l.jsxs)("span",{onClick:function(){return t.decreaseQuantity(e)},children:[" ",Object(l.jsx)("i",{className:"fa fa-minus"})]})]})}),Object(l.jsxs)("td",{className:"px-1 border-0 text-center",children:[r.a.displayPrice(null===e||void 0===e?void 0:e.price),n]}),Object(l.jsx)("td",{className:"px-1 border-0 center",children:Object(l.jsx)("button",{onClick:function(){return t.onProductRemove(e)},className:"btn btn-danger ",children:Object(l.jsx)("i",{className:"fa fa-times",disabled:!0})})})]},a)})),Object(l.jsxs)("tr",{className:"table-active",children:[Object(l.jsx)("td",{className:"px-1 border-0 text-end",colSpan:"3",children:Object(l.jsxs)("strong",{children:[s.total,": ",this.props.total]})}),Object(l.jsx)("td",{className:"px-1 border-0 "})]})]})]})}}]),a}(c.Component);e.a=h},63:function(t,e,a){},65:function(t,e,a){},85:function(t,e,a){},86:function(t,e,a){"use strict";a.r(e);var n=a(1),s=a.n(n),o=a(16),i=a.n(o),c=(a(63),a(4)),r=a(5),l=a(7),h=a(6),d=(a(64),a(65),a(3)),u=a.n(d),_=a(8),p=function(){document.location.origin.includes(":300")?this.origin="http://localhost:3000":this.origin=document.location.origin,this.serverUrl=this.origin+"/api/v1",this.baseUrl=this.serverUrl};p.prototype.origin="ASdas",p.prototype.get=Object(_.a)(u.a.mark((function t(){var e,a,n,s=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:"",t.next=3,fetch("".concat(this.baseUrl,"/").concat(e));case 3:return a=t.sent,t.next=6,a.json();case 6:if(n=t.sent){t.next=11;break}return t.abrupt("return",null);case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}}),t,this)}))),p.prototype.post=Object(_.a)(u.a.mark((function t(){var e,a,n,s=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:"",a=s.length>1&&void 0!==s[1]?s[1]:{},t.next=4,fetch("".concat(this.baseUrl,"/").concat(e),{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return n=t.sent,t.next=7,n.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)}))),p.prototype.postFile=Object(_.a)(u.a.mark((function t(){var e,a,n,s=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.length>0&&void 0!==s[0]?s[0]:"",a=s.length>1&&void 0!==s[1]?s[1]:{},t.next=4,fetch("".concat(this.baseUrl,"/").concat(e),{method:"POST",cache:"no-cache",body:a});case 4:return n=t.sent,t.next=7,n.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));var m=p,b=function(){function t(){Object(c.a)(this,t),document.location.origin.includes(":300")?this.origin="http://localhost:3000":this.origin=document.location.origin,this.serverUrl=this.origin+"/api/v1",this.locale="en",this.serviceChannel=null,this.chat_settings={},this.url_obj={serverUrl:this.serverUrl,serverProtocol:this.serverProtocol},this.api=new m(this.url_obj)}return Object(r.a)(t,[{key:"setServiceChannel",value:function(t){this.serviceChannel=t}},{key:"setSettings",value:function(){var t=Object(_.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.get("chat/".concat(this.serviceChannel,"/get_chat_settings"));case 2:e=t.sent,this.chat_settings=e.settings,this.chat_settings.chat_inquiry_fields=e.chat_inquiry_fields,this.chat_settings.chat_initial_buttons=e.chat_initial_buttons,this.chatBotEnabled=this.chat_settings.enable_chatbot,this.chatWithHuman=!this.chat_settings.enable_chatbot,this.initialMsg=this.chat_settings.initial_msg,this.color=this.chat_settings.color,this.text_color=this.chat_settings.text_color,this.agents_online=e.agents_online,this.is_ad_finland=e.is_ad_finland_company,this.shipment_methods=e.shipment_methods,this.currency=e.currency||"\u20ac",this.checkout_methods=[],this.chat_settings.checkout_paytrail&&this.checkout_methods.push("checkout_paytrail"),this.chat_settings.checkout_ticket&&this.checkout_methods.push("checkout_ticket");case 18:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setTranslations",value:function(){var t=Object(_.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.get("chat/get_translations");case 2:this.translations=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),g=b,j=a(0),f=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).toggle_dropdown=function(t){n.setState({expanded:!n.state.expanded})},n.mouseover=function(t){t.target.style.color=n.props.styleObj.color,t.target.style.backgroundColor=n.props.styleObj.backgroundColor},n.mouseout=function(t){t.target.style.color=n.props.styleObj.backgroundColor,t.target.style.backgroundColor=n.props.styleObj.color},n.end=function(){n.props.quit(),n.setState({showEndChat:!1})},n.sendchatHistory=function(){n.toggle_dropdown(),n.props.sendChatHistory(),n.setState({showSendEmail:!1,showStart:!0})},n.startChat=Object(_.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.setState({showStart:!1}),t.next=3,n.props.quit();case 3:return t.next=5,n.props.startChat();case 5:case"end":return t.stop()}}),t)}))),n.downloadChat=function(){n.props.downloadChatHistory()},n.state={expanded:!1,showSendEmail:!0,showStart:!1,showEndChat:!0},n}return Object(r.a)(a,[{key:"render",value:function(){var t=this.props.translations;return Object(j.jsxs)("div",{className:"dropdown chat-setting d--inline-block",id:"chat-setting-dropdown",children:[Object(j.jsx)("button",{style:{color:this.props.styleObj.color},className:"dropdown-toggle",onClick:this.toggle_dropdown,children:Object(j.jsx)("i",{className:"fa fa-cog"})}),Object(j.jsxs)("ul",{className:"chatsetting-dropdown-menu",hidden:!this.state.expanded,id:"chat-setting-dropdown-menu",children:[Object(j.jsx)("li",{children:Object(j.jsx)("a",{id:"download_chat_history",style:{color:this.props.styleObj.backgroundColor,backgroundColor:this.props.styleObj.color},onClick:this.downloadChat,onMouseOver:this.mouseover,onMouseOut:this.mouseout,children:t.user_dashboard.download_txt_file})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{id:"send_chat_history",style:{display:this.state.showSendEmail?"block":"none",color:this.props.styleObj.backgroundColor,backgroundColor:this.props.styleObj.color},onClick:this.sendchatHistory,onMouseOver:this.mouseover,onMouseOut:this.mouseout,children:t.user_dashboard.send_to_email})}),Object(j.jsxs)("li",{children:[Object(j.jsx)("a",{id:"contakti-msg-close-chat",onClick:this.end,style:{display:this.state.showEndChat?"block":"none",color:this.props.styleObj.backgroundColor,backgroundColor:this.props.styleObj.color},onMouseOver:this.mouseover,onMouseOut:this.mouseout,children:t.user_dashboard.end_chat}),Object(j.jsx)("a",{id:"contakti-msg-start-chat",style:{display:this.state.showStart?"block":"none",color:this.props.styleObj.backgroundColor,backgroundColor:this.props.styleObj.color},onClick:this.startChat,onMouseOver:this.mouseover,onMouseOut:this.mouseout,children:t.user_dashboard.start_new_chat})]})]})]})}}]),a}(n.Component),C=(a(15),a(2)),O=function(){};O.prototype.asJSON=function(){return JSON.stringify(this)};var x=function(t){this.from=t.username,this.channel=t.channel,this.type="message"};x.prototype.initialise=function(){},x.prototype.newMessage=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,s=new O;return s.from=n||this.from,s.channel_id=this.channel,s.type=e||this.type,s.chatbot=a,s.message=t,s},x.prototype.quitMessage=function(){var t=new O;return t.from=this.from,t.channel_id=this.channel,t.type="quit",t.message="Quitting.",t},x.prototype.botToHumanSwitchMessage=function(){var t=new O;return t.from=this.from,t.channel_id=this.channel,t.type="botToHuman",t.message="Requesting human..",t},x.prototype.fileMessage=function(t,e){var a=new O;return a.from=this.from,a.channel_id=this.channel,a.type="file",a.message=t,a.file_path=e,a};var k=x,v=a(28),y=a.n(v),w=a(13),E=a(54),S=function(t){return Object(E.a)(t.text)},M=a(89),P=a(90),D=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).handleSelect=function(t,e){n.setState({index:t})},n.state={index:0},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=this.props.activeIndex;this.setState({index:t})}},{key:"render",value:function(){var t=this;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(P.a,{activeIndex:this.state.index,onSelect:this.handleSelect,children:this.props.images.map((function(e,a){return Object(j.jsx)(P.a.Item,{children:Object(j.jsx)("img",{className:"d-block w-100",src:"".concat(t.props.origin).concat(e.file.url),alt:e.file_name})})}))})})}}]),a}(n.Component),I=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).handleClose=function(){n.props.handleClose()},n.state={},n}return Object(r.a)(a,[{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(M.a,{show:this.props.showModal,onHide:this.handleClose,children:Object(j.jsx)(M.a.Body,{children:Object(j.jsx)(D,{images:this.props.images,origin:this.props.origin,activeIndex:this.props.activeIndex})})})})}}]),a}(n.Component),T=(n.Component,n.Component,a(14)),N=a.n(T),B=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).onStartClientResponse=function(t){!n.state.agentPresent&&n.state.contaktiChat.chatWithHuman&&n.setSendDisabled(),t.callback=n.onMessageReceived,t.connect=!0,n.setState({chatChannel:t.channel}),n.setState({fayeServer:t.server}),window.Danthes.sign(t),setTimeout((function(){var t=n.state.contaktiChat.serverUrl+"/chat/set_client_info?channel_id=".concat(n.state.chatChannel);fetch(t,{"Content-Type":"application/json"})}),2e3)},n.displayNoAgentOnlineScreen=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4,e=n.state.contaktiChat;0==e.agents_online&&1==e.chatWithHuman?n.props.showNoAgentOnlineScreen():n.setState({connectTimeout:setTimeout((function(){n.scrollDown(),n.setState({showNoAgentOnline:!0})}),t)})},n.successCallback=function(t){var e=n.state.contaktiChat;0==t.agent_online?n.displayNoAgentOnlineScreen(0):(e.chatWithHuman=!0,e.chatBotEnabled=!1,n.setState({contaktiChat:e},(function(){n.setSendDisabled(),n.displayNoAgentOnlineScreen()})))},n.onMessageReceived=function(t){if("indicator"!==t.type){var e=document.getElementById("contakti-msg-indicator");if(n.setState({messageCame:!0}),"agent_indicator"===t.type){e=document.getElementById("contakti-msg-indicator"),localStorage.getItem("indicator_state")||(localStorage.setItem("indicator_state","true"),e.innerHTML=t.from+n.state.contaktiChat.translations.user_dashboard.typing_text+'<div id="wave"> <span class="dot"></span> <span class="dot"></span> <span class="dot"></span> </div>',n.setState({connectTimeout:setTimeout((function(){document.getElementById("contakti-msg-indicator").innerHTML="",localStorage.removeItem("indicator_state")}),5e3)}))}else{"quit"===t.type?(n.setState({agentsCount:n.state.agentsCount-1}),t.message="".concat(t.from," ").concat(n.state.contaktiChat.translations.user_dashboard.quit_chat),n.state.agentsCount<1&&(n.setState({agentPresent:!1}),n.setSendDisabled())):"join"===t.type?(n.setState({agentsCount:n.state.agentsCount+1}),n.state.agentPresent?t.message="".concat(t.from," ").concat(n.state.contaktiChat.translations.user_dashboard.join_chat):t.message="".concat(t.from," ").concat(n.state.contaktiChat.chat_settings.welcome_message),n.setState({agentPresent:!0,agentName:t.from}),clearTimeout(n.state.connectTimeout),n.setSendDisabled()):"switch_to_human"===t.type&&(t.message="".concat(n.state.contaktiChat.translations.user_dashboard.ask_human_to_help),t.from!==n.username&&(e.innerText=""),n.changeFromBotToHumanChat(n.successCallback));var a=n.state,s=a.messages,o=a.chat_transcript;t&&s.push(t),o=n.getChatTranscript(),n.setState({messages:s,chat_transcript:o}),t.has_custom_action&&t.custom_action_text&&n.setState({showCustomActionButtion:!0,customActionButtionText:t.custom_action_text}),t.from!==n.state.username&&(e.innerText="")}n.scrollDown()}},n.changeFromBotToHumanChat=function(){var t=Object(_.a)(u.a.mark((function t(e){var a,s,o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],a="inquiry"===n.state.contaktiChat.chat_settings.format?n.state.contaktiChat.chat_settings.chat_inquiry_fields.map((function(t){return{label:t.title,value:n.state[N.a.camelCase(t.title)]}})):[{label:"Name",value:n.state.username}],s={chatbot:!1,channel_id:n.state.chatChannel,name:n.state.username,email:n.state.email,phone:n.state.phone,chat_display_fields:a,is_ad_finland_company:n.state.contaktiChat.is_ad_finland},o="/chat/".concat(n.state.contaktiChat.serviceChannel,"/bot_initiate_human_chat"),t.next=6,(new m).post(o,s);case 6:i=t.sent,e(i);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.sendCustomActionMessage=function(t){n.sendMessage(t.target.innerText)},n.sendMessage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(0===t.length&&(t=n.state.newMessage),t.length>0){var e=n.state.messageFactory.newMessage(t,null,n.state.contaktiChat.chatBotEnabled),a=n._channelUrl();(new m).post(a,e),n.setState({newMessage:""})}},n._channelUrl=function(){return n.state.chatChannel+"/send_msg"},n.scrollDown=function(){n.messagesListContainer&&n.messagesListContainer.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},n.sendQuitNotify=function(){if(!n.state.quitSent){n.setState({quitSent:!0});var t=n.state.messageFactory.quitMessage(),e=n._channelUrl();(new m).post(e,t);return null}},n.quitChat=Object(_.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.state.agentPresent){t.next=4;break}n.sendQuitNotify(),t.next=8;break;case 4:if(!n.state.chatChannel){t.next=8;break}return e="/chat/".concat(n.state.contaktiChat.serviceChannel,"/abort_chat?channel_id=").concat(encodeURIComponent(n.state.chatChannel)),t.next=8,(new m).get(e);case 8:case"end":return t.stop()}}),t)}))),n._channelIndicatorUrl=function(){return n.state.chatChannel+"/send_indicator"},n.onKeyIndicator=function(){var t=n.state.messageFactory.newMessage("Customer typing"),e=n._channelIndicatorUrl();(new m).post(e,t)},n.onKeyPress=function(t){13!==t.keyCode&&n.onKeyIndicator()},n.onSendClicked=function(t){n.setSendDisabled(),n.sendMessage()},n.startChat=function(){var t=Object(_.a)(u.a.mark((function t(e){var a,s,o,i,c,r,l,h,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e&&e.preventDefault(),a="Anonymous","inquiry"===n.state.contaktiChat.chat_settings.format&&(a=n.state[N.a.camelCase(null===(s=n.state.contaktiChat.chat_settings.chat_inquiry_fields[0])||void 0===s?void 0:s.title)]),n.setState({showDetailInput:!1,showChat:!0,username:n.state.username.length>0?n.state.username:a,messageFactory:new k({username:n.state.username.length>0?n.state.username:a,channel:n.state.chatChannel,email:n.state.email,phone:n.state.phone})}),n.props.toggleDropDown(!0),n.state.contaktiChat.chatWithHuman&&n.displayNoAgentOnlineScreen(),o=[],o="inquiry"===n.state.contaktiChat.chat_settings.format?n.state.contaktiChat.chat_settings.chat_inquiry_fields.map((function(t){return{label:t.title,value:n.state[N.a.camelCase(t.title)]}})):[{label:"Name",value:a}],i={chatbot:n.state.contaktiChat.chatBotEnabled,name:a,email:n.state.email,phone:n.state.phone,chat_display_fields:o,is_ad_finland_company:n.state.contaktiChat.is_ad_finland},c="chat/".concat(n.state.contaktiChat.serviceChannel,"/initiate_chat"),t.next=12,(new m).post(c,i);case 12:r=t.sent,n.state.contaktiChat.initialMsg.length>0&&(l=n.state.messageFactory.newMessage(n.state.contaktiChat.initialMsg,"initial",n.state.contaktiChat.chatBotEnabled,n.state.contaktiChat.chat_settings.bot_alias),n.state.contaktiChat.chatBotEnabled&&n.state.contaktiChat.chat_settings.enable_initial_buttons&&(l.action_buttons=n.state.contaktiChat.chat_settings.chat_initial_buttons.map((function(t){return{text:t.title}}))),h=y.a,l.timestamp=h().local().format(),(d=n.state.messages).push(l),n.setState({messages:d})),n.props.setChatStarted(),n.onStartClientResponse(r);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.setSendDisabled=function(t){var e,a;!n.state.agentPresent&&(null===(e=n.state.contaktiChat)||void 0===e?void 0:e.chatWithHuman)?(n.setState({disableChatSendDisabled:!0}),!n.state.agentPresent&&(null===(a=n.state.contaktiChat)||void 0===a?void 0:a.chatWithHuman)&&n.setState({disableChatSendDisabled:!0})):n.setState({disableChatSendDisabled:!1})},n.updateUserDetail=function(){},n.handleChange=function(t,e){var a=n.state;a[t.target.name]=t.target.value,n.setState(Object(C.a)({},a))},n.uploadFile=function(){n.fileInput.click()},n.handleFileChange=function(){var t=Object(_.a)(u.a.mark((function t(e){var a,s,o,i,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.target.files[0],(s=new FormData).append("upload",a,a.name),t.next=5,(new m).postFile("chat/uploadfile",s);case 5:o=t.sent,n.state.uploadedFileUrls.push(o.file_url),i=n.state.messageFactory.fileMessage(o.file_url,o.file_path),c=n._channelUrl(),(new m).post(c,i);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.showSendChatHistory=function(){n.setState({showSendChatHistoryFlag:!0})},n.getChatTranscript=function(){var t="";return n.state.messages.forEach((function(e){var a=w.a;if(e&&e.message&&(t+=a.convertHtmlToText(null===e||void 0===e?void 0:e.message),t+="\n"),e&&e.files&&e.files.forEach((function(e){t+=e.url,t+="\n"})),e&&e.action_buttons&&e.action_buttons.forEach((function(e){t+=e.text,e.hyper_link&&e.hyper_link.length>0&&(t+="( ".concat(e.hyper_link," )")),t+="\n"})),e&&"quit"!==e.type){var n=y.a;t+=n(e.timestamp?e.timestamp:[]).local().format("D.M.YYYY HH.mm"),t+="\n",t+=e.from,t+="\n"}t+="\n"})),t},n.downloadChat=function(){n.fileDownload.click()},n.createTicket=Object(_.a)(u.a.mark((function t(){var e,a,s,o,i,c,r,l,h,d=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=d.length>0&&void 0!==d[0]&&d[0],a=d.length>1&&void 0!==d[1]?d[1]:[],s=d.length>2&&void 0!==d[2]?d[2]:"",o=d.length>3&&void 0!==d[3]?d[3]:"",(i={}).channel_id=n.state.chatChannel,i.media_channel_id=n.state.contaktiChat.serviceChannel,i.messages_attributes=[],i.messages_attributes[0]={},i.messages_attributes[0].title=o,i.messages_attributes[0].channel_type="chat",n.state.customActionButtionText.length>0&&0===o.length&&(i.messages_attributes[0].title=n.state.customActionButtionText),i.messages_attributes[0].to="Internal",i.messages_attributes[0].from=n.state.username,i.user_uploaded_file_urls=n.state.uploadedFileUrls,n.state.email.length>0&&(i.messages_attributes[0].from=n.state.email),c="","inquiry"===n.state.contaktiChat.chat_settings.format?n.state.contaktiChat.chat_settings.chat_inquiry_fields.forEach((function(t){c+="".concat(t.title," : ").concat(n.state[N.a.camelCase(t.title)],"\n")})):c+="".concat(n.state.contaktiChat.translations.service_channels.name," : ").concat(n.state.username,"\n"),c+="\n",n.state.newMessage.length>0&&(r=n.state.messageFactory.newMessage(n.state.newMessage),n.state.messages.push(r)),c+=n.getChatTranscript(),!0===e&&(c+="".concat(n.state.contaktiChat.translations.user_dashboard.shopping_cart.order_details,": \n"),a.forEach((function(t){c+="".concat(t.title,"&nbsp&nbsp&nbsp&nbsp&nbsp").concat(t.quantity,"-").concat(n.state.contaktiChat.translations.user_dashboard.shopping_cart.items,"&nbsp&nbsp&nbsp&nbsp&nbsp").concat(w.a.displayPrice(t.price)).concat(n.state.contaktiChat.currency,"\n")})),c+="\n".concat(n.state.contaktiChat.translations.user_dashboard.shopping_cart.total,": ").concat(w.a.displayPrice(s)).concat(n.state.contaktiChat.currency,"\n")),i.messages_attributes[0].description=c,i.type="chat",l="tasks/create_task_from_chat",n.props.setPluginDisabledState(!0),t.next=28,(new m).post(l,i);case 28:return h=t.sent,n.setState({showCustomActionButtion:!1,customActionButtionText:""}),e||(n.props.setPluginDisabledState(!1),n.props.quit()),n.quitChat(),t.abrupt("return",h.id);case 33:case"end":return t.stop()}}),t)}))),n.createOrder=Object(_.a)(u.a.mark((function t(){var e,a,s,o,i,c,r=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:null,a=r.length>1&&void 0!==r[1]?r[1]:[],s=r.length>2&&void 0!==r[2]?r[2]:"",o=r.length>3&&void 0!==r[3]?r[3]:{},i=r.length>4&&void 0!==r[4]?r[4]:"",(c={}).checkout_method=s,c.shipment_method_id=o.id,c.task_id=e,c.currency=n.state.contaktiChat.currency,c.total=i,c.order_products_attributes=[],c.inquiry_fields_data=[],c.service_channel_id=n.state.contaktiChat.serviceChannel,"inquiry"===n.state.contaktiChat.chat_settings.format&&(c.inquiry_fields_data=n.state.contaktiChat.chat_settings.chat_inquiry_fields.map((function(t){return{label:t.title,value:n.state[N.a.camelCase(t.title)]}}))),a.forEach(function(){var t=Object(_.a)(u.a.mark((function t(e){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={chatbot_product_id:e.id,quantity:e.quantity,currency:n.state.contaktiChat.currency,price:e.price},c.order_products_attributes.push(a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=18,(new m).post("orders",c);case 18:n.setState({orderCheckoutMethod:s});case 19:case"end":return t.stop()}}),t)}))),n.setOrderCreated=function(){n.setState({orderCreated:!0})},n.state={chatChannel:null,fayeServer:null,messageContainer:document.getElementById("chat_area"),username:"",email:"",phone:"",messageFactory:new k({username:n.username,channel:n.chatChannel,email:n.email,phone:n.phone}),quitSent:!1,messageCame:!1,agentPresent:!1,agentsCount:0,connectTimeout:0,started:!1,messages:[],messagEnvelopes:[],contaktiChat:{},showDetailInput:!0,showChat:!1,newMessage:"",disableChatSendDisabled:!1,disableMessageInput:!1,showNoAgentOnline:!1,agentName:"",showSendChatHistoryFlag:!1,chat_transcript:"",showCustomActionButtion:!1,customActionButtionText:"",uploadedFileUrls:[],orderCreated:!1,orderCheckoutMethod:""},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=this;if(this.props.contaktiChat&&(!this.props.contaktiChat||0!==Object.keys(this.props.contaktiChat).length)){var e=this.props.contaktiChat;this.setState({messageContainer:document.getElementById("chat_area")}),this.setState({contaktiChat:e},Object(_.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("inquiry"===t.state.contaktiChat.chat_settings.format&&0!==t.state.contaktiChat.chat_settings.chat_inquiry_fields.length){e.next=3;break}return e.next=3,t.startChat();case 3:case"end":return e.stop()}}),e)})))),this.setSendDisabled()}}},{key:"setUsername",value:function(t){t||(t="Anonymous"),this.setState({username:t});var e=this.state.messageFactory;e.from=t,this.setState({messageFactory:e})}},{key:"maximize",value:function(){document.getElementById("contakti-msg-box").style.bottom="0px",document.getElementById("chat-setting-dropdown")&&document.getElementsByClassName("show-dropdown").length>0&&(document.getElementById("chat-setting-dropdown").style.display="block"),document.getElementById("contakti-msg-minimize").classList.remove("hide"),document.getElementById("contakti-chat-send-btn").onclick=this._onSendClicked.bind(this),this.setState({messageContainer:document.getElementById("contakti-msg-body")}),this.setState({minimized:!1})}},{key:"render",value:function(){var t,e=this;if(!this.state.contaktiChat)return null;var a=this.state,n=a.contaktiChat,s=(a.disableChatSendDisabled,this.state.messages,[]);return"inquiry"===(null===(t=n.chat_settings)||void 0===t?void 0:t.format)&&n.chat_settings.chat_inquiry_fields.forEach((function(t,a){a>0&&s.push(e.state[N.a.camelCase(t.title)])})),Object(j.jsxs)("div",{id:"contakti-msg-container",className:"msg_wrap h-100",children:[(this.state.orderCreated,Object(j.jsxs)("div",{className:"text-center h-100 d-flex flex-column mx-2 pt-5",style:{fontSize:"110%"},children:[Object(j.jsx)("div",{style:{textAlign:"justify",textAlignLast:"center",margin:"1rem 0"},children:Object(j.jsx)(S,{text:this.props.contaktiChat.translations.user_dashboard.shopping_cart.thanks_for_order})}),"checkout_paytrail"==this.state.orderCheckoutMethod&&Object(j.jsx)("div",{style:{textAlign:"justify",textAlignLast:"center"},children:Object(j.jsx)(S,{text:this.props.contaktiChat.translations.user_dashboard.shopping_cart.note_for_order_payment})})]})),Object(j.jsx)("a",{ref:function(t){e.fileDownload=t},style:{display:"none"},href:"data:text/plain;charset=utf-8,".concat(encodeURIComponent(this.state.chat_transcript)),download:"chat_history.txt"})]})}}]),a}(n.Component),U=B,A=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).createCallBack=function(){var t=n.state.phone,e=n.state.date,a=n.state.time,s="";e.length>0&&(s=new Date("".concat(e)),a.length>0&&(s=new Date("".concat(e,"T").concat(a))));var o=n.state.email,i=n.state.message,c="/chat/"+n.props.contaktiChat.serviceChannel+"/create_callback";(new m).post(c,{number:t,datetime:s,email:o,message:i}),document.getElementById("contakti-user-name").innerHTML=n.props.contaktiChat.translations.user_dashboard.thanks_chat,n.setState({callBackSent:!0})},n.handleChange=function(t,e){var a=n.state;a[t.target.name]=t.target.value,n.setState(Object(C.a)({},a))},n.state={phone:"",date:"",time:"",email:"",message:"",callBackSent:!1},n}return Object(r.a)(a,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"call_back_box h-100",children:this.state.callBackSent?Object(j.jsxs)("div",{style:{textAlign:"center",fontSize:"110%",paddingTop:"3em"},children:[" ",Object(j.jsx)(S,{text:this.props.contaktiChat.translations.user_dashboard.sentmessage_chat})," "]}):Object(j.jsxs)("form",{id:"contakti-user-details",onSubmit:this.createCallBack,className:"h-100 flex-column justify-content-between d-flex",children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-12 pb-2",children:Object(j.jsx)("label",{children:this.props.contaktiChat.translations.user_dashboard.callback_chat})}),Object(j.jsxs)("div",{className:"col-12 pb-2",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"small-label pb-2",children:this.props.contaktiChat.translations.user_dashboard.cbnumber_chat}),Object(j.jsx)("input",{type:"text",onChange:this.handleChange,placeholder:this.props.contaktiChat.translations.user_dashboard.cbnumber_chat,name:"phone",className:"form-control callback-control",value:this.state.phone,id:"messagebox-callback-number",required:!0})]}),Object(j.jsx)("div",{style:{clear:"both"}})]}),Object(j.jsxs)("div",{className:"col-12",children:[Object(j.jsx)("div",{className:"small-label pb-2",children:this.props.contaktiChat.translations.user_dashboard.time_chat}),Object(j.jsx)("div",{style:{clear:"both"}}),Object(j.jsx)("div",{style:{width:"50%",float:"left",boxSizing:"border-box",paddingRight:"20px"},children:Object(j.jsx)("input",{type:"date",id:"messagebox-date-field",name:"date",value:this.state.date,onChange:this.handleChange})}),Object(j.jsx)("div",{style:{width:"50%",float:"left",boxSizing:"border-box",paddingRight:"20px"},children:Object(j.jsx)("input",{type:"time",id:"messagebox-time-field",name:"time",value:this.state.time,onChange:this.handleChange})}),Object(j.jsx)("div",{style:{clear:"both"}})]}),Object(j.jsxs)("div",{className:"col-12 pb-2",children:[Object(j.jsx)("label",{children:this.props.contaktiChat.translations.user_dashboard.message_chat}),Object(j.jsx)("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange,placeholder:this.props.contaktiChat.translations.user_dashboard.messageemail_chat,className:"form-control callback-control",id:"messagebox-email",required:!0}),Object(j.jsx)("br",{}),Object(j.jsx)("textarea",{name:"message",value:this.state.message,onChange:this.handleChange,placeholder:this.props.contaktiChat.translations.user_dashboard.messagemsg_chat,className:"form-control",rows:"8",id:"messagebox-message"})]})]}),Object(j.jsxs)("div",{className:"footer-sec",children:[Object(j.jsx)("div",{className:"send-button-container pull-left",children:Object(j.jsx)("button",{type:"submit",id:"messagebox-send",className:"send ".concat(this.state.phone.length>0&&this.state.email.length>0?"":"disabled"),style:{backgroundColor:this.props.contaktiChat.color},children:Object(j.jsx)("span",{className:"fa fa-send"})})}),Object(j.jsxs)("div",{className:"pull-right",children:["Powered by ",Object(j.jsx)("a",{href:"http://contakti.com",target:"_blank",rel:"noreferrer",style:{position:"relative"},children:"contakti.com"}),Object(j.jsx)("div",{className:"send-button-container pull-left"})]})]})]})})}}]),a}(n.Component),R=a(58),q=a.n(R),L=a(56),W=a(88),K=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).handleClose=function(){n.props.handleClose()},n.state={show:!1},n}return Object(r.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.product,n=e.currency;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(M.a,{show:this.props.show,onHide:this.handleClose,children:[Object(j.jsx)(M.a.Header,{closeButton:!0,children:Object(j.jsx)(M.a.Title,{children:this.props.title})}),Object(j.jsxs)(M.a.Body,{children:[Object(j.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[Object(j.jsx)("span",{className:"float-start",children:a.title}),Object(j.jsxs)("span",{className:"float-end",children:[w.a.displayPrice(a.price),n]})]}),Object(j.jsx)("hr",{}),a.images&&a.images.length>0&&Object(j.jsxs)("div",{children:[Object(j.jsx)(D,{images:a.images,origin:this.props.origin}),Object(j.jsx)("hr",{})]}),Object(j.jsxs)("div",{className:"overflow-auto mt-1 px-2",children:[Object(j.jsx)("div",{children:a.description}),a.attachments&&a.attachments.length>0&&Object(j.jsx)("div",{children:a.attachments.map((function(e,a){return Object(j.jsx)("span",{className:"mx-1",children:Object(j.jsx)("a",{className:"text-decoration-none",href:"".concat(t.props.origin).concat(e.file.url),download:!0,children:e.file_name})})}))})]})]}),Object(j.jsx)(M.a.Footer,{children:Object(j.jsx)(W.a,{variant:"secondary",style:{background:this.props.buttonColor},size:"sm",onClick:this.handleClose,children:this.props.btnText})})]})})}}]),a}(n.Component),H=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).handleProductModalClose=function(){n.setState({showProductModal:!1})},n.handleProductModalShow=function(t){n.setState({showProductModal:!0,selectedProduct:t})},n.toggleDropDown=function(t){n.setState({showDropDown:t})},n.setChatStarted=function(){n.state.chatStarted||n.setState({chatStarted:!0})},n.showNoAgentOnlineScreen=function(t){n.setState({showNoAgentScreen:!0}),t&&t.preventDefault()},n.showChatPlugin=Object(_.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.state.chatInitialized||n.setState({chatInitialized:!0}),n.state.showPlugin){t.next=8;break}return e=n.state.contaktiChat,t.next=5,e.setSettings();case 5:n.setState({showPlugin:!0,showMinimize:!0,contaktiChat:e}),n.state.chatStarted&&n.setState({showDropDown:!0}),n.state.cartEmpty||n.setState({showCartIcon:!0});case 8:case"end":return t.stop()}}),t)}))),n.hideChatPlugin=function(t){t.stopPropagation(),n.state.showPlugin&&n.setState({showPlugin:!1,showMinimize:!1,showDropDown:!1,showCart:!1,showCartIcon:!1})},n.destroyChat=function(){n.setState({chatInitialized:!1,showPlugin:!1,showMinimize:!1,showDropDown:!1,showCartIcon:!1,cartEmpty:!0})},n.onResize=function(t,e){window.parent.postMessage({type:"set_dimensions",width:t,height:e},"*")},n.toggleCart=function(){n.setState({showCart:!n.state.showCart})},n.addToCart=function(t){n.setState({showCartIcon:!0,cartEmpty:!1},(function(){return n.cart.addProduct(t)}))},n.hideCartIcon=function(){n.setState({showCartIcon:!1,showCart:!1,cartEmpty:!0})},n.setPluginDisabledState=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.setState({disableChatboxContent:t})},n.createCartTicket=function(){var t=Object(_.a)(u.a.mark((function t(e,a,s,o){var i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.setPluginDisabledState(!0),t.next=3,n.chatBox.createTicket(!0,e,o,n.state.contaktiChat.translations.user_dashboard.shopping_cart.order_products);case 3:return i=t.sent,t.next=6,n.chatBox.createOrder(i,e,a,s,o);case 6:n.chatBox.setOrderCreated(),n.setState({showCart:!1,showCartIcon:!1}),n.setPluginDisabledState(!1);case 9:case"end":return t.stop()}}),t)})));return function(e,a,n,s){return t.apply(this,arguments)}}(),n.state={style:{},contaktiChat:{},translations:{},loading:!0,showDropDown:!1,showNoAgentScreen:!1,showPlugin:!1,showMinimize:!1,chatStarted:!1,chatInitialized:!1,showCartIcon:!1,showCart:!1,cartEmpty:!0,showProductModal:!1,selectedProduct:{},disableChatboxContent:!1},n}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=Object(_.a)(u.a.mark((function t(){var e,a,n,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new g,a=w.a,n=a.getUrlParams(window.location.href),s=n.id,e.setServiceChannel(s),t.next=7,e.setSettings();case 7:return t.next=9,e.setTranslations();case 9:this.setState({contaktiChat:e,loading:!1,style:{color:e.text_color,backgroundColor:e.color}});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state,a=e.contaktiChat,n=e.loading,s="";return window.parent&&window.outerWidth<=600&&(s+=" max-600-width "),n?null:Object(j.jsx)("div",{id:"contakti-chat-main",className:s,children:Object(j.jsx)(q.a,{handleWidth:!0,handleHeight:!0,onResize:this.onResize,children:Object(j.jsxs)("div",{id:"contakti-msg-box",className:"\n                 chat-plugin-parent\n                 ".concat(!0===this.state.showMinimize?"open":"","\n              "),children:[Object(j.jsx)(K,{title:a.translations.user_dashboard.shopping_cart.product_details,btnText:a.translations.user_dashboard.shopping_cart.close,buttonColor:a.color,product:this.state.selectedProduct,handleShow:this.handleProductModalShow,handleClose:this.handleProductModalClose,show:this.state.showProductModal,origin:a.origin,currency:a.currency}),Object(j.jsx)("div",{className:"cart-parent"+(this.state.disableChatboxContent?" disabled-content":""),style:{display:this.state.showCart?"block":"none"},children:!this.state.cartEmpty&&a.chat_settings.enable_cart?Object(j.jsx)(L.a,{ref:function(e){t.cart=e},handleShow:this.handleProductModalShow,contaktiChat:a,onCartEmpty:this.hideCartIcon,toggleCart:this.toggleCart,handleOrder:this.createCartTicket}):""}),Object(j.jsxs)("div",{className:"chat-parent flex-column d-flex"+(this.state.disableChatboxContent?" disabled-content":""),children:[Object(j.jsxs)("div",{id:"contakti-msg-head",onClick:this.showChatPlugin,className:"msg_head",style:this.state.style,children:[Object(j.jsx)("div",{children:Object(j.jsx)("div",{id:"contakti-logo-container",children:Object(j.jsx)("img",{alt:"logo",src:"".concat(a.origin,"/").concat(a.chat_settings.file.url)})})}),Object(j.jsx)("span",{id:"contakti-user-name",style:{color:a.text_color},children:a.chat_settings.chat_title}),Object(j.jsx)("span",{id:"cart_show_button",onClick:this.toggleCart,style:{display:this.state.showCartIcon?"block":"none",margin:"5px 5px 0 0",color:a.text_color},children:Object(j.jsx)("i",{className:"fa fa-shopping-cart mt-1"})}),Object(j.jsx)("span",{children:this.state.showDropDown?Object(j.jsx)(f,{styleObj:this.state.style,translations:a.translations,showDropdown:this.state.showDropDown,quit:function(){t.chatBox.quitChat(),t.destroyChat()},sendChatHistory:function(){return t.chatBox.showSendChatHistory()},downloadChatHistory:function(){t.chatBox.downloadChat()},startChat:function(){return t.showChatPlugin()}}):""}),Object(j.jsx)("div",{id:"contakti-msg-minimize",children:this.state.showMinimize?Object(j.jsx)("span",{className:"fa-stack",onClick:this.hideChatPlugin,style:{color:a.text_color},children:Object(j.jsx)("i",{className:"fa fa-stack-2x fa-angle-down",style:{top:"3px",left:"0px"}})}):""})]}),this.state.chatInitialized?Object(j.jsx)("div",{style:{display:this.state.showPlugin?"block":"none"},children:this.state.showNoAgentScreen?Object(j.jsx)(A,{contaktiChat:a,showNoAgentOnlineScreen:this.showNoAgentOnlineScreen}):Object(j.jsx)(U,{ref:function(e){t.chatBox=e},contaktiChat:a,handleProductShow:this.handleProductModalShow,toggleDropDown:this.toggleDropDown,showNoAgentOnlineScreen:this.showNoAgentOnlineScreen,quit:function(){t.destroyChat()},setChatStarted:this.setChatStarted,startChat:function(){return t.showChatPlugin()},addToCart:function(e){t.addToCart(e)},setPluginDisabledState:this.setPluginDisabledState})}):""]})]})})})}}]),a}(n.Component),F=H,z=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var n;return Object(c.a)(this,a),(n=e.call(this,t)).state={},n}return Object(r.a)(a,[{key:"render",value:function(){return Object(j.jsx)(F,{})}}]),a}(n.Component),Q=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,91)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,o=e.getLCP,i=e.getTTFB;a(t),n(t),s(t),o(t),i(t)}))};a(85);i.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(z,{})}),document.getElementById("root")),Q()}},[[86,1,2]]]);
//# sourceMappingURL=main.c5add5c9.chunk.js.map