(this["webpackJsonpcontakti-chat"]=this["webpackJsonpcontakti-chat"]||[]).push([[0],{60:function(t,e,a){},62:function(t,e,a){},79:function(t,e,a){},83:function(t,e,a){},84:function(t,e,a){"use strict";a.r(e);var s=a(1),n=a.n(s),o=a(15),c=a.n(o),i=(a(60),a(4)),r=a(5),l=a(7),h=a(6),d=(a(61),a(62),a(3)),u=a.n(d),p=a(8),m=function(){document.location.origin.includes(":300")?this.origin="http://localhost:3000":this.origin=document.location.origin,this.serverUrl=this.origin+"/api/v1",this.baseUrl=this.serverUrl};m.prototype.origin="ASdas",m.prototype.get=Object(p.a)(u.a.mark((function t(){var e,a,s,n=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:"",t.next=3,fetch("".concat(this.baseUrl,"/").concat(e));case 3:return a=t.sent,t.next=6,a.json();case 6:if(s=t.sent){t.next=11;break}return t.abrupt("return",null);case 11:return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t,this)}))),m.prototype.post=Object(p.a)(u.a.mark((function t(){var e,a,s,n=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:"",a=n.length>1&&void 0!==n[1]?n[1]:{},t.next=4,fetch("".concat(this.baseUrl,"/").concat(e),{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:return s=t.sent,t.next=7,s.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)}))),m.prototype.postFile=Object(p.a)(u.a.mark((function t(){var e,a,s,n=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:"",a=n.length>1&&void 0!==n[1]?n[1]:{},t.next=4,fetch("".concat(this.baseUrl,"/").concat(e),{method:"POST",cache:"no-cache",body:a});case 4:return s=t.sent,t.next=7,s.json();case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t,this)})));var b=m,j=function(){function t(){Object(i.a)(this,t),document.location.origin.includes(":300")?this.origin="http://localhost:3000":this.origin=document.location.origin,this.serverUrl=this.origin+"/api/v1",this.locale="en",this.serviceChannel=null,this.chat_settings={},this.url_obj={serverUrl:this.serverUrl,serverProtocol:this.serverProtocol},this.api=new b(this.url_obj)}return Object(r.a)(t,[{key:"setServiceChannel",value:function(t){this.serviceChannel=t}},{key:"setSettings",value:function(){var t=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.get("chat/".concat(this.serviceChannel,"/get_chat_settings"));case 2:e=t.sent,this.chat_settings=e.settings,this.chat_settings.chat_inquiry_fields=e.chat_inquiry_fields,this.chat_settings.chat_initial_buttons=e.chat_initial_buttons,this.chatBotEnabled=this.chat_settings.enable_chatbot,this.chatWithHuman=!this.chat_settings.enable_chatbot,this.initialMsg=this.chat_settings.initial_msg,this.color=this.chat_settings.color,this.text_color=this.chat_settings.text_color,this.agents_online=e.agents_online,this.is_ad_finland=e.is_ad_finland_company,this.shipment_methods=e.shipment_methods,this.currency=e.currency||"\u20ac",this.orderTermsAndConditions=e.order_terms_and_conditions,this.checkout_methods=[],this.chat_settings.checkout_paytrail&&this.checkout_methods.push("checkout_paytrail"),this.chat_settings.checkout_ticket&&this.checkout_methods.push("checkout_ticket");case 19:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setTranslations",value:function(){var t=Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.get("chat/get_translations");case 2:this.translations=t.sent;case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),g=j,f=a(0),x=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).toggle_dropdown=function(t){s.setState({expanded:!s.state.expanded})},s.mouseover=function(t){t.target.style.color=s.props.styleObj.color,t.target.style.backgroundColor=s.props.styleObj.backgroundColor},s.mouseout=function(t){t.target.style.color=s.props.styleObj.backgroundColor,t.target.style.backgroundColor=s.props.styleObj.color},s.end=function(){s.props.quit(),s.setState({showEndChat:!1})},s.sendchatHistory=function(){s.toggle_dropdown(),s.props.sendChatHistory(),s.setState({showSendEmail:!1,showStart:!0})},s.startChat=Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.setState({showStart:!1}),t.next=3,s.props.quit();case 3:return t.next=5,s.props.startChat();case 5:case"end":return t.stop()}}),t)}))),s.downloadChat=function(){s.props.downloadChatHistory()},s.state={expanded:!1,showSendEmail:!0,showStart:!1,showEndChat:!0},s}return Object(r.a)(a,[{key:"render",value:function(){var t=this.props.translations;return Object(f.jsxs)("div",{className:"dropdown chat-setting d--inline-block",id:"chat-setting-dropdown",children:[Object(f.jsx)("button",{style:{color:this.props.styleObj.color},className:"dropdown-toggle",onClick:this.toggle_dropdown,children:Object(f.jsx)("i",{className:"fa fa-cog"})}),Object(f.jsxs)("ul",{className:"chatsetting-dropdown-menu",hidden:!this.state.expanded,id:"chat-setting-dropdown-menu",children:[Object(f.jsx)("li",{children:Object(f.jsx)("a",{id:"download_chat_history",style:{color:this.props.styleObj.backgroundColor,backgroundColor:this.props.styleObj.color},onClick:this.downloadChat,onMouseOver:this.mouseover,onMouseOut:this.mouseout,children:t.user_dashboard.download_txt_file})}),Object(f.jsx)("li",{children:Object(f.jsx)("a",{id:"send_chat_history",style:{display:this.state.showSendEmail?"block":"none",color:this.props.styleObj.backgroundColor,backgroundColor:this.props.styleObj.color},onClick:this.sendchatHistory,onMouseOver:this.mouseover,onMouseOut:this.mouseout,children:t.user_dashboard.send_to_email})}),Object(f.jsxs)("li",{children:[Object(f.jsx)("a",{id:"contakti-msg-close-chat",onClick:this.end,style:{display:this.state.showEndChat?"block":"none",color:this.props.styleObj.backgroundColor,backgroundColor:this.props.styleObj.color},onMouseOver:this.mouseover,onMouseOut:this.mouseout,children:t.user_dashboard.end_chat}),Object(f.jsx)("a",{id:"contakti-msg-start-chat",style:{display:this.state.showStart?"block":"none",color:this.props.styleObj.backgroundColor,backgroundColor:this.props.styleObj.color},onClick:this.startChat,onMouseOver:this.mouseover,onMouseOut:this.mouseout,children:t.user_dashboard.start_new_chat})]})]})]})}}]),a}(s.Component),v=a(14),C=a(2),_=function(){};_.prototype.asJSON=function(){return JSON.stringify(this)};var O=function(t){this.from=t.username,this.channel=t.channel,this.type="message"};O.prototype.initialise=function(){},O.prototype.newMessage=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3?arguments[3]:void 0,n=new _;return n.from=s||this.from,n.channel_id=this.channel,n.type=e||this.type,n.chatbot=a,n.message=t,n},O.prototype.quitMessage=function(){var t=new _;return t.from=this.from,t.channel_id=this.channel,t.type="quit",t.message="Quitting.",t},O.prototype.botToHumanSwitchMessage=function(){var t=new _;return t.from=this.from,t.channel_id=this.channel,t.type="botToHuman",t.message="Requesting human..",t},O.prototype.fileMessage=function(t,e){var a=new _;return a.from=this.from,a.channel_id=this.channel,a.type="file",a.message=t,a.file_path=e,a};var y=O,k=a(27),w=a.n(k),S=function(){function t(){Object(i.a)(this,t)}return Object(r.a)(t,null,[{key:"displayPrice",value:function(t){return Number(t).toFixed(2)}}]),t}();S.replaceURLs=function(t){if(!t)return"";return t.replace(/(((https?:\/\/)|(www\.))[^\s]+)/g,(function(t){var e=t;return e.match("^https?://")||(e="http://"+e),'<a href="'+e+'" target="_blank" rel="noopener noreferrer">'+t+"</a>"}))},S.replaceAllNewLines=function(t){return t?t.replace(/\n/g,"<br/>"):""},S.convertHtmlToText=function(t){return t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<style([\s\S]*?)<\/style>/gi,"")).replace(/<script([\s\S]*?)<\/script>/gi,"")).replace(/<\/div>/gi,"\n")).replace(/<\/li>/gi,"\n")).replace(/<li>/gi,"  *  ")).replace(/<\/ul>/gi,"\n")).replace(/<\/p>/gi,"\n")).replace(/<br\s*[\/]?>/gi,"\n")).replace(/<[^>]+>/gi,"")},S.getUrlParams=function(t){var e={};return(t+"?").split("?")[1].split("&").forEach((function(t){(t=(t+"=").split("=").map(decodeURIComponent))[0].length&&(e[t[0]]=t[1])})),e};var N=S,M=a(53),T=function(t){return Object(M.a)(t.text)},P=a(87),D=a(88),I=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).handleSelect=function(t,e){s.setState({index:t})},s.state={index:0},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=this.props.activeIndex;this.setState({index:t})}},{key:"render",value:function(){var t=this;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(D.a,{activeIndex:this.state.index,onSelect:this.handleSelect,children:this.props.images.map((function(e,a){return Object(f.jsx)(D.a.Item,{children:Object(f.jsx)("img",{className:"d-block w-100",src:"".concat(t.props.origin).concat(e.file.url),alt:e.file_name})})}))})})}}]),a}(s.Component),q=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).handleClose=function(){s.props.handleClose()},s.state={},s}return Object(r.a)(a,[{key:"render",value:function(){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(P.a,{show:this.props.showModal,onHide:this.handleClose,children:Object(f.jsx)(P.a.Body,{children:Object(f.jsx)(I,{images:this.props.images,origin:this.props.origin,activeIndex:this.props.activeIndex})})})})}}]),a}(s.Component),A=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).handleMessageImageShow=function(t,e){s.setState({imageIndex:t,showModal:!0,modalImages:e})},s.handleMessageImageClose=function(){s.setState({showModal:!1})},s.state={username:s.props.userName,fromTime:s.props.envelope.from===s.username?"time_b":"time_a",fromColor:s.props.from===s.username?"from_b":"from_a",imageIndex:null,showModal:!1,modalImages:[]},s}return Object(r.a)(a,[{key:"render",value:function(){var t=this,e=this.props.contaktiChat;return Object(f.jsxs)("div",{className:this.props.bgClass,children:[Object(f.jsx)(q,{showModal:this.state.showModal,activeIndex:this.state.imageIndex,images:this.state.modalImages,handleClose:this.handleMessageImageClose,origin:e.origin}),"file"===this.props.envelope.type?Object(f.jsx)("a",{download:!0,target:"_blank",rel:"noreferrer",href:N.replaceAllNewLines(this.props.envelope.message),children:"".concat(this.props.envelope.from," ").concat(e.translations.user_dashboard.upload_chat)}):Object(f.jsx)(T,{text:N.replaceAllNewLines(N.replaceURLs(this.props.envelope.message))}),this.props.envelope.images?Object(f.jsx)("div",{style:{gridTemplateColumns:"auto auto auto auto"},className:"d-grid mt-1",children:this.props.envelope.images.map((function(a,s){return Object(f.jsx)("div",{className:"me-1 mb-1",children:Object(f.jsx)("img",{src:"".concat(e.origin).concat(a.file.url),onClick:function(){t.handleMessageImageShow(s,t.props.envelope.images)},style:{borderColor:e.color},className:"img-thumbnail"})})}))}):"",this.props.envelope.files?this.props.envelope.files.map((function(t){return Object(f.jsx)("div",{children:Object(f.jsx)("a",{download:!0,target:"_blank",rel:"noreferrer",href:t.url,children:t.name})})})):"",this.props.envelope.products?Object(f.jsx)("div",{id:"chat-answer-products-wrapper",className:"mt-1",children:this.props.envelope.products.map((function(a){return Object(f.jsxs)("div",{className:"answer_product",children:[Object(f.jsxs)("div",{className:"child1",children:[Object(f.jsx)("strong",{children:a.title})," "]}),Object(f.jsx)("div",{className:"child2",children:Object(f.jsx)("a",{href:"#",onClick:function(){return t.props.addToCart(a)},className:"add-to-cart-btn","data-product-id":a.id,style:{color:e.text_color,backgroundColor:e.color},children:Object(f.jsx)("i",{className:"fa fa-shopping-cart"})})}),Object(f.jsxs)("span",{onClick:function(){t.props.handleProductShow(a)},children:[" ",Object(f.jsx)("i",{className:"fa fa-info-circle","aria-hidden":"true"})," "]})]},"product-item-".concat(a.id))}))}):"",this.props.envelope.action_buttons?Object(f.jsx)("div",{children:this.props.envelope.action_buttons.map((function(a,s){return Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),a.hyper_link&&a.hyper_link.length>0?Object(f.jsx)("a",{href:(/^https?:\/\//i.test(a.hyper_link)?"":"http://")+a.hyper_link,className:"action-button",target:"_blank",style:{backgroundColor:e.color,color:e.text_color},children:Object(f.jsx)(T,{text:a.text})}):Object(f.jsxs)("button",{className:"action-button",style:{backgroundColor:e.color,color:e.text_color},onClick:t.props.sendCustomActionMessage,children:[Object(f.jsx)(T,{text:null===a||void 0===a?void 0:a.text})," "]}),Object(f.jsx)("br",{})]},"action-buttons-".concat(s))}))}):"","quit"!==this.props.envelope.type&&"initial"!==this.props.envelope.type?Object(f.jsxs)("div",{children:[Object(f.jsx)("br",{}),Object(f.jsxs)("div",{className:"msg_time".concat(this.state.fromTime),children:[" ",w()(this.props.envelope.timestamp?this.props.envelope.timestamp:"").local().format("D.M.YYYY HH.mm")]}),Object(f.jsxs)("div",{className:"msg_from".concat(this.state.fromColor),children:[this.props.envelope.from," "]}),this.props.envelope.from===this.props.userName?Object(f.jsx)("div",{children:this.props.userInfo.map((function(e,a){return Object(f.jsxs)("div",{className:"msg_from".concat(t.state.fromColor),children:[e," "]},"user-info-".concat(a))}))}):""]}):""]})}}]),a}(s.Component),F=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).handleChange=function(t,e){var a=s.state;a[t.target.name]=t.target.value,s.setState(Object(C.a)({},a))},s.sendEmail=function(){var t=s.state.email,e=s.state.chat_history,a="chat/"+s.props.contaktiChat.serviceChannel+"/send_email_chat_history",n={email:t,message:e};(new b).post(a,n),s.props.quitChat()},s.cancel=Object(p.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.props.quitChat();case 2:s.props.startChat();case 3:case"end":return t.stop()}}),t)}))),s.state={email:"",chat_history:""},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.setState({chat_history:this.props.transcript})}},{key:"render",value:function(){var t=this.props.contaktiChat.translations.user_dashboard,e=this.props.bgColor;return Object(f.jsxs)("div",{id:"contakti-user-details",className:"flex-column justify-content-between d-flex pt-2 px-1",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:t.send_chat_history_title}),Object(f.jsx)("input",{type:"email",name:"email",onChange:this.handleChange,value:this.state.email,placeholder:t.messageemail_chat,className:"form-control callback-control",id:"send-chat-history-email"}),Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),Object(f.jsx)("textarea",{placeholder:t.messagemsg_chat,className:"form-control sendchat--history",rows:"4",id:"send-chat-history-message",name:"chat_history",onChange:this.handleChange,value:this.state.chat_history}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{type:"hidden",id:"chat-client-container",name:"chat-client-container"})]}),Object(f.jsxs)("div",{className:"pb-2",children:[Object(f.jsxs)("div",{className:"send-button-container pull-left",children:[Object(f.jsxs)("button",{id:"send-chat-history-send",className:"send",style:{backgroundColor:e,margin:"5px"},onClick:this.sendEmail,children:[t.messagesend_chat,"  "]}),Object(f.jsx)("span",{}),Object(f.jsx)("button",{id:"send-chat-history-cancel",className:"send",style:{backgroundColor:e,margin:"5px"},onClick:this.cancel,children:t.messagesend_cancel})]}),Object(f.jsxs)("div",{className:"pull-right",children:["Powered by ",Object(f.jsx)("a",{href:"http://contakti.com",target:"_blank",rel:"noreferrer",style:{position:"relative"},children:"contakti.com"}),Object(f.jsx)("div",{className:"send-button-container pull-left"})]})]})]})}}]),a}(s.Component),B=a(13),E=a.n(B),H=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).onStartClientResponse=function(t){!s.state.agentPresent&&s.state.contaktiChat.chatWithHuman&&s.setSendDisabled(),t.callback=s.onMessageReceived,t.connect=!0,s.setState({chatChannel:t.channel}),s.setState({fayeServer:t.server}),window.Danthes.sign(t),setTimeout((function(){var t=s.state.contaktiChat.serverUrl+"/chat/set_client_info?channel_id=".concat(s.state.chatChannel);fetch(t,{"Content-Type":"application/json"})}),2e3)},s.displayNoAgentOnlineScreen=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4,e=s.state.contaktiChat;0==e.agents_online&&1==e.chatWithHuman?s.props.showNoAgentOnlineScreen():s.setState({connectTimeout:setTimeout((function(){s.scrollDown(),s.setState({showNoAgentOnline:!0}),s.quitChat()}),t)})},s.successCallback=function(t){var e=s.state.contaktiChat;0==t.agent_online?s.displayNoAgentOnlineScreen(0):(e.chatWithHuman=!0,e.chatBotEnabled=!1,s.setState({contaktiChat:e},(function(){s.setSendDisabled(),s.displayNoAgentOnlineScreen()})))},s.onMessageReceived=function(t){if("indicator"!==t.type){var e=document.getElementById("contakti-msg-indicator");if(s.setState({messageCame:!0,msgAttempts:1}),"agent_indicator"===t.type){e=document.getElementById("contakti-msg-indicator"),localStorage.getItem("indicator_state")||(localStorage.setItem("indicator_state","true"),e.innerHTML=t.from+s.state.contaktiChat.translations.user_dashboard.typing_text+'<div id="wave"> <span class="dot"></span> <span class="dot"></span> <span class="dot"></span> </div>',s.setState({connectTimeout:setTimeout((function(){document.getElementById("contakti-msg-indicator").innerHTML="",localStorage.removeItem("indicator_state")}),5e3)}))}else{if("quit"===t.type)s.setState({agentsCount:s.state.agentsCount-1}),t.message="".concat(t.from," ").concat(s.state.contaktiChat.translations.user_dashboard.quit_chat),s.state.agentsCount<1&&(s.setState({agentPresent:!1}),s.setSendDisabled());else if("join"===t.type)s.setState({agentsCount:s.state.agentsCount+1}),s.state.agentPresent?t.message="".concat(t.from," ").concat(s.state.contaktiChat.translations.user_dashboard.join_chat):t.message="".concat(t.from," ").concat(s.state.contaktiChat.chat_settings.welcome_message),s.setState({agentPresent:!0,agentName:t.from}),clearTimeout(s.state.connectTimeout),s.setSendDisabled();else if("switch_to_human"===t.type)t.message="".concat(s.state.contaktiChat.translations.user_dashboard.ask_human_to_help),t.from!==s.username&&(e.innerText=""),s.changeFromBotToHumanChat(s.successCallback);else if("retry"===t.type){var a=s.state.msgAttempts;a+=1,s.setState({msgAttempts:a}),t.message="".concat(s.state.contaktiChat.translations.user_dashboard.retry_message),t.from!==s.username&&(e.innerText="")}var n=s.state,o=n.messages,c=n.chat_transcript;t&&o.push(t),c=s.getChatTranscript(),s.setState({messages:o,chat_transcript:c}),t.has_custom_action&&t.custom_action_text&&s.setState({showCustomActionButtion:!0,customActionButtionText:t.custom_action_text}),t.from!==s.state.username&&(e.innerText="")}s.scrollDown()}},s.changeFromBotToHumanChat=function(){var t=Object(p.a)(u.a.mark((function t(e){var a,n,o,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],a="inquiry"===s.state.contaktiChat.chat_settings.format?s.state.contaktiChat.chat_settings.chat_inquiry_fields.map((function(t){return{label:t.title,value:s.state[E.a.camelCase(t.title)]}})):[{label:"Name",value:s.state.username}],n={chatbot:!1,channel_id:s.state.chatChannel,name:s.state.username,email:s.state.email,phone:s.state.phone,chat_display_fields:a,is_ad_finland_company:s.state.contaktiChat.is_ad_finland},o="/chat/".concat(s.state.contaktiChat.serviceChannel,"/bot_initiate_human_chat"),t.next=6,(new b).post(o,n);case 6:c=t.sent,e(c);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s.sendCustomActionMessage=function(t){s.sendMessage(t.target.innerText)},s.sendMessage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(0===t.length&&(t=s.state.newMessage),t.length>0){var e=s.state.messageFactory.newMessage(t,null,s.state.contaktiChat.chatBotEnabled);e.attempts=s.state.msgAttempts;var a=s._channelUrl();(new b).post(a,e),s.setState({newMessage:""})}},s._channelUrl=function(){return s.state.chatChannel+"/send_msg"},s.scrollDown=function(){s.messagesListContainer&&s.messagesListContainer.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})},s.sendQuitNotify=function(){if(!s.state.quitSent){s.setState({quitSent:!0});var t=s.state.messageFactory.quitMessage(),e=s._channelUrl();(new b).post(e,t);return null}},s.quitChat=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!s.state.agentPresent){t.next=4;break}s.sendQuitNotify(),t.next=8;break;case 4:if(!s.state.chatChannel){t.next=8;break}return e="/chat/".concat(s.state.contaktiChat.serviceChannel,"/abort_chat?channel_id=").concat(encodeURIComponent(s.state.chatChannel)),t.next=8,(new b).get(e);case 8:case"end":return t.stop()}}),t)}))),s._channelIndicatorUrl=function(){return s.state.chatChannel+"/send_indicator"},s.onKeyIndicator=function(){var t=s.state.messageFactory.newMessage("Customer typing"),e=s._channelIndicatorUrl();(new b).post(e,t)},s.onKeyPress=function(t){13!==t.keyCode&&s.onKeyIndicator()},s.onSendClicked=function(t){s.setSendDisabled(),s.sendMessage()},s.startChat=function(){var t=Object(p.a)(u.a.mark((function t(e){var a,n,o,c,i,r,l,h,d;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e&&e.preventDefault(),a="Anonymous","inquiry"===s.state.contaktiChat.chat_settings.format&&(a=s.state[E.a.camelCase(null===(n=s.state.contaktiChat.chat_settings.chat_inquiry_fields[0])||void 0===n?void 0:n.title)]),s.setState({showDetailInput:!1,showChat:!0,username:s.state.username.length>0?s.state.username:a,messageFactory:new y({username:s.state.username.length>0?s.state.username:a,channel:s.state.chatChannel,email:s.state.email,phone:s.state.phone})}),s.props.toggleDropDown(!0),s.state.contaktiChat.chatWithHuman&&s.displayNoAgentOnlineScreen(),o=[],o="inquiry"===s.state.contaktiChat.chat_settings.format?s.state.contaktiChat.chat_settings.chat_inquiry_fields.map((function(t){return{label:t.title,value:s.state[E.a.camelCase(t.title)]}})):[{label:"Name",value:a}],c={chatbot:s.state.contaktiChat.chatBotEnabled,name:a,email:s.state.email,phone:s.state.phone,chat_display_fields:o,is_ad_finland_company:s.state.contaktiChat.is_ad_finland},i="chat/".concat(s.state.contaktiChat.serviceChannel,"/initiate_chat"),t.next=12,(new b).post(i,c);case 12:r=t.sent,s.state.contaktiChat.initialMsg.length>0&&(l=s.state.messageFactory.newMessage(s.state.contaktiChat.initialMsg,"initial",s.state.contaktiChat.chatBotEnabled,s.state.contaktiChat.chat_settings.bot_alias),s.state.contaktiChat.chatBotEnabled&&s.state.contaktiChat.chat_settings.enable_initial_buttons&&(l.action_buttons=s.state.contaktiChat.chat_settings.chat_initial_buttons.map((function(t){return{text:t.title}}))),h=w.a,l.timestamp=h().local().format(),(d=s.state.messages).push(l),s.setState({messages:d})),s.props.setChatStarted(),s.onStartClientResponse(r);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s.setSendDisabled=function(t){var e,a;!s.state.agentPresent&&(null===(e=s.state.contaktiChat)||void 0===e?void 0:e.chatWithHuman)?(s.setState({disableChatSendDisabled:!0}),!s.state.agentPresent&&(null===(a=s.state.contaktiChat)||void 0===a?void 0:a.chatWithHuman)&&s.setState({disableChatSendDisabled:!0})):s.setState({disableChatSendDisabled:!1})},s.updateUserDetail=function(){},s.handleChange=function(t,e){var a=s.state;a[t.target.name]=t.target.value,s.setState(Object(C.a)({},a))},s.uploadFile=function(){s.fileInput.click()},s.handleFileChange=function(){var t=Object(p.a)(u.a.mark((function t(e){var a,n,o,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.target.files[0],(n=new FormData).append("upload",a,a.name),t.next=5,(new b).postFile("chat/uploadfile",n);case 5:o=t.sent,s.state.uploadedFileUrls.push(o.file_url),c=s.state.messageFactory.fileMessage(o.file_url,o.file_path),i=s._channelUrl(),(new b).post(i,c);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s.showSendChatHistory=function(){s.setState({showSendChatHistoryFlag:!0})},s.getChatTranscript=function(){var t="";return s.state.messages.forEach((function(e){var a=N;if(e&&e.message&&(t+=a.convertHtmlToText(null===e||void 0===e?void 0:e.message),t+="\n"),e&&e.files&&e.files.forEach((function(e){t+=e.url,t+="\n"})),e&&e.action_buttons&&e.action_buttons.forEach((function(e){t+=e.text,e.hyper_link&&e.hyper_link.length>0&&(t+="( ".concat(e.hyper_link," )")),t+="\n"})),e&&"quit"!==e.type){var s=w.a;t+=s(e.timestamp?e.timestamp:[]).local().format("D.M.YYYY HH.mm"),t+="\n",t+=e.from,t+="\n"}t+="\n"})),t},s.downloadChat=function(){s.fileDownload.click()},s.createTicket=Object(p.a)(u.a.mark((function t(){var e,a,n,o,c,i,r,l,h,d,p,m,j,g=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=g.length>0&&void 0!==g[0]&&g[0],a=g.length>1&&void 0!==g[1]?g[1]:[],n=g.length>2&&void 0!==g[2]?g[2]:"",o=g.length>3&&void 0!==g[3]?g[3]:"",c=g.length>4&&void 0!==g[4]?g[4]:"",i=g.length>5&&void 0!==g[5]?g[5]:"",r=g.length>6&&void 0!==g[6]?g[6]:"",(l={}).channel_id=s.state.chatChannel,l.media_channel_id=s.state.contaktiChat.serviceChannel,l.messages_attributes=[],l.messages_attributes[0]={},l.messages_attributes[0].title=r,l.messages_attributes[0].channel_type="chat",s.state.customActionButtionText.length>0&&0===r.length&&(l.messages_attributes[0].title=s.state.customActionButtionText),l.messages_attributes[0].to="Internal",l.messages_attributes[0].from=s.state.username,l.user_uploaded_file_urls=s.state.uploadedFileUrls,s.state.email.length>0&&(l.messages_attributes[0].from=s.state.email),h="","inquiry"===s.state.contaktiChat.chat_settings.format?s.state.contaktiChat.chat_settings.chat_inquiry_fields.forEach((function(t){h+="".concat(t.title," : ").concat(s.state[E.a.camelCase(t.title)],"\n")})):h+="".concat(s.state.contaktiChat.translations.service_channels.name," : ").concat(s.state.username,"\n"),h+="\n",s.state.newMessage.length>0&&(d=s.state.messageFactory.newMessage(s.state.newMessage),s.state.messages.push(d)),h+=s.getChatTranscript(),!0===e?(p=s.state.contaktiChat.translations.user_dashboard.shopping_cart,h+="".concat(p.order_details,": \n"),a.forEach((function(t){var e;h+="".concat(t.title,"&nbsp&nbsp&nbsp&nbsp&nbsp").concat(t.quantity,"-").concat(p.items,"&nbsp&nbsp&nbsp&nbsp&nbsp").concat(p.price,": ").concat(N.displayPrice(t.price)).concat(s.state.contaktiChat.currency," ").concat(t.with_vat?p.including:p.excluding," ").concat((null===(e=t.vat)||void 0===e?void 0:e.vat_percentage)||0,"% ").concat(p.vat,"\n")})),h+="\n".concat(p.price_without_taxes,": ").concat(N.displayPrice(n)).concat(s.state.contaktiChat.currency,"\n"),h+="".concat(p.taxes,": ").concat(N.displayPrice(o)).concat(s.state.contaktiChat.currency,"\n"),h+="".concat(p.shipment_charges,": ").concat(N.displayPrice(c)).concat(s.state.contaktiChat.currency,"\n"),h+="".concat(p.total,": ").concat(N.displayPrice(i)).concat(s.state.contaktiChat.currency,"\n")):l.is_from_chatbot_custom_action_button=!0,l.messages_attributes[0].description=h,l.type="chat",m="tasks/create_task_from_chat",s.props.setPluginDisabledState(!0),t.next=31,(new b).post(m,l);case 31:return j=t.sent,s.setState({showCustomActionButtion:!1,customActionButtionText:""}),e||(s.props.setPluginDisabledState(!1),s.props.quit()),s.quitChat(),t.abrupt("return",j.id);case 36:case"end":return t.stop()}}),t)}))),s.createOrder=Object(p.a)(u.a.mark((function t(){var e,a,n,o,c,i,r,l=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:null,a=l.length>1&&void 0!==l[1]?l[1]:null,n=l.length>2&&void 0!==l[2]?l[2]:[],o=l.length>3&&void 0!==l[3]?l[3]:"",c=l.length>4&&void 0!==l[4]?l[4]:{},i=l.length>5&&void 0!==l[5]?l[5]:"",(r={}).customer_id=a,r.checkout_method=o,r.shipment_method_id=c.id,r.task_id=e,r.currency=s.state.contaktiChat.currency,r.total=i,r.order_products_attributes=[],r.inquiry_fields_data=[],r.service_channel_id=s.state.contaktiChat.serviceChannel,"inquiry"===s.state.contaktiChat.chat_settings.format&&(r.inquiry_fields_data=s.state.contaktiChat.chat_settings.chat_inquiry_fields.map((function(t){return{label:t.title,value:s.state[E.a.camelCase(t.title)]}}))),n.forEach(function(){var t=Object(p.a)(u.a.mark((function t(e){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a={chatbot_product_id:e.id,quantity:e.quantity,currency:s.state.contaktiChat.currency,price:e.price,with_vat:e.with_vat,vat_percentage:e.vat&&e.vat.vat_percentage||0},r.order_products_attributes.push(a);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=20,(new b).post("orders",r);case 20:s.setState({orderCheckoutMethod:o});case 21:case"end":return t.stop()}}),t)}))),s.setOrderCreated=function(){s.setState({orderCreated:!0})},s.state={chatChannel:null,fayeServer:null,messageContainer:document.getElementById("chat_area"),username:"",email:"",phone:"",messageFactory:new y({username:s.username,channel:s.chatChannel,email:s.email,phone:s.phone}),quitSent:!1,messageCame:!1,agentPresent:!1,agentsCount:0,connectTimeout:0,started:!1,messages:[],messagEnvelopes:[],contaktiChat:{},showDetailInput:!0,showChat:!1,newMessage:"",disableChatSendDisabled:!1,disableMessageInput:!1,showNoAgentOnline:!1,agentName:"",showSendChatHistoryFlag:!1,chat_transcript:"",showCustomActionButtion:!1,customActionButtionText:"",uploadedFileUrls:[],orderCreated:!1,orderCheckoutMethod:"",msgAttempts:1},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=this;if(this.props.contaktiChat&&(!this.props.contaktiChat||0!==Object.keys(this.props.contaktiChat).length)){var e=this.props.contaktiChat;this.setState({messageContainer:document.getElementById("chat_area")}),this.setState({contaktiChat:e},Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("inquiry"===t.state.contaktiChat.chat_settings.format&&0!==t.state.contaktiChat.chat_settings.chat_inquiry_fields.length){e.next=3;break}return e.next=3,t.startChat();case 3:case"end":return e.stop()}}),e)})))),this.setSendDisabled()}}},{key:"setUsername",value:function(t){t||(t="Anonymous"),this.setState({username:t});var e=this.state.messageFactory;e.from=t,this.setState({messageFactory:e})}},{key:"maximize",value:function(){document.getElementById("contakti-msg-box").style.bottom="0px",document.getElementById("chat-setting-dropdown")&&document.getElementsByClassName("show-dropdown").length>0&&(document.getElementById("chat-setting-dropdown").style.display="block"),document.getElementById("contakti-msg-minimize").classList.remove("hide"),document.getElementById("contakti-chat-send-btn").onclick=this._onSendClicked.bind(this),this.setState({messageContainer:document.getElementById("contakti-msg-body")}),this.setState({minimized:!1})}},{key:"render",value:function(){var t,e,a,s,n,o,c=this;if(!this.state.contaktiChat)return null;var i=this.state,r=i.contaktiChat,l=i.disableChatSendDisabled,h=this.state.messages,d=[];"inquiry"===(null===(t=r.chat_settings)||void 0===t?void 0:t.format)&&r.chat_settings.chat_inquiry_fields.forEach((function(t,e){e>0&&d.push(c.state[E.a.camelCase(t.title)])}));var m="checkout_paytrail"==this.state.orderCheckoutMethod?this.props.contaktiChat.translations.user_dashboard.shopping_cart.note_for_order_payment:this.props.contaktiChat.translations.user_dashboard.shopping_cart.thanks_for_order;return Object(f.jsxs)("div",{id:"contakti-msg-container",className:"msg_wrap h-100",children:[this.state.orderCreated?Object(f.jsx)("div",{className:"text-center h-100 d-flex flex-column mx-2 pt-5",children:Object(f.jsx)(T,{text:m})}):Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{id:"contakti-chat-agent-details",className:"msg_agent",style:{display:""===this.state.agentName?"none":"block",color:this.props.contaktiChat.text_color,backgroundColor:this.props.contaktiChat.color},children:Object(f.jsx)("div",{className:"msg_agent_name",id:"contakti-chat-agent-name",children:this.state.agentName})}),"inquiry"===(null===r||void 0===r||null===(e=r.chat_settings)||void 0===e?void 0:e.format)&&(null===r||void 0===r?void 0:r.chat_settings.chat_inquiry_fields.length)>0?Object(f.jsx)("div",{id:"contakti-user-details",className:"h-100 px-1",style:{display:this.state.showDetailInput?"block":"none"},children:Object(f.jsxs)("form",{className:"flex-column justify-content-between d-flex h-100",onSubmit:function(){var t=Object(p.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.startChat(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),children:[Object(f.jsx)("div",{style:{maxHeight:"330px",overflow:"auto",marginTop:"115px"},children:null===r||void 0===r?void 0:r.chat_settings.chat_inquiry_fields.map((function(t,e){return Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{children:t.title}),Object(f.jsx)("input",{type:t.input_type,required:!0,className:"form-control-start",value:c.state[E.a.camelCase(t.title)]||"",name:E.a.camelCase(t.title),onChange:c.handleChange,id:"contakti-input-name"})]},"inquiry-fields-".concat(e))}))}),Object(f.jsxs)("div",{style:{textAlign:"center",marginBottom:"20px"},children:[Object(f.jsx)("div",{children:Object(f.jsx)("input",{type:"submit",id:"contakti-input-details-submit",className:"btn btn-default btn-block",value:r.translations.user_dashboard.start_chat,style:{backgroundColor:this.props.contaktiChat.color,color:this.props.contaktiChat.text_color}})}),Object(f.jsxs)("div",{children:["Powered by ",Object(f.jsx)("a",{href:"http://contakti.com",target:"_blank",rel:"noreferrer",children:"contakti.com"})]})]})]})}):null,this.state.showSendChatHistoryFlag?Object(f.jsx)(F,{contaktiChat:r,bgColor:r.color,transcript:this.state.chat_transcript,quitChat:function(){c.props.quit(),c.quitChat()},startChat:function(){return c.props.startChat()}}):Object(f.jsxs)("div",{className:!1===this.state.showDetailInput?"":"d-none",children:[Object(f.jsxs)("div",{id:"contakti-msg-body",className:"msg_bodyclient",children:["inquiry"===(null===r||void 0===r||null===(a=r.chat_settings)||void 0===a?void 0:a.format)&&(null===r||void 0===r?void 0:r.chat_settings.chat_inquiry_fields.length)>0?null:"",Object(f.jsx)("div",{style:{display:this.state.showChat?"block":"none"},id:"chat_area",ref:function(t){c.messagesListContainer=t},children:this.state.showNoAgentOnline?Object(f.jsxs)("div",{className:"msg_n",children:[r.translations.user_dashboard.chat_not_available,Object(f.jsxs)("a",{href:"#",onClick:this.props.showNoAgentOnlineScreen,id:"contakti_chat_not_available_link",children:[" ",r.translations.user_dashboard.chat_leave_a_message_link]})]}):Object(f.jsx)("div",{children:h.map((function(t,e){return Object(f.jsx)(A,{envelope:t,handleProductShow:c.props.handleProductShow,bgClass:t.from===c.state.username?"msg_b":"msg_a",userName:c.state.username,sendCustomActionMessage:c.sendCustomActionMessage,addToCart:function(t){c.props.addToCart(t)},contaktiChat:r,userInfo:d},e)}))})})]}),Object(f.jsx)("div",{id:"contakti-msg-indicator",className:"msg_indictor",children:" "}),Object(f.jsxs)("div",{id:"contakti-msg-footer",className:"msg_footer",style:{display:this.state.showChat?"block":"none"},children:[Object(f.jsxs)("div",{className:"block-row",children:[Object(f.jsx)("div",{className:"input-block",children:Object(f.jsx)("textarea",(n={id:"contakti-chat-text-input",value:this.state.newMessage,disabled:l,name:"newMessage",onChange:this.handleChange,className:"msg_input form-control",placeholder:null===r||void 0===r||null===(s=r.translations)||void 0===s?void 0:s.user_dashboard.type_message,onKeyPress:function(t){13===t.charCode?(t.preventDefault(),c.onSendClicked()):c.onKeyPress(t)}},Object(v.a)(n,"disabled",!!this.state.disableChatSendDisabled),Object(v.a)(n,"rows","3"),n))}),Object(f.jsx)("div",{className:"button-block",children:Object(f.jsx)("a",{className:"contakti-chat-send-btn ".concat(this.state.newMessage.length>0?"":"disabled"),onClick:this.onSendClicked,style:{backgroundColor:this.props.contaktiChat.color,color:this.props.contaktiChat.text_color},children:Object(f.jsx)("span",{className:"fa fa-send"})})})]}),Object(f.jsx)("div",{className:"block-row mb-1",children:Object(f.jsx)("div",{className:"pull-left",children:Object(f.jsxs)("button",{id:"custom_action_button",onClick:function(){return c.createTicket()},style:{visibility:this.state.showCustomActionButtion?"visible":"hidden"},children:[" ",this.state.customActionButtionText]})})}),Object(f.jsxs)("div",{className:"block-row mb-10",children:[Object(f.jsx)("div",{className:"pull-left",children:Object(f.jsx)("a",{onClick:this.uploadFile,id:"contakti-open-file",children:null===(o=r.translations)||void 0===o?void 0:o.user_dashboard.attachment_chat})}),Object(f.jsxs)("div",{className:"pull-right",children:["Powered by ",Object(f.jsx)("a",{href:"http://contakti.com",target:"_blank",rel:"noreferrer",style:{marginRight:"10px"},children:"contakti.com"})]})]}),Object(f.jsx)("form",{id:"contakti-file-upload-form",style:{display:"none"},children:Object(f.jsx)("input",{type:"file",id:"contakti-file-upload-input",ref:function(t){c.fileInput=t},name:"upload",onChange:this.handleFileChange})})]})]})]}),Object(f.jsx)("a",{ref:function(t){c.fileDownload=t},style:{display:"none"},href:"data:text/plain;charset=utf-8,".concat(encodeURIComponent(this.state.chat_transcript)),download:"chat_history.txt"})]})}}]),a}(s.Component),z=H,U=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).createCallBack=function(){var t=s.state.phone,e=s.state.date,a=s.state.time,n="";e.length>0&&(n=new Date("".concat(e)),a.length>0&&(n=new Date("".concat(e,"T").concat(a))));var o=s.state.email,c=s.state.message,i="/chat/"+s.props.contaktiChat.serviceChannel+"/create_callback";(new b).post(i,{number:t,datetime:n,email:o,message:c}),document.getElementById("contakti-user-name").innerHTML=s.props.contaktiChat.translations.user_dashboard.thanks_chat,s.setState({callBackSent:!0})},s.handleChange=function(t,e){var a=s.state;a[t.target.name]=t.target.value,s.setState(Object(C.a)({},a))},s.state={phone:"",date:"",time:"",email:"",message:"",callBackSent:!1},s}return Object(r.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{className:"call_back_box h-100",children:this.state.callBackSent?Object(f.jsxs)("div",{style:{textAlign:"center",fontSize:"110%",paddingTop:"3em"},children:[" ",Object(f.jsx)(T,{text:this.props.contaktiChat.translations.user_dashboard.sentmessage_chat})," "]}):Object(f.jsxs)("form",{id:"contakti-user-details",onSubmit:this.createCallBack,className:"h-100 flex-column justify-content-between d-flex",children:[Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("div",{className:"col-12 pb-2",children:Object(f.jsx)("label",{children:this.props.contaktiChat.translations.user_dashboard.callback_chat})}),Object(f.jsxs)("div",{className:"col-12 pb-2",children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("div",{className:"small-label pb-2",children:this.props.contaktiChat.translations.user_dashboard.cbnumber_chat}),Object(f.jsx)("input",{type:"text",onChange:this.handleChange,placeholder:this.props.contaktiChat.translations.user_dashboard.cbnumber_chat,name:"phone",className:"form-control callback-control",value:this.state.phone,id:"messagebox-callback-number",required:!0})]}),Object(f.jsx)("div",{style:{clear:"both"}})]}),Object(f.jsxs)("div",{className:"col-12",children:[Object(f.jsx)("div",{className:"small-label pb-2",children:this.props.contaktiChat.translations.user_dashboard.time_chat}),Object(f.jsx)("div",{style:{clear:"both"}}),Object(f.jsx)("div",{style:{width:"50%",float:"left",boxSizing:"border-box",paddingRight:"20px"},children:Object(f.jsx)("input",{type:"date",id:"messagebox-date-field",name:"date",value:this.state.date,onChange:this.handleChange})}),Object(f.jsx)("div",{style:{width:"50%",float:"left",boxSizing:"border-box",paddingRight:"20px"},children:Object(f.jsx)("input",{type:"time",id:"messagebox-time-field",name:"time",value:this.state.time,onChange:this.handleChange})}),Object(f.jsx)("div",{style:{clear:"both"}})]}),Object(f.jsxs)("div",{className:"col-12 pb-2",children:[Object(f.jsx)("label",{children:this.props.contaktiChat.translations.user_dashboard.message_chat}),Object(f.jsx)("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange,placeholder:this.props.contaktiChat.translations.user_dashboard.messageemail_chat,className:"form-control callback-control",id:"messagebox-email",required:!0}),Object(f.jsx)("br",{}),Object(f.jsx)("textarea",{name:"message",value:this.state.message,onChange:this.handleChange,placeholder:this.props.contaktiChat.translations.user_dashboard.messagemsg_chat,className:"form-control",rows:"8",id:"messagebox-message"})]})]}),Object(f.jsxs)("div",{className:"footer-sec",children:[Object(f.jsx)("div",{className:"send-button-container pull-left",children:Object(f.jsx)("button",{type:"submit",id:"messagebox-send",className:"send ".concat(this.state.phone.length>0&&this.state.email.length>0?"":"disabled"),style:{backgroundColor:this.props.contaktiChat.color},children:Object(f.jsx)("span",{className:"fa fa-send"})})}),Object(f.jsxs)("div",{className:"pull-right",children:["Powered by ",Object(f.jsx)("a",{href:"http://contakti.com",target:"_blank",rel:"noreferrer",style:{position:"relative"},children:"contakti.com"}),Object(f.jsx)("div",{className:"send-button-container pull-left"})]})]})]})})}}]),a}(s.Component),R=a(55),L=a.n(R),W=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).onProductRemove=function(t){s.props.onProductRemove(t)},s.increaseQuantity=function(t){s.props.increaseQuantity(t)},s.decreaseQuantity=function(t){t.quantity>1&&(t.quantity-=1,s.props.replaceProduct(t))},s.state={},s}return Object(r.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.products,s=e.currency,n=this.props.translations;return Object(f.jsxs)("table",{className:"table table-condensed table-striped ",children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{className:"border-0",children:n.product_title}),Object(f.jsx)("th",{className:"border-0 text-center",children:n.quantity}),Object(f.jsx)("th",{className:"border-0 text-center",children:n.price}),Object(f.jsx)("th",{className:"border-0 text-center",children:n.vat}),Object(f.jsx)("th",{className:"border-0 text-center",children:n.action})]})}),Object(f.jsx)("tbody",{id:"cart_body",children:a.map((function(e,a){var n;return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{className:"px-1 border-0",children:Object(f.jsx)("a",{href:"#",onClick:function(){t.props.handleShow(e)},children:null===e||void 0===e?void 0:e.title})}),Object(f.jsx)("td",{className:"px-1 border-0",children:Object(f.jsxs)("div",{className:"center",style:{position:"relative"},children:[Object(f.jsxs)("span",{onClick:function(){return t.increaseQuantity(e)},children:[" ",Object(f.jsx)("i",{className:"fa fa-plus"})," "]}),Object(f.jsx)("input",{type:"text",className:"form-control",style:{width:"50px",margin:"0px 5px"},value:null===e||void 0===e?void 0:e.quantity,readOnly:!0}),Object(f.jsxs)("span",{onClick:function(){return t.decreaseQuantity(e)},children:[" ",Object(f.jsx)("i",{className:"fa fa-minus"})]})]})}),Object(f.jsxs)("td",{className:"px-1 border-0 text-center",children:[N.displayPrice(null===e||void 0===e?void 0:e.price),s]}),Object(f.jsxs)("td",{className:"px-1 border-0 text-center",children:[(null===e||void 0===e?void 0:e.vat)?null===(n=e.vat)||void 0===n?void 0:n.vat_percentage:0,"%"]}),Object(f.jsx)("td",{className:"px-1 border-0 center",children:Object(f.jsx)("button",{onClick:function(){return t.onProductRemove(e)},className:"btn btn-danger ",children:Object(f.jsx)("i",{className:"fa fa-times",disabled:!0})})})]},a)}))})]})}}]),a}(s.Component),Q=a(86),Y=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).state={},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",(function(t){"Escape"===t.key&&t.preventDefault()}))}},{key:"render",value:function(){var t=this;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(P.a,{id:"termsModal",show:this.props.show,backdrop:"static",onHide:this.props.handleTermsModalClose,children:[Object(f.jsx)(P.a.Header,{closeButton:!0,className:"py-1",children:Object(f.jsx)(P.a.Title,{children:this.props.cartTranslations.terms_modal_heading})}),Object(f.jsx)(P.a.Body,{children:Object(f.jsx)("div",{className:"border p-3",children:Object(f.jsx)(T,{text:this.props.orderTermsAndConditions.body})})}),Object(f.jsx)(P.a.Footer,{children:Object(f.jsx)(Q.a,{onClick:function(){t.props.acceptTerms(),t.props.handleTermsModalClose()},variant:"secondary",style:{background:this.props.buttonColor},children:this.props.cartTranslations.accept})})]})})}}]),a}(s.Component),J=(a(79),function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).toggleAcceptTermsChecbox=function(t){s.setState({agreedToTermsAndConditions:t})},s.handleTermsModalClose=function(){s.setState({showTermsModal:!1})},s.handleClose=function(){s.setState({errors:{}}),s.props.handleClose()},s.submitForm=function(){s.form.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},s.setPluginDisabledState=function(t){s.setState({disabledFormContent:t}),s.props.setPluginDisabledState(t)},s.handleSubmit=function(){var t=Object(p.a)(u.a.mark((function t(e){var a,n,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.setState({errors:{}}),e.preventDefault(),s.setPluginDisabledState(!0),a={},n=e.target,a.customer={},a.customer.full_name=n.full_name.value,a.customer.email=n.email.value,a.customer.phone_number=n.phone_number.value,a.customer.street_address=n.street_address.value,a.customer.city=n.city.value,a.customer.zip_code=n.zip_code.value,"customers",t.next=15,(new b).post("customers",a);case 15:(o=t.sent)&&!o.errors?s.props.handleCartOrder(o.id):o.errors?(s.setState({errors:o.errors}),s.setPluginDisabledState(!1)):s.setPluginDisabledState(!1);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s.state={errors:{},disabledFormContent:!1,agreedToTermsAndConditions:!1,showTermsModal:!1},s.customerFormInputs=["full_name","email","phone_number","street_address","city","zip_code"],s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",(function(t){"Escape"===t.key&&t.preventDefault()}))}},{key:"errors",value:function(t){if(this.state.errors[t])return Object(f.jsxs)("span",{className:"w-100 text-end text-danger",style:{fontSize:"0.75rem"},children:["".concat(this.props.translations.customer[t]," "),this.state.errors[t].map((function(t){return t}))]})}},{key:"render",value:function(){var t=this,e=this.props.translations,a=e.customer;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Y,{show:this.state.showTermsModal,orderTermsAndConditions:this.props.orderTermsAndConditions,handleTermsModalClose:this.handleTermsModalClose,cartTranslations:e,acceptTerms:function(){return t.toggleAcceptTermsChecbox(!0)},buttonColor:this.props.buttonColor}),Object(f.jsx)(P.a,{show:this.props.show,onHide:this.handleClose,backdrop:"static",children:Object(f.jsxs)("div",{className:1==this.state.disabledFormContent?"disabled-content":"",children:[Object(f.jsx)(P.a.Header,{closeButton:!0,className:"py-1",children:Object(f.jsx)(P.a.Title,{children:a.title})}),Object(f.jsx)(P.a.Body,{children:Object(f.jsxs)("form",{ref:function(e){t.form=e},onSubmit:function(e){t.handleSubmit(e)},className:"form-group mb-1 customer-details-form",children:[this.customerFormInputs.map((function(e){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"d-flex w-100 justify-content-between",children:Object(f.jsxs)("label",{className:"w-100 my-1",children:[Object(f.jsx)("span",{className:"fw-bold",children:a[e]}),Object(f.jsx)("span",{className:"pull-right",children:t.errors(e)})]})}),Object(f.jsx)("input",{type:"text",required:!0,className:"form-control py-1",name:e})]})})),Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{className:"form-check-input me-1",type:"checkbox",checked:this.state.agreedToTermsAndConditions,defaultChecked:this.state.agreedToTermsAndConditions,onChange:function(e){return t.toggleAcceptTermsChecbox(e.target.checked)},required:!0}),Object(f.jsx)("label",{children:Object(f.jsx)("a",{className:"ms-1",onClick:function(){t.setState({showTermsModal:!0})},children:this.props.orderTermsAndConditions.subject})})]})]})}),Object(f.jsx)(P.a.Footer,{className:"py-1",children:Object(f.jsx)(Q.a,{className:this.state.agreedToTermsAndConditions?"":"disabled",variant:"secondary",style:{background:this.props.buttonColor},size:"sm",onClick:this.submitForm,children:"checkout_paytrail"==this.props.selectedCheckoutMethod?e.checkout_button_paytrail:e.checkout_button_ticket})})]})})]})}}]),a}(s.Component)),K=J,V=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).handleCustomerFormModalClose=function(){s.setState({showCustomerFormModal:!1})},s.handleCustomerFormModalShow=function(){s.setState({showCustomerFormModal:!0})},s.setPluginDisabledState=function(t){s.props.setPluginDisabledState(t),s.setState({disableChatboxContent:t})},s.onProductRemove=function(t){var e=s.state.products;e=E.a.reject(e,(function(e){return e.id===t.id})),s.setState({products:e},(function(){0===s.state.products.length&&s.props.onCartEmpty(),s.countTotalPricesAndTaxes()}))},s.addProduct=function(t){var e=s.state.products,a=E.a.find(e,{id:t.id});a?(a.quantity+=1,s.replaceProduct(a)):(t.quantity=1,e.push(t),s.setState({products:e},(function(){return s.countTotalPricesAndTaxes()})))},s.countTotalPricesAndTaxes=Object(p.a)(u.a.mark((function t(){var e,a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=0,a=0,n=s.state.products,E.a.each(n,(function(t){var s=t.quantity;a+=t.tax_amount*s,e+=t.actual_price*s})),t.next=5,s.setState({priceWithoutTaxes:e,taxes:a});case 5:s.calculateSum();case 6:case"end":return t.stop()}}),t)}))),s.replaceProduct=function(t){var e=s.state.products,a=E.a.findIndex(e,{id:t.id});e.splice(a,1,t),s.setState({products:e}),s.countTotalPricesAndTaxes()},s.handleShipmentChange=function(){var t=Object(p.a)(u.a.mark((function t(e){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.target.value,n=s.state.selectedShipmentMethod,E.a.each(s.props.contaktiChat.shipment_methods,(function(t){a==t.id&&(n=t)})),t.next=5,s.setState({selectedShipmentMethod:n,selectedShipmentMethodPrice:n.price});case 5:s.calculateSum();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s.calculateSum=function(){var t;t=s.state.priceWithoutTaxes+s.state.taxes+(parseFloat(s.state.selectedShipmentMethod.price)||0),s.setState({sum:t})},s.handleCheckoutMethodChange=function(t){s.setState({selectedCheckoutMethod:t.target.value})},s.handleCartOrder=function(t){s.props.handleOrder(t,s.state.products,s.state.selectedCheckoutMethod,s.state.selectedShipmentMethod,s.state.priceWithoutTaxes,s.state.taxes,s.state.sum)},s.state={products:[],shipmentMethods:[],sum:0,priceWithoutTaxes:0,taxes:0,currency:s.props.contaktiChat.currency,showModal:!1,showCustomerFormModal:!1,selectedProduct:{},selectedShipmentMethod:s.props.contaktiChat.shipment_methods[0],selectedCheckoutMethod:s.props.contaktiChat.checkout_methods[0]},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.countTotalPricesAndTaxes();this.props.contaktiChat}},{key:"render",value:function(){var t=this.state.products,e=this.props.contaktiChat,a=e.color,s=e.text_color,n=e.translations,o=n.user_dashboard.shopping_cart;return Object(f.jsxs)("div",{id:"contakti_cart_box",className:"cart_box",children:[Object(f.jsx)(K,{selectedCheckoutMethod:this.state.selectedCheckoutMethod,translations:o,buttonColor:e.color,handleShow:this.handleCustomerFormModalShow,handleClose:this.handleCustomerFormModalClose,handleCartOrder:this.handleCartOrder,show:this.state.showCustomerFormModal,origin:e.origin,setPluginDisabledState:this.setPluginDisabledState,orderTermsAndConditions:e.orderTermsAndConditions}),Object(f.jsxs)("div",{className:"msg_head",style:{backgroundColor:a},children:[Object(f.jsxs)("span",{id:"contakti-user-name",style:{color:s},children:[" ",o.cart_title]}),Object(f.jsx)("span",{id:"close-cart-icon",className:"float-end p-1 mr-2 d-none d-sm-block d-md-none",onClick:this.props.toggleCart,children:Object(f.jsx)("i",{className:"fa fa-times"})})]}),Object(f.jsxs)("div",{className:"cart_body d-flex flex-column justify-content-between mh-75",children:[Object(f.jsxs)("div",{className:"mb-auto",children:[Object(f.jsx)("div",{className:"overflow-scroll",style:{maxHeight:"225px"},children:Object(f.jsx)(W,{products:t,onProductRemove:this.onProductRemove,increaseQuantity:this.addProduct,replaceProduct:this.replaceProduct,translations:o,handleShow:this.props.handleShow,currency:this.state.currency})}),Object(f.jsx)("div",{children:Object(f.jsx)("table",{className:"table table-condensed table-striped ",children:Object(f.jsxs)("tbody",{id:"cart_body",children:[Object(f.jsxs)("tr",{className:"table-active",children:[Object(f.jsx)("td",{className:"px-1 border-0 text-end",colSpan:"3",children:Object(f.jsxs)("strong",{children:[o.price_without_taxes,":"," ","".concat(N.displayPrice(this.state.priceWithoutTaxes)).concat(this.state.currency)]})}),Object(f.jsx)("td",{className:"px-1 border-0 "})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{className:"px-1 border-0 text-end",colSpan:"3",children:Object(f.jsxs)("strong",{children:[o.taxes,":"," ","".concat(N.displayPrice(this.state.taxes)).concat(this.state.currency)]})}),Object(f.jsx)("td",{className:"px-1 border-0 "})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{className:"px-1 border-0 text-end",colSpan:"3",children:Object(f.jsxs)("strong",{children:[o.shipment_charges,":"," ","".concat(N.displayPrice(this.state.selectedShipmentMethod.price)).concat(this.state.currency)]})}),Object(f.jsx)("td",{className:"px-1 border-0 "})]}),Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{className:"px-1 border-0 text-end",colSpan:"3",children:Object(f.jsxs)("strong",{children:[o.total,":"," ","".concat(N.displayPrice(this.state.sum)).concat(this.state.currency)]})}),Object(f.jsx)("td",{className:"px-1 border-0 "})]})]})})})]}),Object(f.jsxs)("div",{className:"flex-end",children:[Object(f.jsxs)("div",{className:"row form-group",children:[Object(f.jsxs)("div",{className:"col-6",children:[Object(f.jsx)("label",{className:"fw-bold",style:{fontSize:"0.8rem"},children:o.checkout_method}),Object(f.jsx)("div",{className:"centera",id:"checkout_method_select",children:Object(f.jsx)("select",{className:"form-control w-100 py-1",style:{fontSize:"0.7rem"},onChange:this.handleCheckoutMethodChange,value:this.state.selectedCheckoutMethod,children:e.checkout_methods.map((function(t){return Object(f.jsx)("option",{value:t,children:n.service_channels[t]})}))})})]}),Object(f.jsxs)("div",{className:"col-6",children:[Object(f.jsx)("label",{className:"fw-bold",style:{fontSize:"0.8rem"},children:n.shipment_methods.title}),Object(f.jsx)("div",{className:"centera",id:"shipment_method_select",children:Object(f.jsx)("select",{className:"form-control w-100 py-1",style:{fontSize:"0.7rem"},onChange:this.handleShipmentChange,value:this.state.selectedShipmentMethod.id,children:e.shipment_methods.map((function(t,e){return Object(f.jsx)("option",{value:t.id,children:t.name},e)}))})})]})]}),Object(f.jsx)("div",{className:"text-center",children:Object(f.jsx)("button",{className:"btn w-50",style:{color:s,backgroundColor:a},onClick:this.handleCustomerFormModalShow,children:o.checkout})})]})]})]})}}]),a}(s.Component),G=V,X=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).handleClose=function(){s.props.handleClose()},s.state={show:!1},s}return Object(r.a)(a,[{key:"render",value:function(){var t=this,e=this.props,a=e.product,s=e.currency,n=e.translations;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(P.a,{show:this.props.show,onHide:this.handleClose,children:[Object(f.jsx)(P.a.Header,{closeButton:!0,children:Object(f.jsx)(P.a.Title,{children:n.title})}),Object(f.jsxs)(P.a.Body,{children:[Object(f.jsxs)("div",{className:"d-flex justify-content-between px-2",children:[Object(f.jsx)("span",{className:"float-start",children:a.title}),Object(f.jsxs)("span",{className:"float-end",children:[Object(f.jsxs)("span",{children:[n.price,":"," "]}),Object(f.jsxs)("span",{children:[N.displayPrice(a.price),s," "]})]})]}),Object(f.jsx)("hr",{}),a.images&&a.images.length>0&&Object(f.jsxs)("div",{children:[Object(f.jsx)(I,{images:a.images,origin:this.props.origin}),Object(f.jsx)("hr",{})]}),Object(f.jsxs)("div",{className:"overflow-auto mt-1 px-2",children:[Object(f.jsx)("div",{children:a.description}),a.attachments&&a.attachments.length>0&&Object(f.jsx)("div",{children:a.attachments.map((function(e,a){return Object(f.jsx)("span",{className:"mx-1",children:Object(f.jsx)("a",{className:"text-decoration-none",href:"".concat(t.props.origin).concat(e.file.url),download:!0,children:e.file_name})})}))})]})]}),Object(f.jsx)(P.a.Footer,{children:Object(f.jsx)(Q.a,{variant:"secondary",style:{background:this.props.buttonColor},size:"sm",onClick:this.handleClose,children:n.close})})]})})}}]),a}(s.Component),Z=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).handleProductModalClose=function(){s.setState({showProductModal:!1})},s.handleProductModalShow=function(t){s.setState({showProductModal:!0,selectedProduct:t})},s.toggleDropDown=function(t){s.setState({showDropDown:t})},s.setChatStarted=function(){s.state.chatStarted||s.setState({chatStarted:!0})},s.showNoAgentOnlineScreen=function(t){s.setState({showNoAgentScreen:!0}),t&&t.preventDefault()},s.showChatPlugin=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.state.chatInitialized||s.setState({chatInitialized:!0}),s.state.showPlugin){t.next=8;break}return e=s.state.contaktiChat,t.next=5,e.setSettings();case 5:s.setState({showPlugin:!0,showMinimize:!0,contaktiChat:e}),s.state.chatStarted&&s.setState({showDropDown:!0}),s.state.cartEmpty||s.setState({showCartIcon:!0});case 8:case"end":return t.stop()}}),t)}))),s.hideChatPlugin=function(t){t.stopPropagation(),s.state.showPlugin&&s.setState({showPlugin:!1,showMinimize:!1,showDropDown:!1,showCart:!1,showCartIcon:!1})},s.destroyChat=function(){s.setState({chatInitialized:!1,showPlugin:!1,showMinimize:!1,showDropDown:!1,showCartIcon:!1,cartEmpty:!0})},s.onResize=function(t,e){window.parent.postMessage({type:"set_dimensions",width:t,height:e},"*")},s.toggleCart=function(){s.setState({showCart:!s.state.showCart})},s.addToCart=function(t){s.setState({showCartIcon:!0,showCart:!0,cartEmpty:!1},(function(){return s.cart.addProduct(t)}))},s.hideCartIcon=function(){s.setState({showCartIcon:!1,showCart:!1,cartEmpty:!0})},s.setPluginDisabledState=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s.setState({disableChatboxContent:t})},s.createCartTicket=function(){var t=Object(p.a)(u.a.mark((function t(e,a,n,o){var c,i,r,l,h=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=h.length>4&&void 0!==h[4]?h[4]:"",i=h.length>5&&void 0!==h[5]?h[5]:"",r=h.length>6?h[6]:void 0,s.setPluginDisabledState(!0),t.next=6,s.chatBox.createTicket(!0,a,c,i,o.price,r,s.state.contaktiChat.translations.user_dashboard.shopping_cart.order_products);case 6:return l=t.sent,t.next=9,s.chatBox.createOrder(l,e,a,n,o,r);case 9:s.chatBox.setOrderCreated(),s.cart.handleCustomerFormModalClose(),s.setState({showCart:!1,showCartIcon:!1}),s.setPluginDisabledState(!1);case 13:case"end":return t.stop()}}),t)})));return function(e,a,s,n){return t.apply(this,arguments)}}(),s.state={style:{},contaktiChat:{},translations:{},loading:!0,showDropDown:!1,showNoAgentScreen:!1,showPlugin:!1,showMinimize:!1,chatStarted:!1,chatInitialized:!1,showCartIcon:!1,showCart:!1,cartEmpty:!0,showProductModal:!1,selectedProduct:{},disableChatboxContent:!1},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=Object(p.a)(u.a.mark((function t(){var e,a,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new g,a=N.getUrlParams(window.location.href),s=a.id,e.setServiceChannel(s),t.next=7,e.setSettings();case 7:return t.next=9,e.setTranslations();case 9:this.setState({contaktiChat:e,loading:!1,style:{color:e.text_color,backgroundColor:e.color}});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state,a=e.contaktiChat,s=e.loading,n="";return window.parent&&window.outerWidth<=600&&(n+=" max-600-width "),s?null:Object(f.jsx)("div",{id:"contakti-chat-main",className:n,children:Object(f.jsx)(L.a,{handleWidth:!0,handleHeight:!0,onResize:this.onResize,children:Object(f.jsxs)("div",{id:"contakti-msg-box",className:"\n                 chat-plugin-parent\n                 ".concat(!0===this.state.showMinimize?"open":"","\n              "),children:[Object(f.jsx)(X,{buttonColor:a.color,product:this.state.selectedProduct,handleShow:this.handleProductModalShow,handleClose:this.handleProductModalClose,show:this.state.showProductModal,origin:a.origin,currency:a.currency,translations:a.translations.user_dashboard.shopping_cart}),Object(f.jsx)("div",{className:"cart-parent"+(this.state.disableChatboxContent?" disabled-content":""),style:{display:this.state.showCart?"block":"none"},children:!this.state.cartEmpty&&a.chat_settings.enable_cart?Object(f.jsx)(G,{ref:function(e){t.cart=e},handleShow:this.handleProductModalShow,contaktiChat:a,onCartEmpty:this.hideCartIcon,toggleCart:this.toggleCart,handleOrder:this.createCartTicket,setPluginDisabledState:this.setPluginDisabledState}):""}),Object(f.jsxs)("div",{className:"chat-parent flex-column d-flex"+(this.state.disableChatboxContent?" disabled-content":""),children:[Object(f.jsxs)("div",{id:"contakti-msg-head",onClick:this.showChatPlugin,className:"msg_head",style:this.state.style,children:[Object(f.jsx)("div",{children:Object(f.jsx)("div",{id:"contakti-logo-container",children:Object(f.jsx)("img",{alt:"logo",src:"".concat(a.origin,"/").concat(a.chat_settings.file.url)})})}),Object(f.jsx)("span",{id:"contakti-user-name",style:{color:a.text_color},children:a.chat_settings.chat_title}),Object(f.jsx)("span",{id:"cart_show_button",onClick:this.toggleCart,style:{display:this.state.showCartIcon?"block":"none",margin:"5px 5px 0 0",color:a.text_color},children:Object(f.jsx)("i",{className:"fa fa-shopping-cart mt-1"})}),Object(f.jsx)("span",{children:this.state.showDropDown?Object(f.jsx)(x,{styleObj:this.state.style,translations:a.translations,showDropdown:this.state.showDropDown,quit:function(){t.chatBox.quitChat(),t.destroyChat()},sendChatHistory:function(){return t.chatBox.showSendChatHistory()},downloadChatHistory:function(){t.chatBox.downloadChat()},startChat:function(){return t.showChatPlugin()}}):""}),Object(f.jsx)("div",{id:"contakti-msg-minimize",children:this.state.showMinimize?Object(f.jsx)("span",{className:"fa-stack",onClick:this.hideChatPlugin,style:{color:a.text_color},children:Object(f.jsx)("i",{className:"fa fa-stack-2x fa-angle-down",style:{top:"3px",left:"0px"}})}):""})]}),this.state.chatInitialized?Object(f.jsx)("div",{style:{display:this.state.showPlugin?"block":"none"},children:this.state.showNoAgentScreen?Object(f.jsx)(U,{contaktiChat:a,showNoAgentOnlineScreen:this.showNoAgentOnlineScreen}):Object(f.jsx)(z,{ref:function(e){t.chatBox=e},contaktiChat:a,handleProductShow:this.handleProductModalShow,toggleDropDown:this.toggleDropDown,showNoAgentOnlineScreen:this.showNoAgentOnlineScreen,quit:function(){t.destroyChat()},setChatStarted:this.setChatStarted,startChat:function(){return t.showChatPlugin()},addToCart:function(e){t.addToCart(e)},setPluginDisabledState:this.setPluginDisabledState})}):""]})]})})})}}]),a}(s.Component),$=Z,tt=function(t){Object(l.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(i.a)(this,a),(s=e.call(this,t)).state={},s}return Object(r.a)(a,[{key:"render",value:function(){return Object(f.jsx)($,{})}}]),a}(s.Component),et=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,89)).then((function(e){var a=e.getCLS,s=e.getFID,n=e.getFCP,o=e.getLCP,c=e.getTTFB;a(t),s(t),n(t),o(t),c(t)}))};a(83);c.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(tt,{})}),document.getElementById("root")),et()}},[[84,1,2]]]);
//# sourceMappingURL=main.e1476bcd.chunk.js.map