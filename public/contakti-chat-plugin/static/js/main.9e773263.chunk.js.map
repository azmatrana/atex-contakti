{"version":3,"sources":["classes/Api.js","classes/ContaktiChat.js","components/chat_plugin/Dropdown.jsx","classes/MessageFactory.js","classes/ChatUtils.js","components/modules/utils/Text.jsx","components/modules/utils/CarouselWrapper.jsx","components/chat_box/MessageImagesModal.jsx","components/chat_box/Message.jsx","components/others/SendChatHistory.jsx","components/chat_box/ChatBox.jsx","components/others/CallBackBox.jsx","components/shopping_cart/Product.jsx","components/shopping_cart/TermsAndConditionsModal.jsx","components/shopping_cart/CustomerFormModal.jsx","components/shopping_cart/Cart.jsx","components/shopping_cart/ProductInfoModal.jsx","components/chat_plugin/ChatPlugin.jsx","App.js","reportWebVitals.js","index.js"],"names":["Api","document","location","origin","includes","this","serverUrl","baseUrl","prototype","get","a","route","fetch","res","json","data","post","method","cache","headers","body","JSON","stringify","response","postFile","file_data","ContaktiChat","locale","serviceChannel","chat_settings","url_obj","serverProtocol","api","channel","settings","chat_inquiry_fields","chat_initial_buttons","chatBotEnabled","enable_chatbot","chatWithHuman","initialMsg","initial_msg","color","text_color","agents_online","is_ad_finland","is_ad_finland_company","shipment_methods","currency","orderTermsAndConditions","order_terms_and_conditions","checkout_methods","checkout_paytrail","push","checkout_ticket","translations","Dropdown","props","toggle_dropdown","e","setState","expanded","state","mouseover","target","style","styleObj","backgroundColor","mouseout","end","quit","showEndChat","sendchatHistory","sendChatHistory","showSendEmail","showStart","startChat","downloadChat","downloadChatHistory","className","id","onClick","hidden","onMouseOver","onMouseOut","user_dashboard","download_txt_file","display","send_to_email","end_chat","start_new_chat","Component","ChatMessage","asJSON","ChatMessageFactory","options","from","username","type","initialise","newMessage","message","chatBot","msg","channel_id","chatbot","quitMessage","botToHumanSwitchMessage","fileMessage","file_url","file_path","ChatUtils","price","Number","toFixed","replaceURLs","replace","url","hyperlink","match","replaceAllNewLines","convertHtmlToText","html","getUrlParams","params","split","forEach","pair","map","decodeURIComponent","length","Text","parse","text","CarouselWrapper","handleSelect","selectedIndex","index","activeIndex","Carousel","onSelect","images","image","Item","src","file","alt","file_name","MessageImagesModal","handleClose","Modal","show","showModal","onHide","Body","Message","handleMessageImageShow","imageIndex","modalImages","handleMessageImageClose","userName","fromTime","envelope","fromColor","contaktiChat","bgClass","download","rel","href","upload_chat","gridTemplateColumns","borderColor","files","name","products","product","title","addToCart","handleProductShow","action_buttons","btn","i","hyper_link","test","sendCustomActionMessage","moment","timestamp","local","format","userInfo","info","SendChatHistory","handleChange","event","key","value","sendEmail","email","chat_history","quitChat","cancel","transcript","bgColor","send_chat_history_title","onChange","placeholder","messageemail_chat","messagemsg_chat","rows","margin","messagesend_chat","messagesend_cancel","position","ChatBox","onStartClientResponse","agentPresent","setSendDisabled","callback","onMessageReceived","connect","chatChannel","fayeServer","server","window","Danthes","sign","setTimeout","displayNoAgentOnlineScreen","timeOut","contakti_chat","showNoAgentOnlineScreen","connectTimeout","scrollDown","showNoAgentOnline","successCallback","agent_online","indicators","getElementById","messageCame","msgAttempts","localStorage","getItem","setItem","innerHTML","typing_text","removeItem","agentsCount","quit_chat","join_chat","welcome_message","agentName","clearTimeout","ask_human_to_help","innerText","changeFromBotToHumanChat","retry_message","messages","chat_transcript","getChatTranscript","has_custom_action","custom_action_text","showCustomActionButtion","customActionButtionText","client_data","field","label","_","camelCase","phone","chat_display_fields","sendMessage","msg_text","messageFactory","attempts","_channelUrl","messagesListContainer","lastChild","scrollIntoView","behavior","block","inline","sendQuitNotify","quitSent","encodeURIComponent","_channelIndicatorUrl","onKeyIndicator","onKeyPress","keyCode","onSendClicked","preventDefault","showDetailInput","showChat","toggleDropDown","bot_alias","enable_initial_buttons","moment1","msgs","setChatStarted","disableChatSendDisabled","updateUserDetail","uploadFile","fileInput","click","handleFileChange","formdata","FormData","append","uploadedFileUrls","showSendChatHistory","showSendChatHistoryFlag","chatUtils","_moment","fileDownload","createTicket","isFromCart","priceWithoutTaxes","taxes","shipment_charges","sum","task_data","service_channels","cartTranslations","shopping_cart","order_details","quantity","items","displayPrice","with_vat","including","excluding","vat","vat_percentage","price_without_taxes","total","setPluginDisabledState","createdTask","createOrder","task_id","customerId","checkout_method","shipment_method","p","chatbot_product_id","orderCheckoutMethod","setOrderCreated","orderCreated","messageContainer","started","messagEnvelopes","disableMessageInput","Object","keys","chat","msgFactory","bottom","getElementsByClassName","classList","remove","onclick","_onSendClicked","bind","minimized","inquiryData","order_success_msg","note_for_order_payment","thanks_for_order","onSubmit","maxHeight","overflow","marginTop","input_type","required","textAlign","marginBottom","start_chat","ref","el","chat_not_available","chat_leave_a_message_link","disabled","type_message","charCode","visibility","attachment_chat","marginRight","instance","CallBackBox","createCallBack","number","date","time","datetime","Date","thanks_chat","callBackSent","fontSize","paddingTop","sentmessage_chat","callback_chat","cbnumber_chat","clear","time_chat","width","float","boxSizing","paddingRight","message_chat","Product","onProductRemove","increaseQuantity","decreaseQuantity","replaceProduct","product_title","action","handleShow","readOnly","TermsAndConditionsModal","addEventListener","backdrop","handleTermsModalClose","Header","closeButton","Title","terms_modal_heading","Footer","Button","acceptTerms","variant","background","buttonColor","accept","CustomerFormModal","toggleAcceptTermsChecbox","checked","agreedToTermsAndConditions","showTermsModal","errors","submitForm","form","dispatchEvent","Event","cancelable","bubbles","disabledFormContent","handleSubmit","customerData","full_name","phone_number","street_address","city","zip_code","createdCustomer","handleCartOrder","customerFormInputs","customer","customerTranslations","f","field_name","defaultChecked","subject","size","selectedCheckoutMethod","checkout_button_paytrail","checkout_button_ticket","Cart","handleCustomerFormModalClose","showCustomerFormModal","handleCustomerFormModalShow","disableChatboxContent","reject","onCartEmpty","countTotalPricesAndTaxes","addProduct","find","each","QUANTITY","tax_amount","actual_price","calculateSum","findIndex","splice","handleShipmentChange","selectedId","selected_method","selectedShipmentMethod","selectedShipmentMethodPrice","parseFloat","handleCheckoutMethodChange","handleOrder","shipmentMethods","selectedProduct","cart_title","toggleCart","colSpan","checkout","ProductInfoModal","description","attachments","close","ChatPlugin","handleProductModalClose","showProductModal","handleProductModalShow","flag","showDropDown","chatStarted","showNoAgentScreen","showChatPlugin","chatInitialized","showPlugin","cont_chat","setSettings","showMinimize","cartEmpty","showCartIcon","hideChatPlugin","stopPropagation","showCart","destroyChat","onResize","height","parent","postMessage","cart","hideCartIcon","createCartTicket","chatBox","order_products","taskId","loading","urlParams","serviceChannelId","setServiceChannel","setTranslations","parent_width_class","outerWidth","handleWidth","handleHeight","enable_cart","chat_title","showDropdown","top","left","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.9e773263.chunk.js","sourcesContent":["const Api = function (options= {}) {\n    \n    // this.serverUrl = process.env.HOST_NAME\n    // this.serverProtocol = process.env.PROTOCOL\n    // this.origin = options.host || 'http://localhost:3000'\n\n    if (document.location.origin.includes(\":300\"))\n    {\n        this.origin = 'http://localhost:3000'\n    }\n    else{\n        this.origin = document.location.origin\n    }\n    \n    this.serverUrl = this.origin + '/api/v1'\n    this.baseUrl = this.serverUrl;\n}\n\nApi.prototype.origin = \"ASdas\"\n\nApi.prototype.get = async function (route = '') {\n    const res = await fetch(`${this.baseUrl}/${route}`)\n    const data = await res.json()\n    if (!data) {\n        return null\n    }\n    else {\n        return data\n    }\n}\nApi.prototype.post = async function (route = '', data = {}) {\n    const response = await fetch(`${this.baseUrl}/${route}`, {\n        method: 'POST',\n        cache: 'no-cache',\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data) \n    });\n    return await response.json();\n}\n\nApi.prototype.postFile = async function (route = '', file_data = {}) {\n    const response = await fetch(`${this.baseUrl}/${route}`, {\n        method: 'POST',\n        cache: 'no-cache',\n        body: file_data \n    });\n    return await response.json();\n}\nexport default Api\n\n\n","import Api from \"./Api\";\n\nclass ContaktiChat {\n    constructor(options = {}) {\n        // this.serverProtocol = process.env.PROTOCOL\n        if (document.location.origin.includes(\":300\"))\n        {\n            this.origin = 'http://localhost:3000'\n        }\n        else{\n            this.origin = document.location.origin\n        }\n\n        this.serverUrl = this.origin + '/api/v1'\n        this.locale = 'en';\n        this.serviceChannel = null;\n        this.chat_settings = {};\n        this.url_obj = {\n            serverUrl: this.serverUrl,\n            serverProtocol: this.serverProtocol\n        };\n        this.api = new Api(this.url_obj);\n    }\n    setServiceChannel(channel){\n        this.serviceChannel = channel;\n    }\n\n    async setSettings() {\n        let res = await this.api.get(`chat/${this.serviceChannel}/get_chat_settings`);\n        this.chat_settings = res.settings;\n        this.chat_settings.chat_inquiry_fields = res.chat_inquiry_fields;\n        this.chat_settings.chat_initial_buttons = res.chat_initial_buttons;\n        this.chatBotEnabled = this.chat_settings.enable_chatbot;\n        this.chatWithHuman = !(this.chat_settings.enable_chatbot);\n        this.initialMsg = this.chat_settings.initial_msg;\n        this.color = this.chat_settings.color;\n        this.text_color = this.chat_settings.text_color;\n        this.agents_online = res.agents_online;\n        this.is_ad_finland = res.is_ad_finland_company\n        this.shipment_methods = res.shipment_methods\n        this.currency = res.currency || ''\n        this.orderTermsAndConditions = res.order_terms_and_conditions\n\n        this.checkout_methods = []\n        if (this.chat_settings.checkout_paytrail) this.checkout_methods.push(\"checkout_paytrail\")\n        if (this.chat_settings.checkout_ticket) this.checkout_methods.push(\"checkout_ticket\")\n\n    }\n\n    async setTranslations() {\n        this.translations = await this.api.get(`chat/get_translations`);\n    }\n}\n\nexport default ContaktiChat\n","import React, { Component } from 'react';\n\nclass Dropdown extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      expanded: false,\n      showSendEmail: true,\n      showStart: false,\n      showEndChat: true,\n    }\n  }\n\n\n  // document.onclick = (event){\n  // \tif(!event.target.classList.contains('dropdown-toggle') && !event.target.classList.contains('fa-cog')){\n  // \t\tif(document.querySelector('.dropdown')){\n  // \t\t\tdocument.querySelector('.dropdown').classList.remove(\"open\");\n  // \t\t}\n  // \t}\n  // }\n\n  toggle_dropdown = (e) => {\n    // ele.parentElement.classList.remove(\"close-force\");\n    // e.target.parentNode.classList.toggle(\"open\");\n    this.setState({ expanded: !this.state.expanded });\n  }\n   mouseover = (e) => {\n    e.target.style.color = this.props.styleObj.color;\n    e.target.style.backgroundColor = this.props.styleObj.backgroundColor;\n  }\n  mouseout = (e) => {\n    e.target.style.color = this.props.styleObj.backgroundColor;\n    e.target.style.backgroundColor = this.props.styleObj.color;\n  }\n\n  end = () => {\n    this.props.quit();\n    this.setState({showEndChat: false});\n  }\n\n  sendchatHistory = () =>{\n    this.toggle_dropdown();\n    this.props.sendChatHistory();\n    this.setState({showSendEmail: false, showStart: true});\n  }\n\n  startChat =  async() =>{\n    this.setState({showStart: false});\n    await this.props.quit();\n    await this.props.startChat();\n  }\n\n  downloadChat = () => {\n    this.props.downloadChatHistory();\n  }\n\n\n  // mouseoverdownload(e) {\n  //   var x = document.getElementById(\"download_chat_history\");\n  //   x.style.color = document.getElementById('contakti-user-name').style.color;\n  //   x.style.backgroundColor = document.getElementById('contakti-msg-head').style.backgroundColor;\n  // }\n\n  // mouseoutdownload(e) {\n  //   var x = document.getElementById(\"download_chat_history\");\n  //   x.style.color = document.getElementById('contakti-msg-head').style.backgroundColor;\n  //   x.style.backgroundColor = document.getElementById('contakti-user-name').style.color;\n  // }\n\n  // mouseoversend(e) {\n  //   var y = document.getElementById(\"send_chat_history\");\n  //   y.style.color = document.getElementById('contakti-user-name').style.color;\n  //   y.style.backgroundColor = document.getElementById('contakti-msg-head').style.backgroundColor;\n  // }\n\n  // mouseoutsend(e) {\n  //   var y = document.getElementById(\"send_chat_history\");\n  //   y.style.color = document.getElementById('contakti-msg-head').style.backgroundColor;\n  //   y.style.backgroundColor = document.getElementById('contakti-user-name').style.color;\n  // }\n\n  // mouseovercancel(e) {\n  //   var z = document.getElementById(\"contakti-msg-close-chat\");\n  //   z.style.color = document.getElementById('contakti-user-name').style.color;\n  //   z.style.backgroundColor = document.getElementById('contakti-msg-head').style.backgroundColor;\n  // }\n\n  // mouseoutcancel(e) {\n  //   var z = document.getElementById(\"contakti-msg-close-chat\");\n  //   z.style.color = document.getElementById('contakti-msg-head').style.backgroundColor;\n  //   z.style.backgroundColor = document.getElementById('contakti-user-name').style.color;\n  // }\n\n  // mouseoverstart(e) {\n  //   var z = document.getElementById(\"contakti-msg-start-chat\");\n  //   z.style.color = document.getElementById('contakti-user-name').style.color;\n  //   z.style.backgroundColor = document.getElementById('contakti-msg-head').style.backgroundColor;\n  // }\n\n  // mouseoutstart(e) {\n  //   var z = document.getElementById(\"contakti-msg-start-chat\");\n  //   z.style.color = document.getElementById('contakti-msg-head').style.backgroundColor;\n  //   z.style.backgroundColor = document.getElementById('contakti-user-name').style.color;\n  // }\n\n\n\n\n\n  render() {\n    const {translations} = this.props\n    return (\n      <div className=\"dropdown chat-setting d--inline-block\" id=\"chat-setting-dropdown\" >\n        <button\n         style={{ color: this.props.styleObj.color }}\n          className=\"dropdown-toggle\"\n          onClick={this.toggle_dropdown}\n        >\n          <i className=\"fa fa-cog\"></i></button>\n\n        <ul className=\"chatsetting-dropdown-menu\" hidden={this.state.expanded ? false : true } id=\"chat-setting-dropdown-menu\">\n          <li>\n            <a id=\"download_chat_history\" style={{color: this.props.styleObj.backgroundColor, backgroundColor: this.props.styleObj.color }} onClick={this.downloadChat}  onMouseOver={this.mouseover} onMouseOut={this.mouseout}>\n             {translations.user_dashboard.download_txt_file}\n            </a>\n          </li>\n          <li>\n            <a id=\"send_chat_history\" style={{ display:this.state.showSendEmail? \"block\": \"none\", color: this.props.styleObj.backgroundColor, backgroundColor: this.props.styleObj.color }} onClick={this.sendchatHistory} onMouseOver={this.mouseover} onMouseOut={this.mouseout}>\n            {translations.user_dashboard.send_to_email}\n            </a>\n          </li>\n          <li>\n            <a id=\"contakti-msg-close-chat\" onClick={this.end} style={{ display:this.state.showEndChat? \"block\": \"none\" , color: this.props.styleObj.backgroundColor, backgroundColor: this.props.styleObj.color }} onMouseOver={this.mouseover} onMouseOut={this.mouseout}>\n            {translations.user_dashboard.end_chat}\n            </a>\n            <a id=\"contakti-msg-start-chat\" style={{ display:this.state.showStart? \"block\": \"none\", color: this.props.styleObj.backgroundColor, backgroundColor: this.props.styleObj.color }} onClick={this.startChat} onMouseOver={this.mouseover} onMouseOut={this.mouseout}>\n            {translations.user_dashboard.start_new_chat}\n            </a>\n          </li>\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default Dropdown;","const ChatMessage = function() {\n\n};\n\nChatMessage.prototype.asJSON = function() {\n    return JSON.stringify(this);\n};\nconst ChatMessageFactory = function(options) {\n    this.from = options.username;\n    this.channel = options.channel;\n    this.type = 'message';\n\n};\n\nChatMessageFactory.prototype.initialise = function() {\n\n}\nChatMessageFactory.prototype.newMessage = function(message, type, chatBot = false, from) {\n    var msg = new ChatMessage();\n    msg.from = from || this.from;\n    msg.channel_id = this.channel;\n    msg.type = type || this.type;\n    msg.chatbot = chatBot;\n    msg.message = message;\n    return msg;\n};\n\nChatMessageFactory.prototype.quitMessage = function() {\n    var msg = new ChatMessage();\n    msg.from = this.from;\n    msg.channel_id = this.channel;\n    msg.type = 'quit';\n    msg.message = 'Quitting.';\n    return msg;\n};\n\nChatMessageFactory.prototype.botToHumanSwitchMessage = function() {\n    var msg = new ChatMessage();\n    msg.from = this.from;\n    msg.channel_id = this.channel;\n    msg.type = 'botToHuman';\n    msg.message = 'Requesting human..';\n    return msg;\n};\n\n\nChatMessageFactory.prototype.fileMessage = function(file_url, file_path) {\n    var msg = new ChatMessage();\n    msg.from = this.from;\n    msg.channel_id = this.channel;\n    msg.type = 'file';\n    msg.message = file_url;\n    msg.file_path = file_path;\n    return msg;\n};\n\n\nexport default ChatMessageFactory","class ChatUtils {\n static replaceURLs = (message) => {\n    if (!message) return '';\n    if ( message.includes(\"<iframe\") ) return message;\n    var urlRegex = /(((https?:\\/\\/)|(www\\.))[^\\s]+)/g;\n    let new_message = message.replace(urlRegex, function (url) {\n      var hyperlink = url;\n      if (!hyperlink.match('^https?:\\/\\/')) {\n        hyperlink = 'http://' + hyperlink;\n      }\n      return '<a href=\"' + hyperlink + '\" target=\"_blank\" rel=\"noopener noreferrer\">' + url + '</a>'\n    });\n\n    return new_message;\n  }\n\n  static replaceAllNewLines = (message) => {\n    if (!message) return '';\n    return message.replace(/\\n/g, '<br/>');\n  }\n\n  static convertHtmlToText = (html) => {\n    html = html.replace(/<style([\\s\\S]*?)<\\/style>/gi, '');\n    html = html.replace(/<script([\\s\\S]*?)<\\/script>/gi, '');\n    html = html.replace(/<\\/div>/ig, '\\n');\n    html = html.replace(/<\\/li>/ig, '\\n');\n    html = html.replace(/<li>/ig, '  *  ');\n    html = html.replace(/<\\/ul>/ig, '\\n');\n    html = html.replace(/<\\/p>/ig, '\\n');\n    html = html.replace(/<br\\s*[\\/]?>/gi, \"\\n\");\n    html = html.replace(/<[^>]+>/ig, '');\n    return html\n  }\n\n  static getUrlParams = (url) => {\n    var params = {};\n    (url + '?').split('?')[1].split('&').forEach(\n      function (pair) {\n        pair = (pair + '=').split('=').map(decodeURIComponent);\n        if (pair[0].length) {\n          params[pair[0]] = pair[1];\n        }\n      });\n\n    return params;\n  }\n\n  static displayPrice(price){\n    return Number(price).toFixed(2);\n  }\n};\n\nexport default ChatUtils","import parse from 'html-react-parser';\n\nconst Text = (props) => {\n    return parse(props.text)\n}\n \nexport default Text;","import React, { Component } from 'react';\nimport { Carousel } from 'react-bootstrap';\nclass CarouselWrapper extends Component {\n    constructor(props) {\n        super(props);\n        this.state = { index: 0}\n    }\n    componentDidMount(){\n        let activeIndex = this.props.activeIndex ;\n        this.setState({ index: activeIndex});\n    }\n    handleSelect= (selectedIndex, e) => {\n        this.setState({ index: selectedIndex  });\n    }\n    render() { \n        \n        return ( <> \n        <Carousel activeIndex={this.state.index} onSelect={this.handleSelect}>\n            {this.props.images.map((image, index) => {\n                return (\n                    <Carousel.Item>\n                        <img\n                            className=\"d-block w-100\"\n                            src={`${this.props.origin}${image.file.url}`}\n                            alt={image.file_name}\n                        />\n                    </Carousel.Item>\n                )\n            })}\n\n        </Carousel></> );\n    }\n}\n \nexport default CarouselWrapper;","import React, { Component } from 'react';\nimport { Button, Modal, } from 'react-bootstrap'\nimport CarouselWrapper from '../modules/utils/CarouselWrapper';\nclass MessageImagesModal extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {}\n    }\n\n    handleClose = () => {\n        this.props.handleClose()\n    }\n    render() {\n        return (\n            <>\n                <Modal show={this.props.showModal} onHide={this.handleClose}>\n                    <Modal.Body>\n                        <CarouselWrapper\n                            images={this.props.images}\n                            origin={this.props.origin}\n                            activeIndex={this.props.activeIndex}\n                        />\n                    </Modal.Body>\n                </Modal>\n            </>\n        );\n    }\n}\n\nexport default MessageImagesModal;","import React, { Component } from 'react';\nimport moment from 'moment';\nimport ChatUtils from '../../classes/ChatUtils';\nimport Text from '../modules/utils/Text';\nimport MessageImagesModal from './MessageImagesModal';\nclass Message extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: this.props.userName,\n      fromTime: this.props.envelope.from === this.username ? 'time_b' : 'time_a',\n      fromColor: this.props.from === this.username ? 'from_b' : 'from_a',\n      imageIndex: null,\n      showModal: false,\n      modalImages: []\n    }\n  }\n  handleMessageImageShow = (index, images) => {\n    this.setState({ imageIndex: index, showModal: true, modalImages: images});\n  }\n  handleMessageImageClose = () => {\n    this.setState({ showModal: false  });\n  }\n\n  render() {\n    var { contaktiChat } = this.props;\n\n    return (\n      <div className={this.props.bgClass} >\n        <MessageImagesModal\n         showModal={this.state.showModal}\n         activeIndex={this.state.imageIndex}\n         images={this.state.modalImages}\n         handleClose={this.handleMessageImageClose}\n         origin={contaktiChat.origin}/>\n        {this.props.envelope.type === 'file' ? (\n          <a download target=\"_blank\" rel=\"noreferrer\" href={ChatUtils.replaceAllNewLines(this.props.envelope.message)}>{`${this.props.envelope.from} ${contaktiChat.translations.user_dashboard.upload_chat}`}</a>\n\n        ) : (\n          <Text text={ChatUtils.replaceAllNewLines(ChatUtils.replaceURLs(this.props.envelope.message))} />\n        )}\n        { this.props.envelope.images ? (<div style={{gridTemplateColumns: \"auto auto auto auto\"}} className=\"d-grid mt-1\">\n          { this.props.envelope.images.map((image, index) => {\n            return(<div className=\"me-1 mb-1\">\n              <img src={`${contaktiChat.origin}${image.file.url}`} onClick={() => { this.handleMessageImageShow(index, this.props.envelope.images)}} style={{borderColor: contaktiChat.color}} className=\"img-thumbnail\"></img>\n            </div>)\n          })}\n\n        </div>) : \"\"\n        }\n        {\n          this.props.envelope.files ? (this.props.envelope.files.map((file) => {\n            return (\n              <div>\n                <a download target=\"_blank\" rel=\"noreferrer\" href={file.url}>{file.name}</a>\n              </div>)\n\n          })) : \"\"\n        }\n        {this.props.envelope.products ? (\n          <div id=\"chat-answer-products-wrapper\" className=\"mt-1\">\n            {this.props.envelope.products.map(product => {\n              return (<div className=\"answer_product\" key={`product-item-${product.id}`}>\n                <div className=\"child1\"><strong>{product.title}</strong> </div>\n                <div className=\"child2\">\n                  <a href=\"#\" onClick={() => this.props.addToCart(product)} className=\"add-to-cart-btn\" data-product-id={product.id} style={{ color: contaktiChat.text_color, backgroundColor: contaktiChat.color }}>\n                    <i className=\"fa fa-shopping-cart\"></i>\n                  </a>\n                </div>\n                <span onClick={() => {this.props.handleProductShow(product)}}> <i className=\"fa fa-info-circle\" aria-hidden=\"true\"></i> </span>\n              </div>)\n            })\n            }\n          </div>\n        ) : \"\"}\n\n        {this.props.envelope.action_buttons ? (\n          <div>\n               {this.props.envelope.action_buttons.map((btn, i) => {\n              return (\n                <div key={`action-buttons-${i}`}>\n                  <br />\n                  {btn.hyper_link && btn.hyper_link.length > 0 ? <a href={((!/^https?:\\/\\//i.test(btn.hyper_link))?'http://': \"\") + btn.hyper_link} className=\"action-button\" target=\"_blank\" style={{ backgroundColor: contaktiChat.color, color: contaktiChat.text_color }}><Text text={btn.text} /></a> :\n                    <button className=\"action-button\" style={{ backgroundColor: contaktiChat.color, color: contaktiChat.text_color }} onClick={this.props.sendCustomActionMessage}><Text text={btn?.text} /> </button>\n                  }\n                  <br />\n                </div>\n              )\n\n            })\n            }\n          </div>\n\n        ) : \"\"}\n        {\n          this.props.envelope.type !== 'quit' && this.props.envelope.type !== 'initial' ? (\n            <div>\n              <br />\n              <div className={`msg_time${this.state.fromTime}`}> {moment(this.props.envelope.timestamp ? this.props.envelope.timestamp : \"\").local().format('D.M.YYYY HH.mm')}</div>\n              <div className={`msg_from${this.state.fromColor}`}>{this.props.envelope.from} </div>\n              {this.props.envelope.from === this.props.userName ? (\n                <div>\n                  {this.props.userInfo.map((info, i) => {\n                    return (<div key={`user-info-${i}`} className={`msg_from${this.state.fromColor}`}>{info} </div>)\n                  })}\n                </div>\n              ) : \"\"}\n            </div>\n          ) : \"\"}\n      </div>);\n  }\n}\n\nexport default Message;\n","import React, { Component } from 'react';\nimport Api from '../../classes/Api';\nclass SendChatHistory extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            email: \"\",\n            chat_history: \"\"\n        }\n    }\n    componentDidMount() {\n        this.setState({ chat_history: this.props.transcript });\n    }\n\n    handleChange = (event, key) => {\n        let state = this.state;\n        let inputName = event.target.name;\n        state[inputName] = event.target.value;\n        this.setState({ ...state });\n    }\n\n    sendEmail = () => {\n        let email = this.state.email;\n        let message = this.state.chat_history;\n        var url = 'chat/' + this.props.contaktiChat.serviceChannel + '/send_email_chat_history';\n        let data = { email: email, message: message };\n        new Api().post(url, data);\n        this.props.quitChat();\n    }\n\n    cancel = async () => {\n       await this.props.quitChat();\n        this.props.startChat();\n    }\n\n    render() {\n        const translations = this.props.contaktiChat.translations.user_dashboard\n        const color = this.props.bgColor\n        return (\n            <div id=\"contakti-user-details\" className=\"flex-column justify-content-between d-flex pt-2 px-1\">\n                <div>\n                  <label>{translations.send_chat_history_title}</label>\n                  <input type=\"email\" name=\"email\" onChange={this.handleChange} value={this.state.email} placeholder={translations.messageemail_chat} className=\"form-control callback-control\" id=\"send-chat-history-email\" />\n                  <br /><br />\n                  <textarea placeholder={translations.messagemsg_chat} className=\"form-control sendchat--history\" rows=\"4\" id=\"send-chat-history-message\" name=\"chat_history\" onChange={this.handleChange} value={this.state.chat_history} ></textarea>\n                  <br />\n                  <input type=\"hidden\" id=\"chat-client-container\" name=\"chat-client-container\" />\n                </div>\n                <div className=\"pb-2\">\n                  <div className=\"send-button-container pull-left\">\n                      <button id=\"send-chat-history-send\" className=\"send\" style={{ backgroundColor: color, margin: \"5px\" }}    onClick={this.sendEmail}>{translations.messagesend_chat}  </button>\n                      <span></span>\n                      <button id=\"send-chat-history-cancel\" className=\"send\" style={{ backgroundColor: color, margin: \"5px\" }}  onClick={this.cancel} >{translations.messagesend_cancel}</button>\n                  </div>\n                  <div className=\"pull-right\">\n                      Powered by <a href=\"http://contakti.com\" target=\"_blank\" rel=\"noreferrer\" style={{ position: \"relative\" }}>contakti.com</a>\n                      <div className=\"send-button-container pull-left\">\n\n                      </div>\n                  </div>\n                </div>\n            </div>);\n    }\n}\n\nexport default SendChatHistory;","import React, { Component } from 'react';\nimport ChatMessageFactory from '../../classes/MessageFactory';\nimport Message from './Message';\nimport Api from '../../classes/Api';\nimport moment from 'moment';\nimport SendChatHistory from '../others/SendChatHistory';\nimport _ from 'lodash';\nimport Text from '../modules/utils/Text';\nimport ChatUtils from '../../classes/ChatUtils';\nclass ChatBox extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      chatChannel: null,\n      fayeServer: null,\n      messageContainer: document.getElementById('chat_area'),\n      username: '',\n      email: '',\n      phone: '',\n      messageFactory: new ChatMessageFactory({ username: this.username, channel: this.chatChannel, email: this.email, phone: this.phone }),\n      quitSent: false,\n      messageCame: false,\n      agentPresent: false,\n      agentsCount: 0,\n      connectTimeout: 0,\n      started: false,\n      messages: [],\n      messagEnvelopes: [],\n      contaktiChat: {},\n      showDetailInput: true,\n      showChat: false,\n      newMessage: \"\",\n      disableChatSendDisabled: false,\n      disableMessageInput: false,\n      showNoAgentOnline: false,\n      agentName: \"\",\n      showSendChatHistoryFlag: false,\n      chat_transcript: \"\",\n      showCustomActionButtion: false,\n      customActionButtionText: \"\",\n      uploadedFileUrls: [],\n      orderCreated: false,\n      orderCheckoutMethod: \"\",\n      msgAttempts: 1\n    }\n  }\n  componentDidMount() {\n    if (!this.props.contaktiChat || (this.props.contaktiChat && Object.keys(this.props.contaktiChat).length === 0)) {\n      return;\n    }\n    let chat = this.props.contaktiChat\n\n    this.setState({ messageContainer: document.getElementById('chat_area') });\n    this.setState({ contaktiChat: chat }, async () => {\n      if (this.state.contaktiChat.chat_settings.format !== \"inquiry\" || this.state.contaktiChat.chat_settings.chat_inquiry_fields.length === 0) {\n        await this.startChat();\n      }\n      // window.onbeforeunload = this.quitChat;\n    });\n    this.setSendDisabled();\n  }\n\n  onStartClientResponse = (response) => {\n    if ((!this.state.agentPresent) && this.state.contaktiChat.chatWithHuman) {\n      this.setSendDisabled()\n    }\n\n    response.callback = this.onMessageReceived;\n    response.connect = true;\n\n    this.setState({ chatChannel: response.channel });\n    this.setState({ fayeServer: response.server });\n    window.Danthes.sign(response);\n    // Set client info in redis to use when client closes or reloads the chat.\n    setTimeout(() => {\n      const url = this.state.contaktiChat.serverUrl + `/chat/set_client_info?channel_id=${this.state.chatChannel}`\n      fetch(url, {\n        \"Content-Type\": \"application/json\"\n      });\n    }, 2000);\n\n  };\n\n\n\n  displayNoAgentOnlineScreen = (timeOut = 60000) => {\n    let contakti_chat = this.state.contaktiChat;\n    if (contakti_chat.agents_online == false && contakti_chat.chatWithHuman == true)\n    {\n      this.props.showNoAgentOnlineScreen();\n    }\n    else{\n      this.setState({\n        connectTimeout: setTimeout(() => {\n          this.scrollDown();\n          this.setState({ showNoAgentOnline: true });\n          this.quitChat();\n        }, timeOut)\n      });\n    }\n\n  };\n\n  successCallback = (data) => {\n    let contakti_chat = this.state.contaktiChat;\n    if (data.agent_online == false)\n    {\n      this.displayNoAgentOnlineScreen(0);\n    }\n    else\n    {\n      contakti_chat.chatWithHuman = true;\n      contakti_chat.chatBotEnabled = false;\n      this.setState({ contaktiChat: contakti_chat }, () => {\n        this.setSendDisabled();\n        this.displayNoAgentOnlineScreen();\n      });\n    }\n  }\n  onMessageReceived = (envelope) => {\n    if (envelope.type === 'indicator') {\n      return\n    }\n    //TODO indicators\n    var indicators = document.getElementById('contakti-msg-indicator');\n    this.setState({ messageCame: true, msgAttempts: 1 });\n    if (envelope.type === 'agent_indicator') {\n      indicators = document.getElementById('contakti-msg-indicator');\n      var has_cookies = localStorage.getItem('indicator_state')\n      if (!has_cookies) {\n        // setCookies\n        localStorage.setItem('indicator_state', 'true')\n        indicators.innerHTML = envelope.from + this.state.contaktiChat.translations.user_dashboard.typing_text + '<div id=\"wave\"> <span class=\"dot\"></span> <span class=\"dot\"></span> <span class=\"dot\"></span> </div>';\n        this.setState({\n          connectTimeout: setTimeout(function () {\n            var indicators = document.getElementById('contakti-msg-indicator');\n            indicators.innerHTML = '';\n            // remove cookie\n            localStorage.removeItem('indicator_state')\n          }, 5000)\n        });\n      }\n    }\n    else {\n      if (envelope.type === 'quit') {\n        this.setState({ agentsCount: this.state.agentsCount - 1 });\n        envelope.message = `${envelope.from} ${this.state.contaktiChat.translations.user_dashboard.quit_chat}`;\n        if (this.state.agentsCount < 1) {\n          // Disable send button. Do stuff!\n          this.setState({ agentPresent: false });\n          this.setSendDisabled();\n        }\n      }\n      else if (envelope.type === 'join') {\n        this.setState({ agentsCount: this.state.agentsCount + 1 });\n        if (this.state.agentPresent) {\n          envelope.message = `${envelope.from} ${this.state.contaktiChat.translations.user_dashboard.join_chat}`;\n        } else {\n          envelope.message = `${envelope.from} ${this.state.contaktiChat.chat_settings.welcome_message}`;\n        }\n        this.setState({ agentPresent: true, agentName: envelope.from });\n        clearTimeout(this.state.connectTimeout);\n        this.setSendDisabled();\n      }\n      else if (envelope.type === 'switch_to_human') {\n        envelope.message = `${this.state.contaktiChat.translations.user_dashboard.ask_human_to_help}`;\n        if (envelope.from !== this.username) {\n          indicators.innerText = \"\";\n        }\n        this.changeFromBotToHumanChat(this.successCallback);\n      }\n\n      else if (envelope.type === 'retry') {\n        let {msgAttempts} = this.state\n        msgAttempts += 1;\n        this.setState({ msgAttempts });\n        envelope.message = `${this.state.contaktiChat.translations.user_dashboard.retry_message}`;\n        if (envelope.from !== this.username) {\n          indicators.innerText = \"\";\n        }\n      }\n\n      let { messages, chat_transcript } = this.state;\n      if (envelope) messages.push(envelope);\n      chat_transcript = this.getChatTranscript();\n      this.setState({messages, chat_transcript })\n      if (envelope.has_custom_action && envelope.custom_action_text) {\n        this.setState({ showCustomActionButtion: true, customActionButtionText: envelope.custom_action_text });\n      }\n      if (envelope.from !== this.state.username) {\n        indicators.innerText = \"\";\n      }\n\n    }\n    this.scrollDown();\n  };\n\n\n\n\n  changeFromBotToHumanChat = async (successCallback) => {\n\n    let client_data = [];\n    if (this.state.contaktiChat.chat_settings.format === 'inquiry') {\n      client_data = this.state.contaktiChat.chat_settings.chat_inquiry_fields.map(field => {\n        return { label: field.title, value: this.state[_.camelCase(field.title)] }\n      })\n    }\n    else {\n      client_data = [\n        { label: \"Name\", value: this.state.username }\n      ]\n    }\n    let params = {\n      chatbot: false,\n      channel_id: this.state.chatChannel,\n      name: this.state.username,\n      email: this.state.email,\n      phone: this.state.phone,\n      chat_display_fields: client_data,\n      is_ad_finland_company: this.state.contaktiChat.is_ad_finland\n        }\n    // var options = \"chatbot=\" + false + \"&name=\" + this.state.username + \"&email=\" + this.state.email + \"&phone=\" + this.state.phone + \"&channel_id=\" + encodeURIComponent(this.state.chatChannel);\n    let route = `/chat/${this.state.contaktiChat.serviceChannel}/bot_initiate_human_chat`;\n    let res = await new Api().post(route, params);\n    successCallback(res);\n  }\n\n\n  setUsername(name) {\n    if (!name) {\n      name = 'Anonymous';\n    }\n    this.setState({ username: name });\n    let msgFactory = this.state.messageFactory\n    msgFactory.from = name;\n    this.setState({ messageFactory: msgFactory });\n  };\n\n  sendCustomActionMessage = (e) => {\n    this.sendMessage(e.target.innerText);\n  }\n\n  sendMessage = (msg_text = \"\") => {\n    if (msg_text.length === 0) {\n      msg_text = this.state.newMessage;\n    }\n    if (msg_text.length > 0) {\n      var msg = this.state.messageFactory.newMessage(msg_text, null, this.state.contaktiChat.chatBotEnabled);\n      msg.attempts = this.state.msgAttempts;\n      let route = this._channelUrl();\n      new Api().post(route, msg);\n      this.setState({ newMessage: \"\" })\n    }\n  };\n\n\n\n  _channelUrl = () => {\n    return this.state.chatChannel + '/send_msg';\n  };\n\n  scrollDown = () => {\n    if (this.messagesListContainer) {\n      this.messagesListContainer.lastChild.lastChild.scrollIntoView({ behavior: \"smooth\", block: \"start\", inline: \"nearest\" });\n    }\n  };\n\n  sendQuitNotify = () => {\n    if (this.state.quitSent) return;\n    this.setState({ quitSent: true });\n    var msg = this.state.messageFactory.quitMessage();\n    let route = this._channelUrl();\n    new Api().post(route, msg);\n    var ret = true ? null : ':D'; // Some browsers need fooling to evaluate onbeforeunload\n    return ret;\n  };\n\n  quitChat = async () => {\n    if (this.state.agentPresent) {\n      this.sendQuitNotify();\n    } else {\n      if (this.state.chatChannel) {\n        let route = `/chat/${this.state.contaktiChat.serviceChannel}/abort_chat?channel_id=${encodeURIComponent(this.state.chatChannel)}`;\n        await new Api().get(route);\n      }\n    }\n  };\n  _channelIndicatorUrl = () => {\n\n    return this.state.chatChannel + \"/send_indicator\";\n  };\n\n  onKeyIndicator = () => {\n    var msg = this.state.messageFactory.newMessage(\"Customer typing\");\n    let route = this._channelIndicatorUrl();\n    new Api().post(route, msg);\n  };\n\n  onKeyPress = (event) => {\n    var keyCode = event.keyCode;\n    if (keyCode !== 13) {\n      this.onKeyIndicator();\n    }\n\n  };\n\n  onSendClicked = (event) => {\n    this.setSendDisabled();\n    this.sendMessage();\n  };\n\n  startChat = async (e) => {\n    if (e) {\n      e.preventDefault();\n    }\n    let name = \"Anonymous\";\n    if (this.state.contaktiChat.chat_settings.format === 'inquiry') {\n      name = this.state[_.camelCase(this.state.contaktiChat.chat_settings.chat_inquiry_fields[0]?.title)]\n    }\n    this.setState({\n      showDetailInput: false,\n      showChat: true,\n      username: this.state.username.length > 0 ? this.state.username : name,\n      messageFactory: new ChatMessageFactory({\n        username: this.state.username.length > 0 ? this.state.username : name,\n        channel: this.state.chatChannel,\n        email: this.state.email,\n        phone: this.state.phone\n      })\n    });\n    this.props.toggleDropDown(true);\n    if (this.state.contaktiChat.chatWithHuman) {\n      this.displayNoAgentOnlineScreen();\n    }\n    let client_data = [];\n    if (this.state.contaktiChat.chat_settings.format === 'inquiry') {\n      client_data = this.state.contaktiChat.chat_settings.chat_inquiry_fields.map(field => {\n        return { label: field.title, value: this.state[_.camelCase(field.title)] }\n      })\n    }\n    else {\n      client_data = [\n        { label: \"Name\", value: name }\n      ]\n    }\n    let params = {\n      chatbot: this.state.contaktiChat.chatBotEnabled,\n      name: name,\n      email: this.state.email,\n      phone: this.state.phone,\n      chat_display_fields: client_data,\n      is_ad_finland_company: this.state.contaktiChat.is_ad_finland\n    }\n\n    let route = `chat/${this.state.contaktiChat.serviceChannel}/initiate_chat`;\n    let res = await new Api().post(route, params);\n\n    if (this.state.contaktiChat.initialMsg.length > 0) {\n      var msg = this.state.messageFactory.newMessage(this.state.contaktiChat.initialMsg, \"initial\", this.state.contaktiChat.chatBotEnabled, this.state.contaktiChat.chat_settings.bot_alias);\n      if (this.state.contaktiChat.chatBotEnabled && this.state.contaktiChat.chat_settings.enable_initial_buttons) {\n        msg.action_buttons = this.state.contaktiChat.chat_settings.chat_initial_buttons.map(btn => {return{ text: btn.title}});\n      }\n      let moment1 = moment;\n      msg.timestamp = moment1().local().format();\n      let msgs = this.state.messages\n      msgs.push(msg);\n      this.setState({ messages: msgs });\n    }\n    this.props.setChatStarted();\n    this.onStartClientResponse(res);\n  };\n\n  setSendDisabled = (event) => {\n    if (!this.state.agentPresent && this.state.contaktiChat?.chatWithHuman) {\n      this.setState({ disableChatSendDisabled: true })\n      if (!this.state.agentPresent && this.state.contaktiChat?.chatWithHuman) {\n        this.setState({ disableChatSendDisabled: true })\n\n      }\n    } else {\n      this.setState({ disableChatSendDisabled: false })\n    }\n  };\n\n  maximize() {\n    document.getElementById('contakti-msg-box').style.bottom = '0px';\n    var chatSettingDrowpdown = document.getElementById('chat-setting-dropdown')\n    if (chatSettingDrowpdown && document.getElementsByClassName('show-dropdown').length > 0) {\n      document.getElementById('chat-setting-dropdown').style.display = \"block\";\n    }\n    document.getElementById('contakti-msg-minimize').classList.remove('hide');\n    var sendButton = document.getElementById('contakti-chat-send-btn');\n    sendButton.onclick = this._onSendClicked.bind(this);\n    this.setState({ messageContainer: document.getElementById('contakti-msg-body') });\n    this.setState({ minimized: false });\n  };\n\n  updateUserDetail = () => {\n  }\n\n  handleChange = (event, key) => {\n    let state = this.state;\n    let inputName = event.target.name;\n    state[inputName] = event.target.value;\n    this.setState({ ...state });\n  }\n  uploadFile = () => {\n    this.fileInput.click();\n  }\n  handleFileChange = async (e) => {\n    // const fileData = e.target.files[0];\n\n    let file = e.target.files[0];\n\n\n    var formdata = new FormData();\n    formdata.append(\"upload\", file, file.name);\n\n    let response = await new Api().postFile('chat/uploadfile', formdata);\n    this.state.uploadedFileUrls.push(response.file_url)\n    var msg = this.state.messageFactory.fileMessage(response.file_url, response.file_path);\n    let route = this._channelUrl();\n    new Api().post(route, msg);\n\n  }\n\n  showSendChatHistory = () => {\n    this.setState({ showSendChatHistoryFlag: true });\n  }\n  getChatTranscript = () => {\n    let transcript = \"\";\n    this.state.messages.forEach(message => {\n      let chatUtils = ChatUtils\n      if(message && message.message){\n      transcript += chatUtils.convertHtmlToText(message?.message)\n      transcript += '\\n'\n      }\n      if (message && message.files) {\n        message.files.forEach(file => {\n          transcript += file.url;\n          transcript += '\\n'\n        })\n      }\n      if (message && message.action_buttons) {\n        message.action_buttons.forEach(btn => {\n          transcript += btn.text;\n          if(btn.hyper_link && btn.hyper_link.length > 0 ){\n            transcript +=  `( ${btn.hyper_link} )`\n          }\n          transcript += '\\n';\n        })\n      }\n      if (message && message.type !== 'quit') {\n        let _moment = moment;\n        transcript += _moment(message.timestamp ? message.timestamp : []).local().format('D.M.YYYY HH.mm')\n        transcript += '\\n';\n        transcript += message.from;\n        transcript += '\\n';\n      }\n      transcript += '\\n';\n    })\n    return transcript;\n  }\n\n  downloadChat = () => {\n    this.fileDownload.click();\n  }\n\n  createTicket = async (isFromCart = false, products = [], priceWithoutTaxes=\"\", taxes=\"\", shipment_charges=\"\", sum = \"\", title=\"\" ) => {\n    const task_data = {};\n    task_data['channel_id'] = this.state.chatChannel\n    task_data['media_channel_id'] = this.state.contaktiChat.serviceChannel;\n    task_data['messages_attributes'] = [];\n    task_data['messages_attributes'][0] = {};\n    task_data['messages_attributes'][0]['title'] = title;\n    task_data['messages_attributes'][0][\"channel_type\"] = 'chat';\n    if (this.state.customActionButtionText.length > 0 && title.length === 0) {\n      task_data['messages_attributes'][0]['title'] = this.state.customActionButtionText;\n    }\n    task_data['messages_attributes'][0]['to'] = 'Internal';\n    task_data['messages_attributes'][0]['from'] = this.state.username;\n    task_data['user_uploaded_file_urls'] = this.state.uploadedFileUrls;\n    if (this.state.email.length > 0) task_data['messages_attributes'][0]['from'] = this.state.email;\n    let transcript = \"\";\n    if (this.state.contaktiChat.chat_settings.format === 'inquiry') {\n      this.state.contaktiChat.chat_settings.chat_inquiry_fields.forEach(field => {\n        transcript += `${field.title} : ${this.state[_.camelCase(field.title)]}\\n`;\n      })\n    }\n    else {\n      transcript += `${this.state.contaktiChat.translations.service_channels.name} : ${this.state.username}\\n`;\n    }\n    transcript += `\\n`;\n    if(this.state.newMessage.length > 0){\n      var msg = this.state.messageFactory.newMessage(this.state.newMessage);\n      let {messages} = this.state;\n      messages.push(msg);\n    }\n    transcript += this.getChatTranscript();\n    if (isFromCart === true) {\n      \n\t\t\tconst cartTranslations = this.state.contaktiChat.translations.user_dashboard.shopping_cart;\n\n\t\t\ttranscript += `${cartTranslations.order_details}: \\n`;\n      \n\t\t\tproducts.forEach((product) => {\n\t\t\t\ttranscript += `${product.title}&nbsp&nbsp&nbsp&nbsp&nbsp${product.quantity}-${cartTranslations.items}&nbsp&nbsp&nbsp&nbsp&nbsp${cartTranslations.price}: ${ChatUtils.displayPrice(product.price)}${this.state.contaktiChat.currency} ${product.with_vat ? cartTranslations.including : cartTranslations.excluding} ${product.vat?.vat_percentage || 0}% ${cartTranslations.vat}\\n`;\n      });\n      \n\t\t\ttranscript += `\\n${cartTranslations.price_without_taxes}: ${ChatUtils.displayPrice(priceWithoutTaxes)}${this.state.contaktiChat.currency}\\n`; \n\t\t\ttranscript += `${cartTranslations.taxes}: ${ChatUtils.displayPrice(taxes)}${this.state.contaktiChat.currency}\\n`;   \n\t\t\ttranscript += `${cartTranslations.shipment_charges}: ${ChatUtils.displayPrice(shipment_charges)}${this.state.contaktiChat.currency}\\n`;\n\t\t\ttranscript += `${cartTranslations.total}: ${ChatUtils.displayPrice(sum)}${this.state.contaktiChat.currency}\\n`;\n    }\n    else {\n\t\t\ttask_data[\"is_from_chatbot_custom_action_button\"] = true;\n\t\t}\n\n    task_data['messages_attributes'][0]['description'] = transcript;\n    task_data['type'] = 'chat';\n    const url = 'tasks/create_task_from_chat'\n    this.props.setPluginDisabledState(true);\n    let createdTask = await new Api().post(url, task_data);\n    this.setState( { showCustomActionButtion: false, customActionButtionText: \"\" } );\n    if (!isFromCart) {\n\t\t\tthis.props.setPluginDisabledState(false);\n\t\t\tthis.props.quit();\n\t\t}\n    this.quitChat();\n\n\n    return createdTask.id;\n  }\n\n  createOrder = async (task_id = null, customerId = null, products = [], checkout_method = \"\", shipment_method={}, sum=\"\" ) => {\n    let data = {};\n    data['customer_id'] = customerId;\n    data['checkout_method'] = checkout_method;\n    data['shipment_method_id'] = shipment_method.id;\n    data['task_id'] = task_id;\n    data['currency'] = this.state.contaktiChat.currency;\n    data['total'] = sum;\n    data['order_products_attributes'] = [];\n    data['inquiry_fields_data'] = [];\n    data['service_channel_id'] = this.state.contaktiChat.serviceChannel;\n\n    if (this.state.contaktiChat.chat_settings.format === 'inquiry') {\n      data['inquiry_fields_data'] = this.state.contaktiChat.chat_settings.chat_inquiry_fields.map(field => {\n        return { label: field.title, value: this.state[_.camelCase(field.title)] }\n      })\n    }\n\n    products.forEach( async (product) => {\n      let p = {\n\t\t\t\tchatbot_product_id: product.id,\n\t\t\t\tquantity: product.quantity,\n\t\t\t\tcurrency: this.state.contaktiChat.currency,\n\t\t\t\tprice: product.price,\n\t\t\t\twith_vat: product.with_vat,\n\t\t\t\tvat_percentage: (product.vat && product.vat.vat_percentage) || 0,\n\t\t\t};\n      data['order_products_attributes'].push(p);\n    })\n    await new Api().post( 'orders', data )\n\n    this.setState({ orderCheckoutMethod: checkout_method });\n  }\n\n  setOrderCreated = () => {\n    this.setState({ orderCreated:  true});\n  }\n\n  render() {\n    if (!this.state.contaktiChat) {\n      return null;\n    }\n    const { contaktiChat, disableChatSendDisabled } = this.state;\n    const { messages } = this.state;\n\n    let inquiryData = [];\n    if (contaktiChat.chat_settings?.format === 'inquiry') {\n      contaktiChat.chat_settings.chat_inquiry_fields.forEach((field, index) => {\n        if (index > 0) {\n          inquiryData.push(this.state[_.camelCase(field.title)]);\n        }\n      })\n    }\n\n    let order_success_msg = this.state.orderCheckoutMethod == \"checkout_paytrail\" ? this.props.contaktiChat.translations.user_dashboard.shopping_cart.note_for_order_payment : this.props.contaktiChat.translations.user_dashboard.shopping_cart.thanks_for_order\n\n    return (\n\n      <div id=\"contakti-msg-container\" className=\"msg_wrap h-100\">\n        { this.state.orderCreated ?\n          <div className=\"text-center h-100 d-flex flex-column mx-2 pt-5\">\n            <Text text={ order_success_msg } />\n          </div>\n          :\n          (\n            <div>\n        <div id=\"contakti-chat-agent-details\" className=\"msg_agent\" style={{ display: this.state.agentName === \"\" ? \"none\" : \"block\", color: this.props.contaktiChat.text_color, backgroundColor: this.props.contaktiChat.color }}>\n          <div className=\"msg_agent_name\" id=\"contakti-chat-agent-name\">{this.state.agentName}</div>\n        </div>\n        {\n          contaktiChat?.chat_settings?.format === \"inquiry\" && contaktiChat?.chat_settings.chat_inquiry_fields.length > 0 ?\n            <div id=\"contakti-user-details\" className=\"h-100 px-1\" style={{ display: this.state.showDetailInput ? 'block' : 'none' }} >\n              <form className=\"flex-column justify-content-between d-flex h-100\" onSubmit={async (event) => { await this.startChat(event); }}>\n                <div style={{ maxHeight: \"330px\", overflow: \"auto\", marginTop: \"115px\" }} >\n                  {contaktiChat?.chat_settings.chat_inquiry_fields.map((field, index) => {\n                    return (<div key={`inquiry-fields-${index}`}><label>{field.title}</label>\n                      <input type={field.input_type} required className=\"form-control-start\" value={this.state[_.camelCase(field.title)] || \"\"} name={_.camelCase(field.title)} onChange={this.handleChange} id=\"contakti-input-name\" />\n                    </div>\n                    )\n                  })}\n                </div>\n                <div style={{ textAlign: 'center', marginBottom: \"20px\" }} >\n                  <div>\n                    <input type=\"submit\" id=\"contakti-input-details-submit\" className=\"btn btn-default btn-block\" value={contaktiChat.translations.user_dashboard.start_chat} style={{ backgroundColor: this.props.contaktiChat.color, color: this.props.contaktiChat.text_color }} />\n                  </div>\n                  <div >\n                    Powered by <a href=\"http://contakti.com\" target=\"_blank\" rel=\"noreferrer\">contakti.com</a>\n                  </div>\n                </div>\n              </form>\n            </div>\n            : null\n        }\n        {this.state.showSendChatHistoryFlag ? (<SendChatHistory contaktiChat={contaktiChat} bgColor={contaktiChat.color} transcript={this.state.chat_transcript} quitChat={() => { this.props.quit(); this.quitChat(); }} startChat={() => this.props.startChat()} />) : (\n          <div className={this.state.showDetailInput === false ? '' : 'd-none'}>\n\n            <div id=\"contakti-msg-body\" className=\"msg_bodyclient\">\n              {contaktiChat?.chat_settings?.format === \"inquiry\" && contaktiChat?.chat_settings.chat_inquiry_fields.length > 0 ? (\n                null\n              ) : \"\"}\n              <div style={{ display: this.state.showChat ? 'block' : 'none' }} id=\"chat_area\" ref={(el) => { this.messagesListContainer = el; }}>\n                {\n                  this.state.showNoAgentOnline ? (\n                    <div className=\"msg_n\">{contaktiChat.translations.user_dashboard.chat_not_available}<a href=\"#\" onClick={this.props.showNoAgentOnlineScreen} id=\"contakti_chat_not_available_link\"> {contaktiChat.translations.user_dashboard.chat_leave_a_message_link}</a></div>\n                  ) : (\n\n                    <div>\n                      {\n                        messages.map((message, index) => {\n                          return (\n                            <Message key={index}\n                              envelope={message}\n                              handleProductShow={this.props.handleProductShow}\n                              bgClass={message.from === this.state.username ? 'msg_b' : 'msg_a'}\n                              userName={this.state.username}\n                              sendCustomActionMessage={this.sendCustomActionMessage}\n                              addToCart={(product) => { this.props.addToCart(product) }}\n                              contaktiChat={contaktiChat}\n                              userInfo={inquiryData}\n                            />\n                          );\n\n                        })\n                      }\n                    </div>\n\n                  )}\n              </div>\n            </div>\n            <div id=\"contakti-msg-indicator\" className=\"msg_indictor\"> </div>\n            <div id=\"contakti-msg-footer\" className=\"msg_footer\" style={{ display: this.state.showChat ? 'block' : 'none' }}>\n              <div className=\"block-row\">\n                <div className=\"input-block\">\n                  <textarea\n                    id=\"contakti-chat-text-input\"\n                    value={this.state.newMessage}\n                    disabled={disableChatSendDisabled}\n                    name='newMessage'\n                    onChange={this.handleChange}\n                    className=\"msg_input form-control\"\n                    placeholder={contaktiChat?.translations?.user_dashboard.type_message}\n                    onKeyPress={(event) => {\n                      if (event.charCode === 13) {\n                        event.preventDefault();\n                        this.onSendClicked();\n                      }\n                      else {\n                        this.onKeyPress(event);\n                      }\n                    }}\n                    disabled={this.state.disableChatSendDisabled ? true : false}\n                    rows=\"3\" />\n                </div>\n                <div className=\"button-block\">\n                  <a\n                    className={`contakti-chat-send-btn ${this.state.newMessage.length > 0 ? \"\" : \"disabled\"}`}\n                    onClick={this.onSendClicked}\n                    style={{ backgroundColor: this.props.contaktiChat.color, color: this.props.contaktiChat.text_color }}>\n                    <span className=\"fa fa-send\"></span>\n                  </a>\n                </div>\n              </div>\n              <div className=\"block-row mb-1\">\n                <div className=\"pull-left\">\n                  <button id=\"custom_action_button\" onClick={() => this.createTicket()} style={{ visibility: this.state.showCustomActionButtion ? 'visible' : 'hidden' }}> {this.state.customActionButtionText}</button>\n                </div>\n              </div>\n              <div className=\"block-row mb-10\">\n                <div className=\"pull-left\">\n                  <a onClick={this.uploadFile} id=\"contakti-open-file\">{contaktiChat.translations?.user_dashboard.attachment_chat}</a>\n                </div>\n                <div className=\"pull-right\">\n                  Powered by <a href=\"http://contakti.com\" target=\"_blank\" rel=\"noreferrer\" style={{ marginRight: '10px' }}>contakti.com</a>\n                </div>\n              </div>\n              <form id=\"contakti-file-upload-form\" style={{ display: 'none' }}>\n                <input type=\"file\" id=\"contakti-file-upload-input\" ref={instance => { this.fileInput = instance; }} name=\"upload\" onChange={this.handleFileChange} />\n              </form>\n            </div>\n          </div>\n        )}\n        </div>\n        )}\n\n        <a ref={instance => { this.fileDownload = instance; }} style={{ display: \"none\" }} href={`data:text/plain;charset=utf-8,${encodeURIComponent(this.state.chat_transcript)}`} download=\"chat_history.txt\"></a>\n      </div>\n    );\n  }\n}\n\nexport default ChatBox;\n","import React, { Component } from 'react';\nimport Api from '../../classes/Api';\nimport Text from '../modules/utils/Text';\nclass CallBackBox extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      phone: \"\",\n      date: \"\",\n      time: \"\",\n      email: \"\",\n      message: \"\",\n      callBackSent: false\n\n    }\n  }\n\n  createCallBack = () => {\n    let number = this.state.phone\n    let date = this.state.date\n    let time = this.state.time\n    let datetime = '';\n    if (date.length > 0) {\n      datetime = new Date(`${date}`);\n      if (time.length > 0) {\n        datetime = new Date(`${date}T${time}`);\n      }\n    }\n    let email = this.state.email\n    let message = this.state.message\n    let url = '/chat/' + this.props.contaktiChat.serviceChannel + '/create_callback'\n    new Api().post(url, { number: number, datetime: datetime, email: email, message: message });\n    document.getElementById('contakti-user-name').innerHTML = this.props.contaktiChat.translations.user_dashboard.thanks_chat;\n    this.setState({callBackSent: true})\n  }\n\n\n  handleChange = (event, key) => {\n    let state = this.state;\n    let inputName = event.target.name;\n    state[inputName] = event.target.value;\n    this.setState({ ...state });\n  }\n  render() {\n    return (\n      <div className=\"call_back_box h-100\">\n      { this.state.callBackSent? (<div style={{textAlign: \"center\", fontSize: \"110%\", paddingTop: \"3em\"}}> <Text text={this.props.contaktiChat.translations.user_dashboard.sentmessage_chat} /> </div>) : (\n      <form id=\"contakti-user-details\" onSubmit={this.createCallBack} className=\"h-100 flex-column justify-content-between d-flex\">\n        <div className=\"row\">\n          <div className=\"col-12 pb-2\">\n            <label>{this.props.contaktiChat.translations.user_dashboard.callback_chat}</label>\n          </div>\n\n          <div className=\"col-12 pb-2\">\n            <div>\n              <div className=\"small-label pb-2\">{this.props.contaktiChat.translations.user_dashboard.cbnumber_chat}</div>\n              <input type=\"text\" onChange={this.handleChange} placeholder={this.props.contaktiChat.translations.user_dashboard.cbnumber_chat} name=\"phone\" className=\"form-control callback-control\" value={this.state.phone} id=\"messagebox-callback-number\" required={!(this.state.email.length > 0)} />\n            </div>\n            <div style={{clear: \"both\"}}></div>\n          </div>\n\n          <div className=\"col-12\">\n            <div className=\"small-label pb-2\">{this.props.contaktiChat.translations.user_dashboard.time_chat}</div>\n            <div style={{clear: \"both\"}}></div>\n\n            <div style={{width: \"50%\", float: \"left\", boxSizing: \"border-box\",  paddingRight: \"20px\"}}>\n              <input type=\"date\" id=\"messagebox-date-field\" name=\"date\" value={this.state.date} onChange={this.handleChange} />\n            </div>\n\n            <div style={{width: \"50%\", float: \"left\", boxSizing: \"border-box\",  paddingRight: \"20px\"}}>\n              <input type=\"time\" id=\"messagebox-time-field\" name=\"time\" value={this.state.time} onChange={this.handleChange} />\n            </div>\n\n\n            <div style={{clear: \"both\"}}></div>\n          </div>\n          <div className=\"col-12 pb-2\">\n            <label>{this.props.contaktiChat.translations.user_dashboard.message_chat}</label>\n            <input type=\"email\" name=\"email\" value={this.state.email} onChange={this.handleChange} placeholder={this.props.contaktiChat.translations.user_dashboard.messageemail_chat} className=\"form-control callback-control\" id=\"messagebox-email\" required={!(this.state.phone.length > 0)} />\n            <br />\n            <textarea name=\"message\" value={this.state.message} onChange={this.handleChange} placeholder={this.props.contaktiChat.translations.user_dashboard.messagemsg_chat} className=\"form-control\" rows=\"8\" id=\"messagebox-message\"></textarea>\n\n          </div>\n        </div>\n          <div className=\"footer-sec\">\n            <div className=\"send-button-container pull-left\">\n              <button  type=\"submit\" id=\"messagebox-send\" className={`send ${(this.state.phone.length > 0 || this.state.email.length > 0)  ? \"\" : \"disabled\"}`} style={{backgroundColor: this.props.contaktiChat.color }} ><span className=\"fa fa-send\"></span></button>\n            </div>\n            <div className=\"pull-right\">\n              Powered by <a href=\"http://contakti.com\" target=\"_blank\" rel=\"noreferrer\" style={{position: \"relative\"}}>contakti.com</a>\n              <div className=\"send-button-container pull-left\">\n\n              </div>\n            </div>\n          </div>\n      </form>\n      )}\n      </div>\n\n    );\n  }\n}\n\nexport default CallBackBox;","import React, { Component } from 'react';\nimport ChatUtils from '../../classes/ChatUtils';\n\nclass Product extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n    }\n  }\n\n\n  onProductRemove = (p) => {\n    this.props.onProductRemove(p);\n  }\n\n  increaseQuantity = (product) => {\n    this.props.increaseQuantity(product)\n  }\n\n  decreaseQuantity = (product) => {\n    if (product.quantity > 1) {\n      product.quantity -= 1;\n      this.props.replaceProduct(product)\n    }\n  }\n\n\n  render() {\n    let { products, currency } = this.props;\n    const {translations} = this.props\n\n    return (\n      <table className=\"table table-condensed table-striped \">\n        <thead>\n          <tr>\n            <th className=\"border-0\">{translations.product_title}</th>\n            <th className=\"border-0 text-center\">{translations.quantity}</th>\n            <th className=\"border-0 text-center\">{translations.price}</th>\n            <th className=\"border-0 text-center\">{translations.vat}</th>\n            <th className=\"border-0 text-center\">{translations.action}</th>\n          </tr>\n        </thead>\n\n        <tbody id=\"cart_body\">\n          {\n            products.map((product, index) => {\n              return <tr key={index}>\n                <td className=\"px-1 border-0\"><a href=\"#\" onClick={()=> { this.props.handleShow(product) }}>{product?.title}</a></td>\n                <td className=\"px-1 border-0\">\n                  <div className=\"center\" style={{ position: \"relative\" }}>\n                    <span onClick={() => this.increaseQuantity(product)}> <i className=\"fa fa-plus\"></i> </span>\n                    <input type=\"text\" className=\"form-control\" style={{ width: \"50px\", margin: \"0px 5px\" }} value={product?.quantity} readOnly />\n                    <span onClick={() => this.decreaseQuantity(product)} > <i className=\"fa fa-minus\" ></i></span>\n                  </div>\n                </td>\n                <td className=\"px-1 border-0 text-center\">{ChatUtils.displayPrice(product?.price)}{currency}</td>\n                <td className=\"px-1 border-0 text-center\">{product?.vat ? product.vat?.vat_percentage : 0 }%</td>\n                <td className=\"px-1 border-0 center\">\n                  <button\n                    onClick={() => this.onProductRemove(product)}\n                    className=\"btn btn-danger \" ><i className=\"fa fa-times\" disabled ></i></button>\n                </td>\n              </tr>\n\n            })\n          }\n        </tbody>\n\n      </table>\n\n    );\n  }\n}\nexport default Product;","import React, { Component } from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport Text from '../modules/utils/Text'\n\nclass TermsAndConditionsModal extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n    this.state = {};\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.addEventListener(\"keydown\", (e) => {\n\t\t\tif (e.key === \"Escape\") {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\t}\n\n\trender() {\n\n\t\treturn (\n\t\t\t<>\n        <Modal\n          id=\"termsModal\"\n\t\t\t\t\tshow={this.props.show}\n          backdrop=\"static\"\n          onHide={this.props.handleTermsModalClose}\n        >\n          <Modal.Header closeButton className=\"py-1\">\n            <Modal.Title>{this.props.cartTranslations.terms_modal_heading}</Modal.Title>\n          </Modal.Header>\n          <Modal.Body>\n            <div className=\"border p-3\">\n              <Text text={ this.props.orderTermsAndConditions.body }></Text>\n            </div>\n          </Modal.Body>\n          <Modal.Footer>\n            <Button\n              onClick={ () => {\n                this.props.acceptTerms();\n                this.props.handleTermsModalClose();\n              }\n              }\n              variant=\"secondary\"\n              style={{ background: this.props.buttonColor }}\n            >{ this.props.cartTranslations.accept }</Button>\n          </Modal.Footer>\n\t\t\t\t</Modal>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default TermsAndConditionsModal;\n","import React, { Component } from \"react\";\nimport { Button, Modal } from \"react-bootstrap\";\nimport Api from \"../../classes/Api\";\nimport TermsAndConditionsModal from \"./TermsAndConditionsModal\"\nimport \"./CustomerFormModal.scss\"\n\nclass CustomerFormModal extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\terrors: {},\n\t\t\tdisabledFormContent: false,\n\t\t\tagreedToTermsAndConditions: false,\n\t\t\tshowTermsModal: false\n\t\t};\n\t\tthis.customerFormInputs = [\n\t\t\t\"full_name\",\n\t\t\t\"email\",\n\t\t\t\"phone_number\",\n\t\t\t\"street_address\",\n\t\t\t\"city\",\n\t\t\t\"zip_code\",\n\t\t];\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.addEventListener(\"keydown\", (e) => {\n\t\t\tif (e.key === \"Escape\") {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t});\n\t}\n\n\ttoggleAcceptTermsChecbox = (checked) => {\n\t\t\tthis.setState( { agreedToTermsAndConditions: checked })\n\t}\n\t\t\n\n\thandleTermsModalClose = () => {\n\t\tthis.setState({showTermsModal: false})\n\t}\n\n\thandleClose = () => {\n\t\tthis.setState({ errors: {} });\n\t\tthis.props.handleClose();\n\t};\n\n\tsubmitForm = () => {\n\t\tthis.form.dispatchEvent(\n\t\t\tnew Event(\"submit\", { cancelable: true, bubbles: true })\n\t\t);\n\t};\n\terrors(key) {\n\t\tif (this.state.errors[key]) {\n\t\t\treturn (\n\t\t\t\t<span\n\t\t\t\t\tclassName=\"w-100 text-end text-danger\"\n\t\t\t\t\tstyle={{ fontSize: \"0.75rem\" }}\n\t\t\t\t>\n\t\t\t\t\t{`${this.props.translations.customer[key]} `}\n\t\t\t\t\t{this.state.errors[key].map((e) => {\n\t\t\t\t\t\treturn e;\n\t\t\t\t\t})}\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\t}\n\n\tsetPluginDisabledState = (disabled) => {\n\t\tthis.setState({ disabledFormContent: disabled });\n\t\tthis.props.setPluginDisabledState(disabled);\n\t};\n\n\thandleSubmit = async (e) => {\n\t\tthis.setState({\n\t\t\terrors: {},\n\t\t});\n\t\te.preventDefault();\n\t\tthis.setPluginDisabledState(true);\n\t\tlet customerData = {};\n\t\tlet form = e.target;\n\t\tcustomerData[ \"customer\" ] = {};\n\t\tcustomerData[\"customer\"][\"full_name\"] = form.full_name.value;\n\t\tcustomerData[\"customer\"][\"email\"] = form.email.value;\n\t\tcustomerData[\"customer\"][\"phone_number\"] = form.phone_number.value;\n\t\tcustomerData[\"customer\"][\"street_address\"] = form.street_address.value;\n\t\tcustomerData[\"customer\"][\"city\"] = form.city.value;\n\t\tcustomerData[\"customer\"][\"zip_code\"] = form.zip_code.value;\n\n\t\tconst url = \"customers\";\n\t\tlet createdCustomer = await new Api().post(url, customerData);\n\t\tif (createdCustomer && !createdCustomer.errors) {\n\t\t\tthis.props.handleCartOrder(\n\t\t\t\tcreatedCustomer.id\n\t\t\t);\n\t\t} else if (createdCustomer.errors) {\n\t\t\tthis.setState({\n\t\t\t\terrors: createdCustomer.errors,\n\t\t\t});\n\t\t\tthis.setPluginDisabledState(false);\n\t\t} else {\n\t\t\tthis.setPluginDisabledState(false);\n\t\t}\n\t};\n\n\trender() {\n\t\tconst cartTranslations = this.props.translations;\n\t\tconst customerTranslations = cartTranslations.customer;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<TermsAndConditionsModal\n\t\t\t\t\tshow={ this.state.showTermsModal }\n\t\t\t\t\torderTermsAndConditions={ this.props.orderTermsAndConditions }\n\t\t\t\t\thandleTermsModalClose={ this.handleTermsModalClose }\n\t\t\t\t\tcartTranslations={ cartTranslations }\n\t\t\t\t\tacceptTerms={ () => this.toggleAcceptTermsChecbox( true ) }\n\t\t\t\t\tbuttonColor={ this.props.buttonColor }\n\t\t\t\t/>\n\t\t\t\t<Modal\n\t\t\t\t\tshow={this.props.show}\n\t\t\t\t\tonHide={this.handleClose}\n\t\t\t\t\tbackdrop=\"static\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\tthis.state.disabledFormContent == true ? \"disabled-content\" : \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Modal.Header closeButton className=\"py-1\">\n\t\t\t\t\t\t\t<Modal.Title>{customerTranslations.title}</Modal.Title>\n\t\t\t\t\t\t</Modal.Header>\n\t\t\t\t\t\t<Modal.Body>\n\t\t\t\t\t\t\t<form\n\t\t\t\t\t\t\t\tref={(f) => {\n\t\t\t\t\t\t\t\t\tthis.form = f;\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\t\t\t\tthis.handleSubmit(e);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName=\"form-group mb-1 customer-details-form\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{this.customerFormInputs.map((field_name) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"d-flex w-100 justify-content-between\">\n\t\t\t\t\t\t\t\t\t\t\t\t<label className=\"w-100 my-1\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"fw-bold\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{customerTranslations[field_name]}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"pull-right\">{this.errors(field_name)}</span>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"form-control py-1\"\n\t\t\t\t\t\t\t\t\t\t\t\tname={field_name}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-check-input me-1\"\n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\t\t\tchecked={ this.state.agreedToTermsAndConditions }\n\t\t\t\t\t\t\t\t\t\tdefaultChecked={ this.state.agreedToTermsAndConditions }\n\t\t\t\t\t\t\t\t\t\tonChange={ (e) => this.toggleAcceptTermsChecbox(e.target.checked) } \n\t\t\t\t\t\t\t\t\t\trequired>\n\t\t\t\t\t\t\t\t\t</input>\n\t\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"ms-1\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={()=>{this.setState({showTermsModal: true})}}\n\t\t\t\t\t\t\t\t\t\t>{this.props.orderTermsAndConditions.subject}</a>\n\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</form>\n\t\t\t\t\n\t\t\t\t\t\t</Modal.Body>\n\t\t\t\t\t\t<Modal.Footer className=\"py-1\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tclassName={this.state.agreedToTermsAndConditions ? \"\" : \"disabled\"}\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\tstyle={{ background: this.props.buttonColor }}\n\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\tonClick={this.submitForm}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{this.props.selectedCheckoutMethod == \"checkout_paytrail\"\n\t\t\t\t\t\t\t\t\t? cartTranslations.checkout_button_paytrail\n\t\t\t\t\t\t\t\t\t: cartTranslations.checkout_button_ticket}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Modal.Footer>\n\t\t\t\t\t</div>\n\t\t\t\t</Modal>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default CustomerFormModal;\n","import React, { Component } from 'react';\nimport Product from './Product';\nimport CustomerFormModal from './CustomerFormModal';\nimport ChatUtils from '../../classes/ChatUtils';\nimport _ from 'lodash';\n\nclass Cart extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n\t\t\tproducts: [],\n\t\t\tshipmentMethods: [],\n\t\t\tsum: 0,\n\t\t\tpriceWithoutTaxes: 0,\n\t\t\ttaxes: 0,\n\t\t\tcurrency: this.props.contaktiChat.currency,\n\t\t\tshowModal: false,\n\t\t\tshowCustomerFormModal: false,\n\t\t\tselectedProduct: {},\n\t\t\tselectedShipmentMethod: this.props.contaktiChat.shipment_methods[0],\n\t\t\tselectedCheckoutMethod: this.props.contaktiChat.checkout_methods[0],\n\t\t};\n  }\n  componentDidMount() {\n    this.countTotalPricesAndTaxes();\n    let { contaktiChat } = this.props;\n  }\n  handleCustomerFormModalClose = () => {\n    this.setState({ showCustomerFormModal: false });\n  };\n  handleCustomerFormModalShow = () => {\n    this.setState({ showCustomerFormModal: true });\n  }\n\n  setPluginDisabledState = (disabled) => {\n    this.props.setPluginDisabledState( disabled );\n    this.setState( { disableChatboxContent: disabled });\n  }\n\n  onProductRemove = (product) => {\n    let { products } = this.state;\n    products = _.reject(products, (p) => {\n      return p.id === product.id;\n    });\n    this.setState({ products }, () => {\n      if (this.state.products.length === 0) {\n        this.props.onCartEmpty();\n      }\n      this.countTotalPricesAndTaxes();\n    });\n\n  }\n\n  addProduct = (p) => {\n    let { products } = this.state;\n    var product = _.find(products, { id: p.id });\n    if (product) {\n      product.quantity += 1;\n      this.replaceProduct(product);\n    }\n    else {\n      p.quantity = 1;\n      products.push(p)\n      this.setState({ products }, () => this.countTotalPricesAndTaxes());\n\n    }\n  }\n\n\n  countTotalPricesAndTaxes = async () => {\n\t\tlet priceWithoutTaxes = 0, taxes = 0;\n    let { products } = this.state;\n\t\t_.each( products, ( product ) => {\n\t\t\tconst QUANTITY = product.quantity\n\n\t\t\ttaxes += product.tax_amount * QUANTITY;\n\t\t\tpriceWithoutTaxes += product.actual_price * QUANTITY\n\t\t} );\n    await this.setState( { priceWithoutTaxes, taxes } );\n\t\tthis.calculateSum();\n  }\n\n  replaceProduct = (product) => {\n    let { products } = this.state;\n    var index = _.findIndex(products, { id: product.id });\n    products.splice(index, 1, product);\n    this.setState({ products });\n    this.countTotalPricesAndTaxes();\n\t}\n\n\thandleShipmentChange = async (event) => {\n\t\tlet selectedId = event.target.value;\n\t\tlet selected_method = this.state.selectedShipmentMethod;\n\t\t_.each(this.props.contaktiChat.shipment_methods, (method) => {\n\t\t\tif (selectedId == method.id) {\n\t\t\t\tselected_method = method;\n\t\t\t}\n\t\t});\n\t\tawait this.setState({\n\t\t\tselectedShipmentMethod: selected_method,\n\t\t\tselectedShipmentMethodPrice: selected_method.price,\n\t\t});\n\t\tthis.calculateSum();\n\t};\n\n\tcalculateSum = () => {\n\t\tlet sum = 0;\n\t\tsum = this.state.priceWithoutTaxes + this.state.taxes + (parseFloat(this.state.selectedShipmentMethod.price) || 0 );\n\t\tthis.setState( { sum } );\n\t}\n\n\thandleCheckoutMethodChange = (event) => {\n\t\tthis.setState({ selectedCheckoutMethod: event.target.value });\n\t};\n\n\n  handleCartOrder = ( customerId ) => {\n    this.props.handleOrder(\n\t\t\tcustomerId,\n\t\t\tthis.state.products,\n\t\t\tthis.state.selectedCheckoutMethod,\n\t\t\tthis.state.selectedShipmentMethod,\n\t\t\tthis.state.priceWithoutTaxes,\n\t\t\tthis.state.taxes,\n\t\t\tthis.state.sum\n\t\t);\n  }\n\n  render() {\n    let { products } = this.state;\n    const { contaktiChat } = this.props\n    let color = contaktiChat.color;\n    let text_color = contaktiChat.text_color;\n    const { translations } = contaktiChat;\n    const cartTranslations = translations.user_dashboard.shopping_cart;\n\n    return (\n\t\t\t<div id=\"contakti_cart_box\" className=\"cart_box\">\n\t\t\t\t<CustomerFormModal\n\t\t\t\t\tselectedCheckoutMethod={this.state.selectedCheckoutMethod}\n\t\t\t\t\ttranslations={cartTranslations}\n\t\t\t\t\tbuttonColor={contaktiChat.color}\n\t\t\t\t\thandleShow={this.handleCustomerFormModalShow}\n\t\t\t\t\thandleClose={this.handleCustomerFormModalClose}\n\t\t\t\t\thandleCartOrder={this.handleCartOrder}\n\t\t\t\t\tshow={this.state.showCustomerFormModal}\n\t\t\t\t\torigin={contaktiChat.origin}\n\t\t\t\t\tsetPluginDisabledState={ this.setPluginDisabledState }\n\t\t\t\t\torderTermsAndConditions={contaktiChat.orderTermsAndConditions}\n\t\t\t\t/>\n\t\t\t\t<div className=\"msg_head\" style={{ backgroundColor: color }}>\n\t\t\t\t\t<span id=\"contakti-user-name\" style={{ color: text_color }}>\n\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t{cartTranslations.cart_title}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span\n\t\t\t\t\t\tid=\"close-cart-icon\"\n\t\t\t\t\t\tclassName=\"float-end p-1 mr-2 d-none d-sm-block d-md-none\"\n\t\t\t\t\t\tonClick={this.props.toggleCart}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className=\"fa fa-times\"></i>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"cart_body d-flex flex-column justify-content-between mh-75\">\n\t\t\t\t\t<div className=\"mb-auto\">\n\t\t\t\t\t\t<div className=\"overflow-scroll\" style={{ maxHeight: \"225px\" }}>\n\t\t\t\t\t\t\t<Product\n\t\t\t\t\t\t\t\tproducts={products}\n\t\t\t\t\t\t\t\tonProductRemove={this.onProductRemove}\n\t\t\t\t\t\t\t\tincreaseQuantity={this.addProduct}\n\t\t\t\t\t\t\t\treplaceProduct={this.replaceProduct}\n\t\t\t\t\t\t\t\ttranslations={cartTranslations}\n\t\t\t\t\t\t\t\thandleShow={this.props.handleShow}\n\t\t\t\t\t\t\t\tcurrency={this.state.currency}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<table className=\"table table-condensed table-striped \">\n\t\t\t\t\t\t\t\t<tbody id=\"cart_body\">\n\t\t\t\t\t\t\t\t\t<tr className=\"table-active\">\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-1 border-0 text-end\" colSpan=\"3\">\n\t\t\t\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t\t\t\t{cartTranslations.price_without_taxes}:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t{`${ChatUtils.displayPrice(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.priceWithoutTaxes\n\t\t\t\t\t\t\t\t\t\t\t\t)}${this.state.currency}`}\n\t\t\t\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-1 border-0 \" />\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-1 border-0 text-end\" colSpan=\"3\">\n\t\t\t\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t\t\t\t{cartTranslations.taxes}:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t{`${ChatUtils.displayPrice(this.state.taxes)}${\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.currency\n\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-1 border-0 \" />\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-1 border-0 text-end\" colSpan=\"3\">\n\t\t\t\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t\t\t\t{cartTranslations.shipment_charges}:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t{`${ChatUtils.displayPrice(\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.selectedShipmentMethod.price\n\t\t\t\t\t\t\t\t\t\t\t\t)}${this.state.currency}`}\n\t\t\t\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-1 border-0 \" />\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-1 border-0 text-end\" colSpan=\"3\">\n\t\t\t\t\t\t\t\t\t\t\t<strong>\n\t\t\t\t\t\t\t\t\t\t\t\t{cartTranslations.total}:{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t\t{`${ChatUtils.displayPrice(this.state.sum)}${\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.currency\n\t\t\t\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t<td className=\"px-1 border-0 \" />\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div className=\"flex-end\">\n\t\t\t\t\t\t<div className=\"row form-group\">\n\t\t\t\t\t\t\t<div className=\"col-6\">\n\t\t\t\t\t\t\t\t<label className=\"fw-bold\" style={{ fontSize: \"0.8rem\" }}>\n\t\t\t\t\t\t\t\t\t{cartTranslations.checkout_method}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<div className=\"centera\" id=\"checkout_method_select\">\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control w-100 py-1\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"0.7rem\" }}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleCheckoutMethodChange}\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.selectedCheckoutMethod}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{contaktiChat.checkout_methods.map((method) => {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<option value={method}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{translations.service_channels[method]}\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"col-6\">\n\t\t\t\t\t\t\t\t<label className=\"fw-bold\" style={{ fontSize: \"0.8rem\" }}>\n\t\t\t\t\t\t\t\t\t{translations.shipment_methods.title}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t<div className=\"centera\" id=\"shipment_method_select\">\n\t\t\t\t\t\t\t\t\t<select\n\t\t\t\t\t\t\t\t\t\tclassName=\"form-control w-100 py-1\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ fontSize: \"0.7rem\" }}\n\t\t\t\t\t\t\t\t\t\tonChange={this.handleShipmentChange}\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.selectedShipmentMethod.id}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{contaktiChat.shipment_methods.map((method, index) => {\n\t\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t\t<option value={method.id} key={index}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{method.name}\n\t\t\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclassName=\"btn w-50\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcolor: text_color,\n\t\t\t\t\t\t\t\t\tbackgroundColor: color,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={this.handleCustomerFormModalShow}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{cartTranslations.checkout}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n  }\n}\n\nexport default Cart;\n","import React, { Component } from 'react';\nimport { Button, Modal, } from 'react-bootstrap'\nimport CarouselWrapper from '../modules/utils/CarouselWrapper';\nimport ChatUtils from '../../classes/ChatUtils';\n\nclass ProductInfoModal extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            show: false,\n\n        }\n    }\n    handleClose = () => {\n        this.props.handleClose();\n    }\n    render() {\n        let { product, currency, translations } = this.props;\n        return (\n            <>\n                <Modal show={this.props.show} onHide={this.handleClose}>\n                    <Modal.Header closeButton>\n                        <Modal.Title>{translations.title}</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <div className=\"d-flex justify-content-between px-2\">\n                            <span className=\"float-start\">{product.title}</span>\n                            <span className=\"float-end\">\n                                <span>{ translations.price }:{ ' ' }</span><span>{ ChatUtils.displayPrice( product.price ) }{ currency }{' '}</span>\n                                {\n                                    // <span>{` ${product.with_vat ? translations.including : translations.excluding } `}</span>\n                                    // <span>{ ` ${ product.vat?.vat_percentage || 0 }% ${ translations.vat }` }</span>\n                                }\n                            </span>\n                        </div>\n                        <hr />\n                        {product.images && product.images.length > 0 &&\n                            <div>\n                                <CarouselWrapper \n                                images={product.images}\n                                origin={this.props.origin}\n                                 />    \n                                <hr />\n                            </div>\n                        }\n\n                        <div  className=\"overflow-auto mt-1 px-2\" >\n                            <div>{product.description}</div>\n                            {product.attachments && product.attachments.length > 0 && <div>\n                                {product.attachments.map((f, index) => {\n                                    return (\n                                        <span className=\"mx-1\">\n                                            <a className=\"text-decoration-none\" href={`${this.props.origin}${f.file.url}`} download >{f.file_name}</a>\n                                        </span>\n                                    )\n                                })}\n                            </div>\n                            }\n\n                        </div>\n                    </Modal.Body>\n                    <Modal.Footer>\n                        <Button variant=\"secondary\" style={{ background: this.props.buttonColor }}  size=\"sm\" onClick={this.handleClose}>\n                            {translations.close}\n                        </Button>\n                    </Modal.Footer>\n                </Modal>\n            </>\n        )\n    }\n}\n\nexport default ProductInfoModal;\n","import React, { Component } from 'react';\nimport ContaktiChat from '../../classes/ContaktiChat';\nimport Dropdown from './Dropdown';\nimport ChatBox from '../chat_box/ChatBox';\nimport CallBackBox from '../others/CallBackBox';\nimport ChatUtils from '../../classes/ChatUtils';\nimport ReactResizeDetector from 'react-resize-detector/build/withPolyfill';\nimport Cart from '../shopping_cart/Cart';\nimport ProductInfoModal from '../shopping_cart/ProductInfoModal';\n\nclass ChatPlugin extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      style: {},\n      contaktiChat: {},\n      translations: {},\n      loading: true,\n      showDropDown: false,\n      showNoAgentScreen: false,\n      showPlugin: false,\n      showMinimize: false,\n      chatStarted: false,\n      chatInitialized: false,\n      showCartIcon: false,\n      showCart: false,\n      cartEmpty: true,\n      showProductModal: false,\n      selectedProduct: {},\n      disableChatboxContent: false\n    }\n  }\n  handleProductModalClose = () => {\n    this.setState({ showProductModal: false })\n  };\n  handleProductModalShow = (p) => {\n    this.setState({ showProductModal: true, selectedProduct: p });\n  }\n\n  async componentDidMount() {\n    let contakti_chat = new ContaktiChat();\n    let chatUtils = ChatUtils\n    let urlParams = chatUtils.getUrlParams(window.location.href)\n    let serviceChannelId = urlParams.id;\n    contakti_chat.setServiceChannel(serviceChannelId);\n    await contakti_chat.setSettings();\n    await contakti_chat.setTranslations();\n\n    this.setState({\n      contaktiChat: contakti_chat,\n      loading: false,\n      style: {\n        color: contakti_chat.text_color,\n        backgroundColor: contakti_chat.color\n      }\n    });\n  }\n\n  toggleDropDown = (flag) => {\n    this.setState({ showDropDown: flag });\n  }\n  setChatStarted = () => {\n    if (!this.state.chatStarted) {\n      this.setState({ chatStarted: true });\n    }\n  }\n  showNoAgentOnlineScreen = (e) => {\n    this.setState({ showNoAgentScreen: true });\n    if (e) e.preventDefault();\n  }\n  showChatPlugin = async () => {\n    if (!this.state.chatInitialized) {\n      this.setState({ chatInitialized: true });\n    }\n    if (!this.state.showPlugin) {\n      let cont_chat = this.state.contaktiChat\n      await cont_chat.setSettings();\n      this.setState({ showPlugin: true, showMinimize: true, contaktiChat: cont_chat });\n\n      if (this.state.chatStarted) {\n        this.setState({ showDropDown: true });\n      }\n      if (!this.state.cartEmpty) {\n        this.setState({ showCartIcon: true });\n      }\n\n    }\n\n  }\n  hideChatPlugin = (e) => {\n    e.stopPropagation();\n    if (this.state.showPlugin) {\n      this.setState({ showPlugin: false, showMinimize: false, showDropDown: false, showCart: false, showCartIcon: false });\n    }\n  }\n  destroyChat = () => {\n    this.setState({ chatInitialized: false, showPlugin: false, showMinimize: false, showDropDown: false, showCartIcon: false, cartEmpty: true });\n  }\n  onResize = (width, height) => {\n    // if (width < 350){\n    //   // width = 350;\n    // }\n    // if ( height < 535)\n    // {\n    //   // height = 535;\n    // }\n    window.parent.postMessage({ type: 'set_dimensions', width, height }, \"*\");\n  }\n  toggleCart = () => {\n    this.setState({ showCart: !this.state.showCart });\n  }\n  addToCart = (product) => {\n    this.setState({ showCartIcon: true, showCart: true, cartEmpty: false }, () => this.cart.addProduct(product));\n  }\n  hideCartIcon = () => {\n    this.setState({ showCartIcon: false, showCart: false, cartEmpty: true });\n  }\n\n  setPluginDisabledState = (disabled = false) => {\n    this.setState({ disableChatboxContent: disabled });\n  }\n\n  createCartTicket = async ( customerId, products, checkout_method, shipment_method, priceWithoutTaxes=\"\", taxes=\"\", sum ) => {\n    this.setPluginDisabledState( true );\n    const taskId = await this.chatBox.createTicket(\n\t\t\ttrue,\n\t\t\tproducts,\n\t\t\tpriceWithoutTaxes,\n\t\t\ttaxes,\n\t\t\tshipment_method.price,\n\t\t\tsum,\n\t\t\tthis.state.contaktiChat.translations.user_dashboard.shopping_cart\n\t\t\t\t.order_products\n\t\t);\n    await this.chatBox.createOrder(\n\t\t\ttaskId,\n\t\t\tcustomerId,\n\t\t\tproducts,\n\t\t\tcheckout_method,\n\t\t\tshipment_method,\n\t\t\tsum\n\t\t);\n    this.chatBox.setOrderCreated();\n    this.cart.handleCustomerFormModalClose();\n    this.setState({ showCart: false, showCartIcon: false });\n    this.setPluginDisabledState( false );\n  }\n\n\n  render() {\n    const { contaktiChat, loading } = this.state;\n    let parent_width_class = '';\n\n    if (window.parent) {\n      if (window.outerWidth <= 600) {\n        parent_width_class += ' max-600-width '\n      }\n    }\n\n    if (loading) {\n      return null;\n    }\n\n    return (\n      <div id=\"contakti-chat-main\" className={parent_width_class}>\n        <ReactResizeDetector handleWidth handleHeight onResize={this.onResize} >\n          <div id=\"contakti-msg-box\"\n            className={`\n                 chat-plugin-parent\n                 ${this.state.showMinimize === true ? \"open\" : \"\"}\n              `}\n          >\n            <ProductInfoModal\n              buttonColor={contaktiChat.color}\n              product={this.state.selectedProduct}\n              handleShow={this.handleProductModalShow}\n              handleClose={this.handleProductModalClose}\n              show={this.state.showProductModal}\n              origin={contaktiChat.origin}\n              currency={ contaktiChat.currency }\n              translations={contaktiChat.translations.user_dashboard.shopping_cart}\n            />\n            <div className={\"cart-parent\" + (this.state.disableChatboxContent ? ' disabled-content' : '')} style={{ display: this.state.showCart ? \"block\" : \"none\" }}>\n              {(!this.state.cartEmpty) && contaktiChat.chat_settings.enable_cart ? (\n                <Cart ref={instance => { this.cart = instance; }}\n                    handleShow={this.handleProductModalShow}\n                    contaktiChat={contaktiChat}\n                    onCartEmpty={this.hideCartIcon}\n                    toggleCart={this.toggleCart}\n                    handleOrder={this.createCartTicket}\n                    setPluginDisabledState={ this.setPluginDisabledState }/>\n              ) : \"\"}\n            </div>\n\n            <div className={\"chat-parent flex-column d-flex\" + (this.state.disableChatboxContent ? ' disabled-content' : '')}>\n              <div id=\"contakti-msg-head\" onClick={this.showChatPlugin} className=\"msg_head\" style={this.state.style}>\n                <div>\n                  <div id=\"contakti-logo-container\">\n                    <img alt=\"logo\" src={`${contaktiChat.origin}/${contaktiChat.chat_settings.file.url}`} />\n                  </div>\n                </div>\n\n                <span id=\"contakti-user-name\" style={{ color: contaktiChat.text_color }}>{contaktiChat.chat_settings.chat_title}</span>\n\n                <span id=\"cart_show_button\" onClick={this.toggleCart} style={{ display: this.state.showCartIcon ? \"block\" : \"none\", margin: '5px 5px 0 0', color: contaktiChat.text_color }}>\n                  <i className=\"fa fa-shopping-cart mt-1\"></i>\n                </span>\n                <span>\n                  {this.state.showDropDown ? (<Dropdown styleObj={this.state.style} translations={contaktiChat.translations} showDropdown={this.state.showDropDown} quit={() => { this.chatBox.quitChat(); this.destroyChat() }} sendChatHistory={() => this.chatBox.showSendChatHistory()} downloadChatHistory={() => { this.chatBox.downloadChat(); }} startChat={() => this.showChatPlugin()} />) : \"\"}\n                </span>\n\n                <div id=\"contakti-msg-minimize\" >\n                  {this.state.showMinimize ? (\n                    <span className=\"fa-stack\" onClick={this.hideChatPlugin} style={{ color: contaktiChat.text_color }}><i className=\"fa fa-stack-2x fa-angle-down\" style={{ top: '3px', left: '0px' }}></i></span>\n                  ) : \"\"}\n                </div>\n              </div>\n              {this.state.chatInitialized ? (\n                <div  style={{ display: this.state.showPlugin ? \"block\" : \"none\" }}>\n                  {this.state.showNoAgentScreen ? (<CallBackBox contaktiChat={contaktiChat} showNoAgentOnlineScreen={this.showNoAgentOnlineScreen} ></CallBackBox>) : (\n                    <ChatBox ref={instance => { this.chatBox = instance; }}\n                      contaktiChat={contaktiChat}\n                      handleProductShow={this.handleProductModalShow}\n                      toggleDropDown={this.toggleDropDown}\n                      showNoAgentOnlineScreen={this.showNoAgentOnlineScreen}\n                      quit={() => { this.destroyChat() }}\n                      setChatStarted={this.setChatStarted}\n                      startChat={() => this.showChatPlugin()}\n                      addToCart={(product) => { this.addToCart(product) }}\n                      setPluginDisabledState={this.setPluginDisabledState}\n                    ></ChatBox>)}\n                </div>\n              ) : \"\"}\n            </div>\n          </div>\n        </ReactResizeDetector>\n      </div>\n    );\n  }\n}\n\nexport default ChatPlugin;\n","import React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n// import 'bootstrap/dist/css/bootstrap.min.css';\n\nimport './App.scss';\nimport './components/chat_plugin/ChatPlugin'\nimport ChatPlugin from './components/chat_plugin/ChatPlugin';\n\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  render() {\n    return (\n      <ChatPlugin />\n    );\n  }\n}\n\nexport default App;\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\n\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport './style.scss'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}